(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{419:function(s,a,t){"use strict";t.r(a);var n=t(25),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"从-gh-pages-分支机构-部署项目页面"}},[s._v("从 "),t("code",[s._v("gh-pages")]),s._v(" 分支机构 部署项目页面"),t("a",{attrs:{href:"#deployment-of-project-pages-from-your-gh-pages-branch"}})]),s._v(" "),t("p",[s._v("您还可以告诉GitHub页面将您的 "),t("code",[s._v("master")]),s._v(" 分支视为已发布的站点，或指向一个单独的 "),t("code",[s._v("gh-pages")]),s._v(" 分支。 后一种方法较为复杂，但具有一些优点：")]),s._v(" "),t("ul",[t("li",[s._v("它将您的源网站和生成的网站保留在不同的分支机构中，因此维护了两者的版本控制历史记录。")]),s._v(" "),t("li",[s._v("与前面的 "),t("code",[s._v("docs/")]),s._v(" 选项 不同 ，它使用默认 "),t("code",[s._v("public")]),s._v(" 文件夹。")])]),s._v(" "),t("h4",{attrs:{id:"gh-pages-分公司的-准备"}},[t("code",[s._v("gh-pages")]),s._v(" 分公司的 准备"),t("a",{attrs:{href:"#preparations-for-gh-pages-branch"}})]),s._v(" "),t("p",[s._v("这些步骤只需要执行一次。 替换 "),t("code",[s._v("upstream")]),s._v(" 为您的遥控器名称； 例如 "),t("code",[s._v("origin")]),s._v(" ：")]),s._v(" "),t("h5",{attrs:{id:"添加-public-文件夹"}},[s._v("添加 "),t("code",[s._v("public")]),s._v(" 文件夹")]),s._v(" "),t("p",[s._v("首先，将该 "),t("code",[s._v("public")]),s._v(" 文件夹 添加 到 "),t("code",[s._v(".gitignore")]),s._v(" 项目根目录的文件中，以便在master分支上忽略该目录：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('echo "public" >> .gitignore\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"初始化您的-gh-pages-分支"}},[s._v("初始化您的 "),t("code",[s._v("gh-pages")]),s._v(" 分支")]),s._v(" "),t("p",[s._v("现在，您可以将 "),t("code",[s._v("gh-pages")]),s._v(" 分支 初始化 为空的 "),t("a",{attrs:{href:"https://git-scm.com/docs/git-checkout/#git-checkout---orphanltnewbranchgt",target:"_blank",rel:"noopener noreferrer"}},[s._v("孤立分支"),t("OutboundLink")],1),s._v(" ：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('git checkout --orphan gh-pages\ngit reset --hard\ngit commit --allow-empty -m "Initializing gh-pages branch"\ngit push upstream gh-pages\ngit checkout master\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"建立与部署"}},[s._v("建立与部署"),t("a",{attrs:{href:"#build-and-deployment"}})]),s._v(" "),t("p",[s._v("现在， 使用git的工作 "),t("a",{attrs:{href:"https://git-scm.com/docs/git-worktree",target:"_blank",rel:"noopener noreferrer"}},[s._v("树功能"),t("OutboundLink")],1),s._v(" 将 "),t("code",[s._v("gh-pages")]),s._v(" 分支 检出 到您的 "),t("code",[s._v("public")]),s._v(" 文件夹中 。 本质上，工作树允许您在不同目录中签出同一本地存储库的多个分支："),t("a",{attrs:{href:"https://git-scm.com/docs/git-worktree",target:"_blank",rel:"noopener noreferrer"}},[t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rm -rf public\ngit worktree add -B gh-pages public upstream/gh-pages\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("使用 "),t("code",[s._v("hugo")]),s._v(" 命令 重新生成站点， 然后在 "),t("code",[s._v("gh-pages")]),s._v(" 分支 上提交生成的文件 ：")]),s._v(" "),t("p",[s._v("commit-gh-pages-files.sh")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("\nhugo\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" public "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Publishing to gh-pages"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如果本地 "),t("code",[s._v("gh-pages")]),s._v(" 分支中 的更改 看起来没问题，请将其推送到远程存储库：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git push upstream gh-pages\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"设置-gh-pages-为您的发布分支"}},[s._v("设置 "),t("code",[s._v("gh-pages")]),s._v(" 为您的发布分支")]),s._v(" "),t("p",[s._v("为了将您的 "),t("code",[s._v("gh-pages")]),s._v(" 分支用作发布分支，您需要在GitHub UI中配置存储库。 一旦GitHub意识到您已经创建了这个分支，这很可能会自动发生。 您还可以从GitHub项目中手动设置分支：")]),s._v(" "),t("ol",[t("li",[s._v("转到 "),t("strong",[s._v("设置")]),s._v(" → "),t("strong",[s._v("GitHub页面")])]),s._v(" "),t("li",[s._v("在 "),t("strong",[s._v("来源中")]),s._v(" ，选择“ gh-pages分支”，然后选择“ "),t("strong",[s._v("保存”")]),s._v(" 。 如果未启用该选项，则可能尚未创建分支，或者尚未将分支从本地计算机推送到GitHub上的托管存储库。")])]),s._v(" "),t("p",[s._v("片刻之后，您将在GitHub Pages站点上看到更新的内容。")]),s._v(" "),t("h4",{attrs:{id:"放入脚本"}},[s._v("放入脚本"),t("a",{attrs:{href:"#put-it-into-a-script-1"}})]),s._v(" "),t("p",[s._v("要自动执行这些步骤，可以创建具有以下内容的脚本：")]),s._v(" "),t("p",[s._v("publish_to_ghpages.sh")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The working directory is dirty. Please commit any pending changes."')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Deleting old publication"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf public\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" public\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" worktree prune\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf .git/worktrees/public/\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Checking out gh-pages branch into public"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" worktree "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -B gh-pages public upstream/gh-pages\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Removing existing files"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf public/*\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Generating site"')]),s._v("\nhugo\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Updating gh-pages branch"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" public "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Publishing to gh-pages (publish.sh)"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#echo "Pushing to github"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#git push --all")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("p",[s._v("如果工作目录中有待更改，这将中止，并且还确保删除所有先前存在的输出文件。 调整脚本以使其具有品味，例如，如果您不需要在推送之前查看gh-pages分支，则包括最后一次推送到远程存储库。")])])}),[],!1,null,null,null);a.default=e.exports}}]);