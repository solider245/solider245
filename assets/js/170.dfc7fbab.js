(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{420:function(s,t,a){"use strict";a.r(t);var e=a(25),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("GitHub Pages是直接从您的GitHub存储库托管的网站。 通常，它与静态站点生成器一起使用。 静态站点生成器（例如Jekyll，Hugo和Gitbook）使创建站点的过程变得容易，生成的HTML页面可以托管在GitHub Pages上。")]),s._v(" "),a("p",[s._v("使用静态网站生成器时，将有源文件和生成的文件。 为了在GitHub Pages上托管，它需要生成的文件，但不需要源文件。 GitHub Pages支持选择源分支： "),a("code",[s._v("master")]),s._v(" 或 "),a("code",[s._v("gh-pages")]),s._v(" 。 因此，一般的配置是将源放在 "),a("code",[s._v("master")]),s._v(" 分支中，并将生成的文件放在 "),a("code",[s._v("gh-pages")]),s._v(" 分支中。")]),s._v(" "),a("p",[s._v("在此配置中，部署工作繁琐。 静态站点生成器通常会在子目录中生成文件，例如 "),a("code",[s._v("_site")]),s._v(" 。 由于和有两个分支， "),a("code",[s._v("master")]),s._v(" 因此 "),a("code",[s._v("gh-pages")]),s._v(" 需要将它们从 "),a("code",[s._v("master")]),s._v(" 分支 移到 分支的根目录 "),a("code",[s._v("gh-pages")]),s._v(" 。 每当您要部署时，它都是必需的。")]),s._v(" "),a("p",[s._v("从Git 2.5开始，Git支持管理连接到同一存储库的多个工作树。 这样，您可以将git分支挂载为子目录。 这使部署过程更加容易，并且不需要 "),a("code",[s._v("git checkout")]),s._v(" 。 让我们逐步了解如何做。")]),s._v(" "),a("h2",{attrs:{id:"建立"}},[s._v("建立")]),s._v(" "),a("p",[s._v("首先，您需要有一个 "),a("code",[s._v("gh-pages")]),s._v(" 要挂载 的 分支。 如果没有，可以使用创建分支 "),a("code",[s._v("git branch")]),s._v(" 。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch gh-pages\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这将基于主HEAD建立分支。 可以，但是 "),a("code",[s._v("master")]),s._v(" 分支 的文件和git历史记录对 分支没有意义 "),a("code",[s._v("gh-pages")]),s._v(" 。 使用一个孤立的分支，您可以 "),a("code",[s._v("gh-pages")]),s._v(" 以一种干净的方式 进行初始化 。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout --orphan gh-pages\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --allow-empty -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Init"')]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("然后，您可以使用将分支挂载为子目录 "),a("code",[s._v("git worktree")]),s._v(" 。 确保您没有现有的目标子目录。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf _site\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" worktree "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" _site gh-pages\nPreparing _site "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("identifier _site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nHEAD is now at b475e3e Initializing gh-pages branch\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("如果您没有 "),a("code",[s._v("_site")]),s._v(" 在git中忽略，请忽略它，以免意外添加生成的文件。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_site"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" .gitignore\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("正确设置所有内容后，将 "),a("code",[s._v("git branch")]),s._v(" 显示根目录和子目录的不同分支。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch\n  gh-pages\n* master\n\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" _site\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch\n* gh-pages\n  master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"部署"}},[s._v("部署")]),s._v(" "),a("p",[s._v("当您构建静态站点时，生成的文件位于 "),a("code",[s._v("_site")]),s._v(" 目录中。 由于 "),a("code",[s._v("_site")]),s._v(" 现在是 "),a("code",[s._v("gh-pages")]),s._v(" 分支，因此您可以通过创建提交并将其推送来进行部署。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" _site\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --all\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Deploy updates"')]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin gh-pages\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"清理"}},[s._v("清理")]),s._v(" "),a("p",[s._v("要卸载该子目录，可以运行以下命令。 运行时，它将删除工作树信息和已安装的子目录。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" worktree remove _site\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("如果删除 "),a("code",[s._v("_site")]),s._v(" 不带 的 目录 "),a("code",[s._v("git worktree remove")]),s._v(" ， "),a("code",[s._v("git worktree")]),s._v(" 则不会知道 该 目录 ， 并继续在中显示 该 目录 "),a("code",[s._v("git worktree list")]),s._v(" 。 最终将其删除（ "),a("code",[s._v("gc.worktreePruneExpire")]),s._v(" ）。 如果立即清理，请运行 "),a("code",[s._v("git worktree prune")]),s._v(" 。")])]),s._v(" "),a("h2",{attrs:{id:"使用脚本自动化"}},[s._v("使用脚本自动化")]),s._v(" "),a("p",[s._v("您现在了解了如何逐步进行操作。 现在，是时候使用Shell脚本进行自动化了。 使用下面的脚本，您只需要在部署时运行它即可。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("directory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("_site\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("branch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gh-pages\n"),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("build_command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  jekyll build\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[0;32mDeleting old content..."),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[0;32mChecking out "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$branch")]),s._v("...."),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" worktree "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$branch")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[0;32mGenerating site..."),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),s._v("\nbuild_command\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[0;32mDeploying "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$branch")]),s._v(" branch..."),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" --all "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Deploy updates"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$branch")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[0;32mCleaning up..."),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" worktree remove "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);