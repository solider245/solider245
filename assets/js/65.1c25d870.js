(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{513:function(t,e,a){"use strict";a.r(e);var s=a(25),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#原始问题"}},[t._v("原始问题")])]),a("li",[a("a",{attrs:{href:"#linux下载文件的常见步骤"}},[t._v("Linux下载文件的常见步骤")]),a("ul",[a("li",[a("a",{attrs:{href:"#wget下载办法"}},[t._v("wget下载办法")])]),a("li",[a("a",{attrs:{href:"#反向输出"}},[t._v("反向输出")])]),a("li",[a("a",{attrs:{href:"#curl方法"}},[t._v("curl方法")])])])])])]),a("p"),t._v(" "),a("blockquote",[a("p",[t._v("这个问题困扰了我很久，现在终于找到比较好的办法，写一篇文章存个档吧。")])]),t._v(" "),a("h2",{attrs:{id:"原始问题"}},[t._v("原始问题")]),t._v(" "),a("p",[t._v("我想下载并解压缩指定目录下的档案。 到目前为止，这是我一直在做的事情：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget http://downloads.mysql.com/source/dbt2-0.37.50.3.tar.gz\ntar zxf dbt2-0.37.50.3.tar.gz\nmv dbt2-0.37.50.3 dbt2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("我想 "),a("em",[t._v("即时")]),t._v(" 下载并解压缩存档 ，而无需 "),a("code",[t._v("tar.gz")]),t._v(" 写入磁盘。 我认为可以通过将的输出 "),a("code",[t._v("wget")]),t._v(" 传递给 "),a("code",[t._v("tar")]),t._v(" ，并给出 "),a("code",[t._v("tar")]),t._v(" 一个目标来实现，但实际上我不知道如何将各个部分放在一起。")]),t._v(" "),a("h2",{attrs:{id:"linux下载文件的常见步骤"}},[t._v("Linux下载文件的常见步骤")]),t._v(" "),a("p",[t._v("通常步骤：")]),t._v(" "),a("ol",[a("li",[t._v("下载文件")]),t._v(" "),a("li",[t._v("解压缩文件")]),t._v(" "),a("li",[t._v("删除掉压缩包")])]),t._v(" "),a("h3",{attrs:{id:"wget下载办法"}},[t._v("wget下载办法")]),t._v(" "),a("p",[t._v("您可以通过告诉 "),a("code",[t._v("wget")]),t._v(" 将其有效负载输出到stdout（带有标志 "),a("code",[t._v("-O-")]),t._v(" ）并禁止其自己的输出（带有标志 "),a("code",[t._v("-q")]),t._v(" ）来实现：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget -qO- your_link_here | tar xvz -\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("要指定目标目录：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget -qO- your_link_here | tar xvz - -C /target/directory\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("更新资料")])]),t._v(" "),a("p",[t._v("如果您碰巧有GNU "),a("code",[t._v("tar")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget -qO- your_link_here | tar --transform 's/^dbt2-0.37.50.3/dbt2/' -xvz\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("应该让您一步一步就能做到。")]),t._v(" "),a("p",[a("code",[t._v("-q")]),t._v(" 安静")]),t._v(" "),a("p",[a("code",[t._v("-O -")]),t._v(" 输出到标准输出")]),t._v(" "),a("h3",{attrs:{id:"反向输出"}},[t._v("反向输出")]),t._v(" "),a("p",[t._v("这个oneliner可以解决这个问题：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("tar xvzf -C /tmp/ < <(wget -q -O - http://foo.com/myfile.tar.gz)\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("简短说明：首先执行括号中的右侧（ "),a("code",[t._v("-q")]),t._v(" 告诉wget安静地执行此操作， "),a("code",[t._v("-O -")]),t._v(" 用于将输出写入stdout）。")]),t._v(" "),a("p",[t._v("然后，我们使用Bash中的流程替换运算符 "),a("code",[t._v("<(")]),t._v(" 创建一个 "),a("em",[t._v("命名管道，")]),t._v(" 以创建一个"),a("em",[t._v("命名管道")]),t._v(" 。 这样，我们创建了一个临时文件描述符，然后使用 "),a("code",[t._v("<")]),t._v(" 文件重定向运算符 将该描述符的内容 定向 到tar 。")]),t._v(" "),a("h3",{attrs:{id:"curl方法"}},[t._v("curl方法")]),t._v(" "),a("p",[t._v("另一个选项是使用 "),a("code",[t._v("curl")]),t._v(" 默认情况下写入标准输出的 选项 ：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("curl -s some_url | tar xvz -C /tmp\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("命令解读：")]),t._v(" "),a("ul",[a("li",[t._v("curl 先下载某文件")]),t._v(" "),a("li",[t._v("tarxvz 解压某文件")]),t._v(" "),a("li",[t._v("-C /tmp 解压到tmp文件夹")])]),t._v(" "),a("p",[t._v("这里有个问题，有些压缩包会有很多内容并不只是单纯一个二进制文件。\n建议->例如，要查看存储库中文件的过滤列表，可以使用： "),a("code",[t._v("$ curl -L https://api.github.com/repos/repo_owner/repo_name/tarball | tar tvfz - -C /tmp --wildcards *.py")]),t._v("\n所以可以使用上面的命令来过滤")])])}),[],!1,null,null,null);e.default=v.exports}}]);