(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{437:function(e,s,n){"use strict";n.r(s);var a=n(25),t=Object(a.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#原始问题"}},[e._v("原始问题")])]),n("li",[n("a",{attrs:{href:"#最佳答案"}},[e._v("最佳答案")])]),n("li",[n("a",{attrs:{href:"#第二高赞答案"}},[e._v("第二高赞答案")])]),n("li",[n("a",{attrs:{href:"#第三赞"}},[e._v("第三赞")])])])]),n("p"),e._v(" "),n("h2",{attrs:{id:"原始问题"}},[e._v("原始问题")]),e._v(" "),n("p",[e._v("我想使用docker-compose启动服务并保持容器运行，以便我可以通过“ docker inspect”获取其IP地址。 但是，容器始终在启动后立即退出。")]),e._v(" "),n("p",[e._v("我试图在docker-compose.yml中添加“ command：[“ sleep”，“ 60”]“和其他内容，但是每当我添加带有” command：...“的行时，我都无法调用” docker-compose up“因为我将收到消息“无法启动容器.....系统错误：无效的字符'k'寻找值的开始”")]),e._v(" "),n("p",[e._v("我还尝试将“ CMD sleep 60”和诸如此类的内容添加到Dockerfile本身，但是这些命令似乎并未执行。")]),e._v(" "),n("p",[e._v("是否有一种简单的方法来保持容器的寿命或解决我的问题之一？")]),e._v(" "),n("p",[e._v("编辑：这是我要运行的撰写文件：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("version: '2'\nservices:\n  my-test:\n    image: ubuntu\n    command: bash -c \"while true; do echo hello; sleep 2; done\"\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[e._v("如果我在OS X下以docker-compose开头，则工作正常，但如果在Ubuntu 16.04下尝试相同操作，则会出现上述错误消息。")]),e._v(" "),n("p",[e._v("如果我尝试使用Dockerfile的方法，则Dockerfile如下所示：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('FROM ubuntu:latest\nCMD ["sleep", "60"]\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("哪个似乎什么都没做")]),e._v(" "),n("p",[e._v("编辑2：我必须纠正自己，原来这是与Dockerfile和docker-compose.yml相同的问题：每次我向Dockerfile添加“ CMD ...”或向其中添加“ command ...”撰写文件时，出现无效字符并出现上述错误。 如果我删除了这两个命令，它会正常工作。")]),e._v(" "),n("h2",{attrs:{id:"最佳答案"}},[e._v("最佳答案")]),e._v(" "),n("p",[e._v("要使容器在启动时保持运行 "),n("code",[e._v("docker-compose")]),e._v(" ，请使用以下命令")]),e._v(" "),n("p",[n("code",[e._v("command: tail -F anything")])]),e._v(" "),n("p",[e._v("所以你的docker-compose.yml变成")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("version: '2'\nservices:\n  my-test:\n    image: ubuntu\n    command: tail -F anything\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[e._v("您可以使用以下命令运行外壳程序以进入容器")]),e._v(" "),n("p",[n("code",[e._v("docker exec -i -t composename_my-test_1 bash")])]),e._v(" "),n("p",[e._v("容器前面 "),n("code",[e._v("composename")]),e._v(" 的名称 在哪里 "),n("code",[e._v("docker-compose")]),e._v(" 。")]),e._v(" "),n("h2",{attrs:{id:"第二高赞答案"}},[e._v("第二高赞答案")]),e._v(" "),n("p",[e._v("您可以使用 "),n("code",[e._v("tty")]),e._v(" 配置选项。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("version: '3'\n\nservices:\n  app:\n    image: node:8\n    tty: true           # <-- This option\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br")])]),n("p",[n("em",[e._v("注意：如果将Dockerfile用于映像和"),n("code",[e._v("CMD")]),e._v("Dockerfile中，则此选项将不起作用；但是，您可以"),n("code",[e._v("entrypoint")]),e._v("在compose文件中使用该选项，以"),n("code",[e._v("CMD")]),e._v("从Dockerfile中清除。")])]),e._v(" "),n("h2",{attrs:{id:"第三赞"}},[e._v("第三赞")]),e._v(" "),n("p",[e._v("根据 "),n("a",{attrs:{href:"https://github.com/docker/compose/issues/1926#issuecomment-135068628",target:"_blank",rel:"noopener noreferrer"}},[e._v("@aanand在GitHub"),n("OutboundLink")],1),e._v(" 上 "),n("a",{attrs:{href:"https://github.com/docker/compose/issues/1926#issuecomment-135068628",target:"_blank",rel:"noopener noreferrer"}},[e._v("的评论2015年8月26日"),n("OutboundLink")],1),e._v(" ，可以 "),n("code",[e._v("tail -f /dev/null")]),e._v(" 在docker-compose中使用以保持容器运行。")]),e._v(" "),n("p",[n("strong",[e._v("docker-compose.yml示例")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("version: '3'\nservices:\n  some-app:\n    command: tail -f /dev/null\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[n("strong",[e._v("为什么使用此命令？")])]),e._v(" "),n("p",[e._v("选择此选项的唯一原因是它在GitHub上获得了很多赞扬，但是投票率最高的答案并不意味着它是最佳答案。 第二个原因是务实的原因，由于截止日期必须尽快解决问题。")])])}),[],!1,null,null,null);s.default=t.exports}}]);