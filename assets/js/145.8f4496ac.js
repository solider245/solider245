(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{363:function(e,s,a){"use strict";a.r(s);var n=a(25),v=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#ç”¨æ³•-ğŸ”—-usage"}},[e._v("ç”¨æ³• ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#buildkit-ğŸ”—-buildkit"}},[e._v("BuildKit ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#æ ¼å¼-ğŸ”—-format"}},[e._v("æ ¼å¼ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#è§£æå™¨æŒ‡ä»¤-ğŸ”—-parser-directives"}},[e._v("è§£æå™¨æŒ‡ä»¤ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#è¯­æ³•-ğŸ”—-syntax"}},[e._v("è¯­æ³• ğŸ”—")]),a("ul",[a("li",[a("a",{attrs:{href:"#å®˜æ–¹å‘å¸ƒ-ğŸ”—-official-releases"}},[e._v("å®˜æ–¹å‘å¸ƒ ğŸ”—")])])])]),a("li",[a("a",{attrs:{href:"#é€ƒè„±-ğŸ”—-escape"}},[e._v("é€ƒè„± ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#æ›´æ¢ç¯å¢ƒ-ğŸ”—-environment-replacement"}},[e._v("æ›´æ¢ç¯å¢ƒ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#dockerignoreæ–‡ä»¶-ğŸ”—-dockerignore-file"}},[e._v(".dockerignoreæ–‡ä»¶ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#æ¥è‡ª-ğŸ”—-from"}},[e._v("æ¥è‡ª ğŸ”—")]),a("ul",[a("li",[a("a",{attrs:{href:"#äº†è§£argå’Œfromä¹‹é—´çš„äº¤äº’æ–¹å¼-ğŸ”—-understand-how-arg-and-from-interact"}},[e._v("äº†è§£ARGå’ŒFROMä¹‹é—´çš„äº¤äº’æ–¹å¼ ğŸ”—")])])])]),a("li",[a("a",{attrs:{href:"#è¿è¡Œ-ğŸ”—-run"}},[e._v("è¿è¡Œ ğŸ”—")]),a("ul",[a("li",[a("a",{attrs:{href:"#å·²çŸ¥é—®é¢˜ï¼ˆè¿è¡Œï¼‰-ğŸ”—-known-issues-run"}},[e._v("å·²çŸ¥é—®é¢˜ï¼ˆè¿è¡Œï¼‰ ğŸ”—")])])])]),a("li",[a("a",{attrs:{href:"#cmd-ğŸ”—-cmd"}},[e._v("CMD ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#æ ‡ç­¾-ğŸ”—-label"}},[e._v("æ ‡ç­¾ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#ç»´æŠ¤è€…-maintainer-deprecated-ï¼ˆå·²å¼ƒç”¨ï¼‰-ğŸ”—-maintainer-deprecated"}},[e._v("ç»´æŠ¤è€…](#maintainer-deprecated) ï¼ˆå·²å¼ƒç”¨ï¼‰ [ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#æš´éœ²-ğŸ”—-expose"}},[e._v("æš´éœ² ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#ç¯ä¿-v-env"}},[e._v("ç¯ä¿ V")])]),a("li",[a("a",{attrs:{href:"#æ·»åŠ -ğŸ”—-add"}},[e._v("æ·»åŠ  ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å¤åˆ¶-ğŸ”—-copy"}},[e._v("å¤åˆ¶ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å…¥å£ç‚¹-ğŸ”—-entrypoint"}},[e._v("å…¥å£ç‚¹ ğŸ”—")]),a("ul",[a("li",[a("a",{attrs:{href:"#æ‰§è¡Œè¡¨æ ¼entrypointç¤ºä¾‹-ğŸ”—-exec-form-entrypoint-example"}},[e._v("æ‰§è¡Œè¡¨æ ¼ENTRYPOINTç¤ºä¾‹ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å¤–å£³å½¢å¼entrypointç¤ºä¾‹-example-shell-form-entrypoint-example"}},[e._v("å¤–å£³å½¢å¼ENTRYPOINTç¤ºä¾‹ example")])]),a("li",[a("a",{attrs:{href:"#äº†è§£cmdå’Œentrypointå¦‚ä½•ç›¸äº’ä½œç”¨-ğŸ”—-understand-how-cmd-and-entrypoint-interact"}},[e._v("äº†è§£CMDå’ŒENTRYPOINTå¦‚ä½•ç›¸äº’ä½œç”¨ ğŸ”—")])])])]),a("li",[a("a",{attrs:{href:"#éŸ³é‡-ğŸ”—-volume"}},[e._v("éŸ³é‡ ğŸ”—")]),a("ul",[a("li",[a("a",{attrs:{href:"#æœ‰å…³æŒ‡å®šå·çš„æ³¨æ„äº‹é¡¹-ğŸ”—-notes-about-specifying-volumes"}},[e._v("æœ‰å…³æŒ‡å®šå·çš„æ³¨æ„äº‹é¡¹ ğŸ”—")])])])]),a("li",[a("a",{attrs:{href:"#ç”¨æˆ·-ğŸ”—-user"}},[e._v("ç”¨æˆ· ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#workdir-ğŸ”—-workdir"}},[e._v("WORKDIR ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#arg-ğŸ”—-arg"}},[e._v("ARG ğŸ”—")]),a("ul",[a("li",[a("a",{attrs:{href:"#é»˜è®¤å€¼-ğŸ”—-default-values"}},[e._v("é»˜è®¤å€¼ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#èŒƒå›´-ğŸ”—-scope"}},[e._v("èŒƒå›´ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#ä½¿ç”¨argå˜é‡-ğŸ”—-using-arg-variables"}},[e._v("ä½¿ç”¨ARGå˜é‡ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#é¢„å®šä¹‰çš„-argsğŸ”—-predefined-args"}},[e._v("é¢„å®šä¹‰çš„ ARGsğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å…¨çƒèŒƒå›´å†…çš„è‡ªåŠ¨å¹³å°-argsğŸ”—-automatic-platform-args-in-the-global-scope"}},[e._v("å…¨çƒèŒƒå›´å†…çš„è‡ªåŠ¨å¹³å° ARGsğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å¯¹æ„å»ºç¼“å­˜çš„å½±å“-ğŸ”—-impact-on-build-caching"}},[e._v("å¯¹æ„å»ºç¼“å­˜çš„å½±å“ ğŸ”—")])])])]),a("li",[a("a",{attrs:{href:"#å·²å»º-ğŸ”—-onbuild"}},[e._v("å·²å»º ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#åœæ­¢-ä¿¡å·ğŸ”—-stopsignal"}},[e._v("åœæ­¢ ä¿¡å·ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å¥åº·-æ£€æŸ¥ğŸ”—-healthcheck"}},[e._v("å¥åº· æ£€æŸ¥ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#shell-ğŸ”—-shell"}},[e._v("SHELL ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#å¤–éƒ¨å®æ–½åŠŸèƒ½-ğŸ”—-external-implementation-features"}},[e._v("å¤–éƒ¨å®æ–½åŠŸèƒ½ ğŸ”—")])]),a("li",[a("a",{attrs:{href:"#dockerfileç¤ºä¾‹-examples-dockerfile-examples"}},[e._v("Dockerfileç¤ºä¾‹ examples")])])])]),e._v("\nDockerå¯ä»¥é€šè¿‡é˜…è¯»Dockerçš„æŒ‡ä»¤æ¥è‡ªåŠ¨æ„å»ºæ˜ åƒ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ A "),a("code",[e._v("Dockerfile")]),e._v(" æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«ç”¨æˆ·å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè°ƒç”¨ä»¥ç»„è£…å›¾åƒçš„æ‰€æœ‰å‘½ä»¤ã€‚ ä½¿ç”¨ "),a("code",[e._v("docker build")]),e._v(" ç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨æ„å»ºï¼Œè¯¥æ„å»ºè¿ç»­æ‰§è¡Œå¤šä¸ªå‘½ä»¤è¡ŒæŒ‡ä»¤ã€‚"),a("p"),e._v(" "),a("p",[e._v("æœ¬é¡µæè¿°æ‚¨å¯ä»¥åœ¨ä¸­ä½¿ç”¨çš„å‘½ä»¤ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ é˜…è¯»å®Œæ­¤é¡µé¢åï¼Œè¯·å‚è€ƒ "),a("a",{attrs:{href:"https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("Dockerfile")]),e._v("æœ€ä½³å®è·µ"),a("OutboundLink")],1),e._v(" ä»¥è·å–æœ‰å…³æŠ€å·§çš„æŒ‡å—ã€‚")]),e._v(" "),a("h2",{attrs:{id:"ç”¨æ³•-ğŸ”—"}},[e._v("ç”¨æ³• "),a("a",{attrs:{href:"#usage"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("çš„ "),a("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/build/",target:"_blank",rel:"noopener noreferrer"}},[e._v("æ¬è¿å·¥æ„å»º"),a("OutboundLink")],1),e._v(" å‘½ä»¤ä»ä¸€ä¸ªæ„å»ºçš„å›¾åƒ "),a("code",[e._v("Dockerfile")]),e._v(" å’Œä¸€ä¸ª "),a("em",[e._v("ä¸Šä¸‹æ–‡")]),e._v(" ã€‚ æ„å»ºçš„ä¸Šä¸‹æ–‡æ˜¯æŒ‡å®šä½ç½® "),a("code",[e._v("PATH")]),e._v(" æˆ– çš„æ–‡ä»¶é›† "),a("code",[e._v("URL")]),e._v(" ã€‚ è¿™ "),a("code",[e._v("PATH")]),e._v(" æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç›®å½•ã€‚ è¯¥ "),a("code",[e._v("URL")]),e._v(" æ˜¯ä¸€ä¸ªGitä»“åº“çš„ä½ç½®ã€‚")]),e._v(" "),a("p",[e._v("ä¸Šä¸‹æ–‡æ˜¯é€’å½’å¤„ç†çš„ã€‚ å› æ­¤ï¼Œa "),a("code",[e._v("PATH")]),e._v(" åŒ…æ‹¬ä»»ä½•å­ç›®å½•ï¼Œå¹¶ä¸” a åŒ…æ‹¬ "),a("code",[e._v("URL")]),e._v(" å­˜å‚¨åº“åŠå…¶å­æ¨¡å—ã€‚ æ­¤ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªä½¿ç”¨å½“å‰ç›®å½•ä½œä¸ºä¸Šä¸‹æ–‡çš„æ„å»ºå‘½ä»¤ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build .\n\nSending build context to Docker daemon  6.51 MB\n...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("æ„å»ºæ˜¯ç”±Dockerå®ˆæŠ¤ç¨‹åºè€Œä¸æ˜¯CLIè¿è¡Œçš„ã€‚ ç”Ÿæˆè¿‡ç¨‹è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å°†æ•´ä¸ªä¸Šä¸‹æ–‡ï¼ˆé€’å½’ï¼‰å‘é€åˆ°å®ˆæŠ¤ç¨‹åºã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€å¥½ä»ç©ºç›®å½•å¼€å§‹ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œå¹¶å°†Dockerfileä¿ç•™åœ¨è¯¥ç›®å½•ä¸­ã€‚ ä»…æ·»åŠ æ„å»ºDockerfileæ‰€éœ€çš„æ–‡ä»¶ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("è­¦å‘Š")])]),e._v(" "),a("p",[e._v("ä¸è¦ç”¨ä½ çš„æ ¹ç›®å½•ä¸‹ï¼Œ "),a("code",[e._v("/")]),e._v(" ä½œä¸º "),a("code",[e._v("PATH")]),e._v(" å› ä¸ºå®ƒä¼šå¯¼è‡´ç”Ÿæˆåˆ°æ‚¨çš„ç¡¬ç›˜é©±åŠ¨å™¨çš„å…¨éƒ¨å†…å®¹ä¼ è¾“åˆ°ç å¤´å·¥äººå®ˆæŠ¤è¿›ç¨‹ã€‚")])]),e._v(" "),a("p",[e._v("è¦åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨æ–‡ä»¶ï¼Œ "),a("code",[e._v("Dockerfile")]),e._v(" å¼•ç”¨æ˜¯æŒ‡æŒ‡ä»¤ï¼ˆä¾‹å¦‚ï¼Œ "),a("code",[e._v("COPY")]),e._v(" æŒ‡ä»¤ï¼‰ä¸­ æŒ‡å®šçš„æ–‡ä»¶ ã€‚ è¦æé«˜æ„å»ºçš„æ€§èƒ½ï¼Œè¯·é€šè¿‡å°† "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶ æ·»åŠ  åˆ°ä¸Šä¸‹æ–‡ç›®å½•æ¥ æ’é™¤æ–‡ä»¶å’Œ ç›®å½•ã€‚ æœ‰å…³å¦‚ä½• "),a("a",{attrs:{href:"#dockerignore-file"}},[e._v("åˆ›å»º "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶çš„ä¿¡æ¯ï¼Œ")]),e._v(" è¯·å‚é˜…æ­¤é¡µé¢ä¸Šçš„æ–‡æ¡£ã€‚")]),e._v(" "),a("p",[e._v("ä¼ ç»Ÿä¸Šï¼Œ "),a("code",[e._v("Dockerfile")]),e._v(" ç§°ä¸º "),a("code",[e._v("Dockerfile")]),e._v(" å¹¶ä½äºä¸Šä¸‹æ–‡çš„æ ¹ä¸­ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("-f")]),e._v(" æ ‡å¿—with "),a("code",[e._v("docker build")]),e._v(" æŒ‡å‘æ–‡ä»¶ç³»ç»Ÿä¸­ä»»ä½•ä½ç½®çš„Dockerfileã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build -f /path/to/a/Dockerfile .\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å¦‚æœæ„å»ºæˆåŠŸï¼Œåˆ™å¯ä»¥æŒ‡å®šä¸€ä¸ªå­˜å‚¨åº“å’Œæ ‡è®°ï¼Œç”¨äºåœ¨å…¶ä¸­å­˜å‚¨æ–°å›¾åƒï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build -t shykes/myapp .\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦åœ¨æ„å»ºåå°†æ˜ åƒæ ‡è®°åˆ°å¤šä¸ªå­˜å‚¨åº“ä¸­ï¼Œè¯·åœ¨ "),a("code",[e._v("-t")]),e._v(" è¿è¡Œ "),a("code",[e._v("build")]),e._v(" å‘½ä»¤ æ—¶ æ·»åŠ å¤šä¸ª å‚æ•° ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build -t shykes/myapp:1.0.2 -t shykes/myapp:latest .\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("åœ¨Dockerå®ˆæŠ¤ç¨‹åºè¿è¡Œä¸­çš„æŒ‡ä»¤ä¹‹å‰ "),a("code",[e._v("Dockerfile")]),e._v(" ï¼Œå®ƒ ä¼šå¯¹ è¿›è¡Œåˆæ­¥éªŒè¯ï¼Œ "),a("code",[e._v("Dockerfile")]),e._v(" å¦‚æœè¯­æ³•ä¸æ­£ç¡®ï¼Œåˆ™è¿”å›é”™è¯¯ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build -t test/myapp .\n\nSending build context to Docker daemon 2.048 kB\nError response from daemon: Unknown instruction: RUNCMD\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("Dockerå®ˆæŠ¤ç¨‹åºä»¥ "),a("code",[e._v("Dockerfile")]),e._v(" ä¸€å¯¹ä¸€çš„æ–¹å¼ è¿è¡ŒæŒ‡ä»¤ï¼Œ å¦‚æœ‰å¿…è¦ï¼Œå°†æ¯æ¡æŒ‡ä»¤çš„ç»“æœæäº¤åˆ°æ–°æ˜ åƒï¼Œç„¶åæœ€ç»ˆè¾“å‡ºæ–°æ˜ åƒçš„IDã€‚ Dockerå®ˆæŠ¤ç¨‹åºå°†è‡ªåŠ¨æ¸…ç†æ‚¨å‘é€çš„ä¸Šä¸‹æ–‡ã€‚")]),e._v(" "),a("p",[e._v("è¯·æ³¨æ„ï¼Œæ¯æ¡æŒ‡ä»¤éƒ½æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œå¹¶ä¼šå¯¼è‡´åˆ›å»ºæ–°æ˜ åƒ-å› æ­¤ "),a("code",[e._v("RUN cd /tmp")]),e._v(" å¯¹ä¸‹ä¸€æ¡æŒ‡ä»¤ä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚")]),e._v(" "),a("p",[e._v("Dockerå°†å°½å¯èƒ½é‡ç”¨ä¸­é—´æ˜ åƒï¼ˆç¼“å­˜ï¼‰ï¼Œä»¥ "),a("code",[e._v("docker build")]),e._v(" æ˜¾ç€ åŠ é€Ÿè¯¥ è¿‡ç¨‹ã€‚ è¿™ç”± "),a("code",[e._v("Using cache")]),e._v(" æ§åˆ¶å°è¾“å‡ºä¸­ çš„ æ¶ˆæ¯ æŒ‡ç¤º ã€‚ ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… "),a("a",{attrs:{href:"https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("Dockerfile")]),e._v("æœ€ä½³åšæ³•æŒ‡å—"),a("OutboundLink")],1),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build -t svendowideit/ambassador .\n\nSending build context to Docker daemon 15.36 kB\nStep 1/4 : FROM alpine:3.2\n ---\x3e 31f630c65071\nStep 2/4 : MAINTAINER SvenDowideit@home.org.au\n ---\x3e Using cache\n ---\x3e 2a1c91448f5f\nStep 3/4 : RUN apk update &&      apk add socat &&        rm -r /var/cache/\n ---\x3e Using cache\n ---\x3e 21ed6e7fbb73\nStep 4/4 : CMD env | grep _TCP= | (sed 's/.*_PORT_\\([0-9]*\\)_TCP=tcp:\\/\\/\\(.*\\):\\(.*\\)/socat -t 100000000 TCP4-LISTEN:\\1,fork,reuseaddr TCP4:\\2:\\3 \\&/' && echo wait) | sh\n ---\x3e Using cache\n ---\x3e 7ea8aef582cc\nSuccessfully built 7ea8aef582cc\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br")])]),a("p",[e._v("æ„å»ºç¼“å­˜ä»…ç”¨äºå…·æœ‰æœ¬åœ°çˆ¶é“¾çš„æ˜ åƒã€‚ è¿™æ„å‘³ç€è¿™äº›å›¾åƒæ˜¯ç”±ä»¥å‰çš„ç‰ˆæœ¬åˆ›å»ºçš„ï¼Œæˆ–è€…æ•´ä¸ªå›¾åƒé“¾éƒ½å·²åŠ è½½ "),a("code",[e._v("docker load")]),e._v(" ã€‚ å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨ç‰¹å®šæ˜ åƒçš„æ„å»ºç¼“å­˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("--cache-from")]),e._v(" é€‰é¡¹ æŒ‡å®šå®ƒ ã€‚ æŒ‡å®šçš„å›¾åƒ "),a("code",[e._v("--cache-from")]),e._v(" ä¸éœ€è¦å…·æœ‰çˆ¶é“¾ï¼Œå¹¶ä¸”å¯ä»¥ä»å…¶ä»–æ³¨å†Œè¡¨ä¸­æå–ã€‚")]),e._v(" "),a("p",[e._v("å®Œæˆæ„å»ºåï¼Œå°±å¯ä»¥å¼€å§‹ç ”ç©¶ "),a("a",{attrs:{href:"https://docs.docker.com/engine/tutorials/dockerrepos/#/contributing-to-docker-hub",target:"_blank",rel:"noopener noreferrer"}},[a("em",[e._v("å°†å­˜å‚¨åº“æ¨é€åˆ°å…¶æ³¨å†Œè¡¨äº†")]),a("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),a("h2",{attrs:{id:"buildkit-ğŸ”—"}},[e._v("BuildKit "),a("a",{attrs:{href:"#buildkit"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("ä»ç‰ˆæœ¬18.09å¼€å§‹ï¼ŒDockeræ”¯æŒç”± "),a("a",{attrs:{href:"https://github.com/moby/buildkit",target:"_blank",rel:"noopener noreferrer"}},[e._v("moby / buildkit"),a("OutboundLink")],1),e._v(" é¡¹ç›® æä¾›çš„ç”¨äºæ‰§è¡Œæ„å»ºçš„æ–°åç«¯ ã€‚ ä¸æ—§çš„å®ç°ç›¸æ¯”ï¼ŒBuildKitåç«¯æä¾›äº†è®¸å¤šå¥½å¤„ã€‚ ä¾‹å¦‚ï¼ŒBuildKitå¯ä»¥ï¼š")]),e._v(" "),a("ul",[a("li",[e._v("æ£€æµ‹å¹¶è·³è¿‡æ‰§è¡Œæœªä½¿ç”¨çš„æ„å»ºé˜¶æ®µ")]),e._v(" "),a("li",[e._v("å¹¶è¡Œæ„å»ºç‹¬ç«‹æ„å»ºé˜¶æ®µ")]),e._v(" "),a("li",[e._v("ä¸¤æ¬¡æ„å»ºä¹‹é—´ä»…å¢é‡ä¼ è¾“æ„å»ºä¸Šä¸‹æ–‡ä¸­çš„æ›´æ”¹æ–‡ä»¶")]),e._v(" "),a("li",[e._v("åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­æ£€æµ‹å¹¶è·³è¿‡ä¼ è¾“æœªä½¿ç”¨çš„æ–‡ä»¶")]),e._v(" "),a("li",[e._v("ä½¿ç”¨å…·æœ‰è®¸å¤šæ–°åŠŸèƒ½çš„å¤–éƒ¨Dockerfileå®ç°")]),e._v(" "),a("li",[e._v("é¿å…ä¸å…¶ä»–APIäº§ç”Ÿå‰¯ä½œç”¨ï¼ˆä¸­é—´å›¾åƒå’Œå®¹å™¨ï¼‰")]),e._v(" "),a("li",[e._v("ä¼˜å…ˆè€ƒè™‘æ„å»ºç¼“å­˜ä»¥è¿›è¡Œè‡ªåŠ¨ä¿®å‰ª")])]),e._v(" "),a("p",[e._v("è¦ä½¿ç”¨BuildKitåç«¯ï¼Œæ‚¨éœ€è¦ "),a("code",[e._v("DOCKER_BUILDKIT=1")]),e._v(" åœ¨CLIä¸Š è®¾ç½®ç¯å¢ƒå˜é‡ ï¼Œç„¶åå†è°ƒç”¨ "),a("code",[e._v("docker build")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¦äº†è§£åŸºäºBuildKitçš„æ„å»ºå¯ç”¨çš„å®éªŒæ€§Dockerfileè¯­æ³•ï¼Œ "),a("a",{attrs:{href:"https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/experimental.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¯·å‚é˜…BuildKitå­˜å‚¨åº“ä¸­çš„æ–‡æ¡£"),a("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),a("h2",{attrs:{id:"æ ¼å¼-ğŸ”—"}},[e._v("æ ¼å¼ "),a("a",{attrs:{href:"#format"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("è¿™æ˜¯çš„æ ¼å¼ "),a("code",[e._v("Dockerfile")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Comment\nINSTRUCTION arguments\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("è¯¥æŒ‡ä»¤ä¸åŒºåˆ†å¤§å°å†™ã€‚ ä½†æ˜¯ï¼Œçº¦å®šå°†å®ƒä»¬å¤§å†™ï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°å°†å®ƒä»¬ä¸å‚æ•°åŒºåˆ†å¼€ã€‚")]),e._v(" "),a("p",[e._v("Docker "),a("code",[e._v("Dockerfile")]),e._v(" æŒ‰é¡ºåº è¿è¡ŒæŒ‡ä»¤ ã€‚ ä¸€ä¸ª "),a("code",[e._v("Dockerfile")]),e._v(" "),a("strong",[e._v("å¿…é¡»ä»¥å¼€å§‹"),a("code",[e._v("FROM")]),e._v("çš„æŒ‡ä»¤")]),e._v(" ã€‚ è¿™å¯èƒ½åœ¨ "),a("a",{attrs:{href:"#parser-directives"}},[e._v("è§£æå™¨æŒ‡ä»¤")]),e._v(" ï¼Œ "),a("a",{attrs:{href:"#format"}},[e._v("æ³¨é‡Š")]),e._v(" å’Œå…¨å±€èŒƒå›´çš„ "),a("a",{attrs:{href:"#arg"}},[e._v("ARGä¹‹å")]),e._v(" ã€‚ è¯¥ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤æŒ‡å®š è¦ä»ä¸­æ„å»º "),a("a",{attrs:{href:"https://docs.docker.com/glossary/#parent_image",target:"_blank",rel:"noopener noreferrer"}},[a("em",[e._v("çˆ¶å›¾åƒ")]),a("OutboundLink")],1),e._v(" ã€‚ "),a("code",[e._v("FROM")]),e._v(" åªèƒ½åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤ä¹‹åï¼Œè¿™äº›æŒ‡ä»¤å£°æ˜åœ¨ä¸­çš„ "),a("code",[e._v("FROM")]),e._v(" è¡Œä¸­ ä½¿ç”¨çš„å‚æ•° "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ç å¤´å·¥äººå¯¹å¾…çº¿ "),a("em",[e._v("å¼€å§‹")]),e._v(" ä»¥ "),a("code",[e._v("#")]),e._v(" ä½œä¸ºæ³¨é‡Šï¼Œé™¤éè¯¥è¡Œæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ "),a("a",{attrs:{href:"#parser-directives"}},[e._v("è§£æå™¨æŒ‡ä»¤")]),e._v(" ã€‚ "),a("code",[e._v("#")]),e._v(" ä¸€è¡Œä¸­å…¶ä»–ä»»ä½•åœ°æ–¹ çš„ æ ‡è®°éƒ½è¢«è§†ä¸ºå‚æ•°ã€‚ è¿™å…è®¸å¦‚ä¸‹è¯­å¥ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Comment\nRUN echo 'we are running some # of cool things'\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("åœ¨æ‰§è¡ŒDockerfileæŒ‡ä»¤ä¹‹å‰åˆ é™¤æ³¨é‡Šè¡Œï¼Œè¿™æ„å‘³ç€ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„æ³¨é‡Šä¸ä¼šç”±æ‰§è¡Œ "),a("code",[e._v("echo")]),e._v(" å‘½ä»¤ çš„Shellå¤„ç† ï¼Œå¹¶ä¸”ä»¥ä¸‹ä¸¤ä¸ªç¤ºä¾‹æ˜¯ç­‰æ•ˆçš„ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("RUN echo hello \\\n# comment\nworld\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("RUN echo hello \\\nworld\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("æ³¨é‡Šä¸­ä¸æ”¯æŒæ¢è¡Œç¬¦ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„ç©ºç™½")])]),e._v(" "),a("p",[e._v("ä¸ºäº†å‘åå…¼å®¹ï¼Œ å°†å¿½ç•¥ä½†ä¸é¼“åŠ± åœ¨æ³¨é‡Šï¼ˆ "),a("code",[e._v("#")]),e._v(" ï¼‰å’ŒæŒ‡ä»¤ï¼ˆä¾‹å¦‚ "),a("code",[e._v("RUN")]),e._v(" ï¼‰ ä¹‹å‰çš„å‰å¯¼ç©ºç™½ ã€‚ åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä¸ä¿ç•™å‰å¯¼ç©ºæ ¼ï¼Œå› æ­¤ä»¥ä¸‹ç¤ºä¾‹æ˜¯ç­‰æ•ˆçš„ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("        # this is a comment-line\n    RUN echo hello\nRUN echo world\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# this is a comment-line\nRUN echo hello\nRUN echo world\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("ä½†æ˜¯è¯·æ³¨æ„ï¼ŒæŒ‡ä»¤ "),a("em",[e._v("å‚æ•°")]),e._v(" ä¸­çš„ç©ºæ ¼ ï¼ˆä¾‹å¦‚è·Ÿéšå…¶åçš„å‘½ä»¤ "),a("code",[e._v("RUN")]),e._v(" ï¼‰è¢«ä¿ç•™ï¼Œå› æ­¤ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨æŒ‡å®šçš„å‰å¯¼ç©ºæ ¼æ‰“å°â€œ hello worldâ€ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('RUN echo "\\\n     hello\\\n     world"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])])]),e._v(" "),a("h2",{attrs:{id:"è§£æå™¨æŒ‡ä»¤-ğŸ”—"}},[e._v("è§£æå™¨æŒ‡ä»¤ "),a("a",{attrs:{href:"#parser-directives"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("è§£æå™¨æŒ‡ä»¤æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”ä¼šå½±å“ "),a("code",[e._v("Dockerfile")]),e._v(" å¤„ç† a ä¸­ åç»­è¡Œçš„ æ–¹å¼ã€‚ è§£æå™¨æŒ‡ä»¤ä¸ä¼šåœ¨æ„å»ºä¸­æ·»åŠ å±‚ï¼Œä¹Ÿä¸ä¼šæ˜¾ç¤ºä¸ºæ„å»ºæ­¥éª¤ã€‚ è§£æå™¨æŒ‡ä»¤ä»¥å½¢å¼å†™ä¸ºç‰¹æ®Šç±»å‹çš„æ³¨é‡Š "),a("code",[e._v("# directive=value")]),e._v(" ã€‚ å•ä¸ªæŒ‡ä»¤åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚")]),e._v(" "),a("p",[e._v("å¤„ç†å®Œæ³¨é‡Šï¼Œç©ºè¡Œæˆ–ç”Ÿæˆå™¨æŒ‡ä»¤åï¼ŒDockerä¸å†å¯»æ‰¾è§£æå™¨æŒ‡ä»¤ã€‚ è€Œæ˜¯å°†æ ¼å¼åŒ–ä¸ºè§£æå™¨æŒ‡ä»¤çš„ä»»ä½•å†…å®¹éƒ½è§†ä¸ºæ³¨é‡Šï¼Œå¹¶ä¸”ä¸ä¼šå°è¯•éªŒè¯å®ƒæ˜¯å¦å¯èƒ½æ˜¯è§£æå™¨æŒ‡ä»¤ã€‚ å› æ­¤ï¼Œæ‰€æœ‰è§£æå™¨æŒ‡ä»¤å¿…é¡»ä½äºçš„æœ€é¡¶éƒ¨ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è§£æå™¨æŒ‡ä»¤ä¸åŒºåˆ†å¤§å°å†™ã€‚ ä½†æ˜¯ï¼Œçº¦å®šæ˜¯å°å†™çš„ã€‚ çº¦å®šè¿˜åº”åœ¨ä»»ä½•è§£æå™¨æŒ‡ä»¤ä¹‹ååŒ…å«ä¸€ä¸ªç©ºç™½è¡Œã€‚ è§£æå™¨ä¼ªæŒ‡ä»¤ä¸æ”¯æŒè¡Œç»§ç»­å­—ç¬¦ã€‚")]),e._v(" "),a("p",[e._v("ç”±äºè¿™äº›è§„åˆ™ï¼Œä»¥ä¸‹ç¤ºä¾‹å‡æ— æ•ˆï¼š")]),e._v(" "),a("p",[e._v("ç”±äºè¡Œç»§ç»­è€Œæ— æ•ˆï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# direc \\\ntive=value\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("ç”±äºå‡ºç°ä¸¤æ¬¡è€Œæ— æ•ˆï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# directive=value1\n# directive=value2\n\nFROM ImageName\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("ç”±äºå‡ºç°åœ¨æ„å»ºå™¨æŒ‡ä»¤ä¹‹åè€Œè¢«è§†ä¸ºæ³¨é‡Šï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ImageName\n# directive=value\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("ç”±äºå‡ºç°åœ¨ä¸æ˜¯è§£æå™¨æŒ‡ä»¤çš„æ³¨é‡Šä¹‹åï¼Œå› æ­¤è¢«è§†ä¸ºæ³¨é‡Šï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# About my dockerfile\n# directive=value\nFROM ImageName\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("ç”±äºæœªè¢«è¯†åˆ«ï¼ŒæœªçŸ¥æŒ‡ä»¤è¢«è§†ä¸ºæ³¨é‡Šã€‚ æ­¤å¤–ï¼Œç”±äºåœ¨éè§£æç¨‹åºæŒ‡ä»¤çš„æ³¨é‡Šä¹‹åå‡ºç°ï¼Œå› æ­¤å·²çŸ¥æŒ‡ä»¤è¢«è§†ä¸ºæ³¨é‡Šã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# unknowndirective=value\n# knowndirective=value\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("è§£æå™¨æŒ‡ä»¤ä¸­å…è®¸éæ¢è¡Œç©ºæ ¼ã€‚ å› æ­¤ï¼Œä»¥ä¸‹å„è¡Œå‡è¢«ç›¸åŒå¯¹å¾…ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#directive=value\n# directive =value\n#\tdirective= value\n# directive = value\n#\t  dIrEcTiVe=value\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("æ”¯æŒä»¥ä¸‹è§£æå™¨æŒ‡ä»¤ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("syntax")])]),e._v(" "),a("li",[a("code",[e._v("escape")])])]),e._v(" "),a("h2",{attrs:{id:"è¯­æ³•-ğŸ”—"}},[e._v("è¯­æ³• "),a("a",{attrs:{href:"#syntax"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# syntax=[remote image reference]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# syntax=docker/dockerfile\n# syntax=docker/dockerfile:1.0\n# syntax=docker.io/docker/dockerfile:1\n# syntax=docker/dockerfile:1.0.0-experimental\n# syntax=example.com/user/repo:tag@sha256:abcdef...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("ä»…å½“ä½¿ç”¨ "),a("a",{attrs:{href:"#buildkit"}},[e._v("BuildKit")]),e._v(" åç«¯ æ—¶æ‰å¯ç”¨æ­¤åŠŸèƒ½ ã€‚")]),e._v(" "),a("p",[e._v("è¯­æ³•æŒ‡ä»¤å®šä¹‰ç”¨äºæ„å»ºå½“å‰Dockerfileçš„Dockerfileæ„å»ºå™¨çš„ä½ç½®ã€‚ BuildKitåç«¯å…è®¸æ— ç¼ä½¿ç”¨æ„å»ºå™¨çš„å¤–éƒ¨å®ç°ï¼Œè¿™äº›æ„å»ºå™¨ä»¥Dockeræ˜ åƒçš„å½¢å¼åˆ†å‘å¹¶åœ¨å®¹å™¨æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡Œã€‚")]),e._v(" "),a("p",[e._v("è‡ªå®šä¹‰Dockerfileå®ç°ä½¿æ‚¨èƒ½å¤Ÿï¼š")]),e._v(" "),a("ul",[a("li",[e._v("è‡ªåŠ¨è·å–é”™è¯¯ä¿®æ­£ï¼Œæ— éœ€æ›´æ–°å®ˆæŠ¤ç¨‹åº")]),e._v(" "),a("li",[e._v("ç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½ä½¿ç”¨ç›¸åŒçš„å®ç°æ¥æ„å»ºæ‚¨çš„Dockerfile")]),e._v(" "),a("li",[e._v("ä½¿ç”¨æœ€æ–°åŠŸèƒ½è€Œä¸æ›´æ–°å®ˆæŠ¤ç¨‹åº")]),e._v(" "),a("li",[e._v("è¯•ç”¨æ–°çš„å®éªŒæ€§æˆ–ç¬¬ä¸‰æ–¹åŠŸèƒ½")])]),e._v(" "),a("h3",{attrs:{id:"å®˜æ–¹å‘å¸ƒ-ğŸ”—"}},[e._v("å®˜æ–¹å‘å¸ƒ "),a("a",{attrs:{href:"#official-releases"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("Dockeråˆ†å‘æ˜ åƒçš„æ­£å¼ç‰ˆæœ¬ï¼Œè¿™äº›æ˜ åƒå¯ç”¨äº "),a("code",[e._v("docker/dockerfile")]),e._v(" åœ¨Docker Hubä¸Šçš„å­˜å‚¨åº“ ä¸‹æ„å»ºDockerfile ã€‚ æœ‰ä¸¤ä¸ªå‘å¸ƒæ–°å›¾åƒçš„æ¸ é“ï¼šç¨³å®šç‰ˆå’Œå®éªŒç‰ˆã€‚")]),e._v(" "),a("p",[e._v("ç¨³å®šçš„é€šé“éµå¾ªè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶ã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("docker/dockerfile:1.0.0")]),e._v(" -ä»…å…è®¸ä¸å¯å˜ç‰ˆæœ¬ "),a("code",[e._v("1.0.0")])]),e._v(" "),a("li",[a("code",[e._v("docker/dockerfile:1.0")]),e._v(" -å…è®¸ç‰ˆæœ¬ "),a("code",[e._v("1.0.*")])]),e._v(" "),a("li",[a("code",[e._v("docker/dockerfile:1")]),e._v(" -å…è®¸ç‰ˆæœ¬ "),a("code",[e._v("1.*.*")])]),e._v(" "),a("li",[a("code",[e._v("docker/dockerfile:latest")]),e._v(" -ç¨³å®šé¢‘é“ä¸Šçš„æœ€æ–°ç‰ˆæœ¬")])]),e._v(" "),a("p",[e._v("åœ¨å‘å¸ƒæ—¶ï¼Œå®éªŒé¢‘é“ä½¿ç”¨ç¨³å®šç‰ˆæœ¬ä¸­ä¸»è¦å’Œæ¬¡è¦ç»„ä»¶çš„å¢é‡ç‰ˆæœ¬æ§åˆ¶ã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("docker/dockerfile:1.0.1-experimental")]),e._v(" -ä»…å…è®¸ä¸å¯å˜ç‰ˆæœ¬ "),a("code",[e._v("1.0.1-experimental")])]),e._v(" "),a("li",[a("code",[e._v("docker/dockerfile:1.0-experimental")]),e._v(" -ä¹‹åçš„æœ€æ–°å®éªŒç‰ˆæœ¬ "),a("code",[e._v("1.0")])]),e._v(" "),a("li",[a("code",[e._v("docker/dockerfile:experimental")]),e._v(" -å®éªŒé¢‘é“çš„æœ€æ–°ç‰ˆæœ¬")])]),e._v(" "),a("p",[e._v("æ‚¨åº”è¯¥é€‰æ‹©æœ€é€‚åˆè‡ªå·±éœ€æ±‚çš„æ¸ é“ã€‚ å¦‚æœæ‚¨åªæƒ³ä¿®æ­£é”™è¯¯ï¼Œåˆ™åº”ä½¿ç”¨ "),a("code",[e._v("docker/dockerfile:1.0")]),e._v(" ã€‚ å¦‚æœæ‚¨æƒ³ä»å®éªŒåŠŸèƒ½ä¸­å—ç›Šï¼Œåˆ™åº”ä½¿ç”¨å®éªŒé¢‘é“ã€‚ å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨å®éªŒæ€§é¢‘é“ï¼Œåˆ™è¾ƒæ–°çš„ç‰ˆæœ¬å¯èƒ½æ— æ³•å‘åå…¼å®¹ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨ä¸å¯å˜çš„å®Œæ•´ç‰ˆæœ¬ã€‚")]),e._v(" "),a("p",[e._v("æœ‰å…³ä¸»ç‰ˆæœ¬å’Œæ¯æ™šå‘å¸ƒçš„åŠŸèƒ½ï¼Œè¯·å‚è€ƒ "),a("a",{attrs:{href:"https://github.com/moby/buildkit/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("æºå­˜å‚¨åº“ä¸­"),a("OutboundLink")],1),e._v(" çš„æè¿° ã€‚")]),e._v(" "),a("h2",{attrs:{id:"é€ƒè„±-ğŸ”—"}},[e._v("é€ƒè„± "),a("a",{attrs:{href:"#escape"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# escape=\\ (backslash)\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦ä¹ˆ")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# escape=` (backtick)\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("escape")]),e._v(" æŒ‡ä»¤è®¾ç½®ç”¨æ¥é€ƒé¿çš„å­—ç¬¦çš„å­—ç¬¦ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤è½¬ä¹‰å­—ç¬¦ä¸º "),a("code",[e._v("\\")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è½¬ä¹‰å­—ç¬¦ç”¨äºè½¬ä¹‰ä¸€è¡Œä¸­çš„å­—ç¬¦å’Œè½¬ä¹‰æ¢è¡Œç¬¦ã€‚ è¿™å…è®¸ä¸€æ¡ "),a("code",[e._v("Dockerfile")]),e._v(" æŒ‡ä»¤è·¨è¶Šå¤šè¡Œã€‚ è¯·æ³¨æ„ï¼Œæ— è®º "),a("code",[e._v("escape")]),e._v(" parseræŒ‡ä»¤æ˜¯å¦åŒ…å«åœ¨ "),a("code",[e._v("Dockerfile")]),e._v(" ï¼Œ "),a("em",[e._v("éƒ½ä¸ä¼šåœ¨"),a("code",[e._v("RUN")]),e._v("å‘½ä»¤ä¸­æ‰§è¡Œè½¬ä¹‰ï¼Œé™¤éåœ¨è¡Œæœ«ã€‚")])]),e._v(" "),a("p",[e._v("å°†è½¬ä¹‰ç¬¦è®¾ç½® "),a("code",[e._v("`")]),e._v(" ä¸ºå°¤å…¶æœ‰ç”¨ "),a("code",[e._v("Windows")]),e._v(" ï¼Œå…¶ä¸­ "),a("code",[e._v("\\")]),e._v(" ç›®å½•è·¯å¾„åˆ†éš”ç¬¦ä¸ºã€‚ "),a("code",[e._v("`")]),e._v(" ä¸ "),a("a",{attrs:{href:"https://technet.microsoft.com/en-us/library/hh847755.aspx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Windows PowerShell"),a("OutboundLink")],1),e._v(" ä¸€è‡´ ã€‚")]),e._v(" "),a("p",[e._v("è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼Œè¯¥ç¤ºä¾‹å°†ä»¥éæ˜¾è€Œæ˜“è§çš„æ–¹å¼å¤±è´¥ "),a("code",[e._v("Windows")]),e._v(" ã€‚ ç¬¬äºŒ "),a("code",[e._v("\\")]),e._v(" ï¼Œåœ¨ç¬¬äºŒè¡Œçš„ç«¯éƒ¨å°†è¢«è§£é‡Šä¸ºç”¨äºæ¢è¡Œçš„é€ƒé€¸ï¼Œè€Œä¸æ˜¯ä»ç¬¬ä¸€é€¸å‡ºçš„ç›®æ ‡ "),a("code",[e._v("\\")]),e._v(" ã€‚ ç±»ä¼¼åœ°ï¼Œ "),a("code",[e._v("\\")]),e._v(" å‡è®¾ç¬¬ä¸‰è¡Œçš„æœ«å°¾å®é™…ä¸Šè¢«å½“ä½œä¸€æ¡æŒ‡ä»¤æ¥å¤„ç†ï¼Œåˆ™å°†å…¶è§†ä¸ºè¡Œçš„ç»§ç»­ã€‚ è¯¥dockerfileçš„ç»“æœæ˜¯ç¬¬äºŒå’Œç¬¬ä¸‰è¡Œè¢«è§†ä¸ºä¸€æ¡æŒ‡ä»¤ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM microsoft/nanoserver\nCOPY testfile.txt c:\\\\\nRUN dir c:\\\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("ç»“æœæ˜¯ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("PS C:\\John> docker build -t cmd .\nSending build context to Docker daemon 3.072 kB\nStep 1/2 : FROM microsoft/nanoserver\n ---\x3e 22738ff49c6d\nStep 2/2 : COPY testfile.txt c:\\RUN dir c:\nGetFileAttributesEx c:RUN: The system cannot find the file specified.\nPS C:\\John>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("ä¸Šè¿°è§£å†³æ–¹æ¡ˆä¹‹ä¸€æ˜¯å°† å’Œå’Œ "),a("code",[e._v("/")]),e._v(" ç”¨ä½œç›®æ ‡ ã€‚ ä½†æ˜¯ï¼Œè¿™ç§è¯­æ³•å……å…¶é‡æ˜¯ä»¤äººå›°æƒ‘çš„ï¼Œå› ä¸ºå®ƒå¯¹ä¸Šçš„è·¯å¾„æ¥è¯´å¹¶ä¸è‡ªç„¶ ï¼Œè€Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œç”±äºå¹¶éæ‰€æœ‰ æ”¯æŒçš„ å‘½ä»¤éƒ½ ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ ï¼Œå› æ­¤å®¹æ˜“å‡ºé”™ ã€‚ "),a("code",[e._v("COPY")]),e._v(" "),a("code",[e._v("dir")]),e._v(" "),a("code",[e._v("Windows")]),e._v(" "),a("code",[e._v("Windows")]),e._v(" "),a("code",[e._v("/")])]),e._v(" "),a("p",[e._v("é€šè¿‡æ·»åŠ  "),a("code",[e._v("escape")]),e._v(" è§£æå™¨æŒ‡ä»¤ï¼Œé€šè¿‡å¯¹ä»¥ä¸‹ "),a("code",[e._v("Dockerfile")]),e._v(" æ–‡ä»¶è·¯å¾„ä½¿ç”¨è‡ªç„¶å¹³å°è¯­ä¹‰ ï¼Œä»¥ä¸‹æ“ä½œå¯ä»¥ æŒ‰é¢„æœŸæˆåŠŸ "),a("code",[e._v("Windows")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# escape=`\n\nFROM microsoft/nanoserver\nCOPY testfile.txt c:\\\nRUN dir c:\\\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("ç»“æœæ˜¯ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("PS C:\\John> docker build -t succeeds --no-cache=true .\nSending build context to Docker daemon 3.072 kB\nStep 1/3 : FROM microsoft/nanoserver\n ---\x3e 22738ff49c6d\nStep 2/3 : COPY testfile.txt c:\\\n ---\x3e 96655de338de\nRemoving intermediate container 4db9acbb1682\nStep 3/3 : RUN dir c:\\\n ---\x3e Running in a2c157f842f5\n Volume in drive C has no label.\n Volume Serial Number is 7E6D-E0F7\n\n Directory of c:\\\n\n10/05/2016  05:04 PM             1,894 License.txt\n10/05/2016  02:22 PM    <DIR>          Program Files\n10/05/2016  02:14 PM    <DIR>          Program Files (x86)\n10/28/2016  11:18 AM                62 testfile.txt\n10/28/2016  11:20 AM    <DIR>          Users\n10/28/2016  11:20 AM    <DIR>          Windows\n           2 File(s)          1,956 bytes\n           4 Dir(s)  21,259,096,064 bytes free\n ---\x3e 01c7f3bef04f\nRemoving intermediate container a2c157f842f5\nSuccessfully built 01c7f3bef04f\nPS C:\\John>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br")])]),a("h2",{attrs:{id:"æ›´æ¢ç¯å¢ƒ-ğŸ”—"}},[e._v("æ›´æ¢ç¯å¢ƒ "),a("a",{attrs:{href:"#environment-replacement"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("ç¯å¢ƒå˜é‡ï¼ˆä¸å£°æ˜ "),a("a",{attrs:{href:"#env"}},[e._v("çš„ "),a("code",[e._v("ENV")]),e._v(" å£°æ˜")]),e._v(" ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç‰¹å®šæŒ‡ä»¤ä½œä¸ºå˜é‡ç”¨æ¥è¢«è§£é‡Š "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ è½¬ä¹‰ä¹Ÿå¯ä»¥é€šè¿‡å°†ç±»å˜é‡çš„è¯­æ³•åŒ…æ‹¬åœ¨è¯­å¥ä¸­è€Œå¾—åˆ°å¤„ç†ã€‚")]),e._v(" "),a("p",[e._v("ç¯å¢ƒå˜é‡ "),a("code",[e._v("Dockerfile")]),e._v(" ç”¨ "),a("code",[e._v("$variable_name")]),e._v(" æˆ–è¡¨ç¤º "),a("code",[e._v("${variable_name}")]),e._v(" ã€‚ å®ƒä»¬è¢«åŒç­‰å¯¹å¾…ï¼Œå¹¶ä¸”å¤§æ‹¬å·è¯­æ³•é€šå¸¸ç”¨äºè§£å†³å˜é‡åæ²¡æœ‰ç©ºæ ¼çš„é—®é¢˜ï¼Œä¾‹å¦‚ "),a("code",[e._v("${foo}_bar")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("${variable_name}")]),e._v(" è¯­æ³•è¿˜æ”¯æŒä»¥ä¸‹ä¸€äº›æ ‡å‡† "),a("code",[e._v("bash")]),e._v(" ä¿®é¥°ç¬¦ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("${variable:-word}")]),e._v(" è¡¨ç¤ºå¦‚æœ "),a("code",[e._v("variable")]),e._v(" è®¾ç½®ï¼Œåˆ™ç»“æœå°†æ˜¯è¯¥å€¼ã€‚ å¦‚æœ "),a("code",[e._v("variable")]),e._v(" æœªè®¾ç½®ï¼Œåˆ™ä¸º "),a("code",[e._v("word")]),e._v(" ç»“æœã€‚")]),e._v(" "),a("li",[a("code",[e._v("${variable:+word}")]),e._v(" æŒ‡ç¤ºå¦‚æœ "),a("code",[e._v("variable")]),e._v(" è®¾ç½® äº†ifï¼Œåˆ™å°† æ˜¯ "),a("code",[e._v("word")]),e._v(" ç»“æœï¼Œå¦åˆ™ç»“æœä¸ºç©ºå­—ç¬¦ä¸²ã€‚")])]),e._v(" "),a("p",[e._v("åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œ "),a("code",[e._v("word")]),e._v(" éƒ½å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬å…¶ä»–ç¯å¢ƒå˜é‡ã€‚")]),e._v(" "),a("p",[e._v("å¯é€šè¿‡ "),a("code",[e._v("\\")]),e._v(" åœ¨å˜é‡å‰ æ·»åŠ aæ¥ è¿›è¡Œ è½¬ä¹‰ ï¼š ä¾‹å¦‚ï¼Œ "),a("code",[e._v("\\$foo")]),e._v(" æˆ– "),a("code",[e._v("\\${foo}")]),e._v(" å°† åˆ†åˆ« è½¬æ¢ä¸º "),a("code",[e._v("$foo")]),e._v(" å’Œ "),a("code",[e._v("${foo}")]),e._v(" æ–‡å­—ã€‚")]),e._v(" "),a("p",[e._v("ç¤ºä¾‹ï¼ˆè§£æçš„è¡¨ç¤ºå½¢å¼æ˜¾ç¤ºåœ¨ä¹‹å "),a("code",[e._v("#")]),e._v(" ï¼‰ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM busybox\nENV foo /bar\nWORKDIR ${foo}   # WORKDIR /bar\nADD . $foo       # ADD . /bar\nCOPY \\$foo /quux # COPY $foo /quux\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("ä»¥ä¸‹å˜é‡ä¸­çš„æŒ‡ä»¤åˆ—è¡¨æ”¯æŒç¯å¢ƒå˜é‡ "),a("code",[e._v("Dockerfile")]),e._v(" ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ADD")])]),e._v(" "),a("li",[a("code",[e._v("COPY")])]),e._v(" "),a("li",[a("code",[e._v("ENV")])]),e._v(" "),a("li",[a("code",[e._v("EXPOSE")])]),e._v(" "),a("li",[a("code",[e._v("FROM")])]),e._v(" "),a("li",[a("code",[e._v("LABEL")])]),e._v(" "),a("li",[a("code",[e._v("STOPSIGNAL")])]),e._v(" "),a("li",[a("code",[e._v("USER")])]),e._v(" "),a("li",[a("code",[e._v("VOLUME")])]),e._v(" "),a("li",[a("code",[e._v("WORKDIR")])]),e._v(" "),a("li",[a("code",[e._v("ONBUILD")]),e._v(" ï¼ˆå½“ä¸ä»¥ä¸Šæ”¯æŒçš„è¯´æ˜ä¹‹ä¸€ç»“åˆä½¿ç”¨æ—¶ï¼‰")])]),e._v(" "),a("p",[e._v("åœ¨æ•´ä¸ªæŒ‡ä»¤ä¸­ï¼Œç¯å¢ƒå˜é‡æ›¿æ¢å°†å¯¹æ¯ä¸ªå˜é‡ä½¿ç”¨ç›¸åŒçš„å€¼ã€‚ æ¢å¥è¯è¯´ï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ENV abc=hello\nENV abc=bye def=$abc\nENV ghi=$abc\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("å°†å¯¼è‡´ "),a("code",[e._v("def")]),e._v(" å€¼ä¸º "),a("code",[e._v("hello")]),e._v(" ï¼Œè€Œä¸æ˜¯ "),a("code",[e._v("bye")]),e._v(" ã€‚ ä½†æ˜¯ï¼Œ "),a("code",[e._v("ghi")]),e._v(" å°†å…·æœ‰çš„å€¼ï¼Œ "),a("code",[e._v("bye")]),e._v(" å› ä¸ºå®ƒä¸æ˜¯è®¾ç½® "),a("code",[e._v("abc")]),e._v(" ä¸º çš„åŒä¸€æŒ‡ä»¤çš„ä¸€éƒ¨åˆ† "),a("code",[e._v("bye")]),e._v(" ã€‚")]),e._v(" "),a("h2",{attrs:{id:"dockerignoreæ–‡ä»¶-ğŸ”—"}},[e._v(".dockerignoreæ–‡ä»¶ "),a("a",{attrs:{href:"#dockerignore-file"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("åœ¨docker CLIå°†ä¸Šä¸‹æ–‡å‘é€åˆ°dockerå®ˆæŠ¤ç¨‹åºä¹‹å‰ï¼Œå®ƒä¼š "),a("code",[e._v(".dockerignore")]),e._v(" åœ¨ä¸Šä¸‹æ–‡çš„æ ¹ç›®å½•ä¸­ æŸ¥æ‰¾åä¸ºçš„æ–‡ä»¶ ã€‚ å¦‚æœæ­¤æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™CLIä¼šä¿®æ”¹ä¸Šä¸‹æ–‡ä»¥æ’é™¤ä¸å…¶ä¸­çš„æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶å’Œç›®å½•ã€‚ è¿™æœ‰åŠ©äºé¿å…ä¸å¿…è¦åœ°å°†å¤§å‹æ–‡ä»¶æˆ–æ•æ„Ÿæ–‡ä»¶å’Œç›®å½•å‘é€åˆ°å®ˆæŠ¤ç¨‹åºï¼Œå¹¶é¿å…ä½¿ç”¨ "),a("code",[e._v("ADD")]),e._v(" æˆ– å°†å®ƒä»¬æ·»åŠ åˆ°æ˜ åƒä¸­ "),a("code",[e._v("COPY")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("CLIå°† "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶ è§£é‡Š ä¸ºä»¥æ¢è¡Œç¬¦åˆ†éš”çš„æ¨¡å¼åˆ—è¡¨ï¼Œç±»ä¼¼äºUnix Shellçš„æ–‡ä»¶ç»„ã€‚ ä¸ºäº†åŒ¹é…ï¼Œä¸Šä¸‹æ–‡çš„æ ¹è¢«è®¤ä¸ºæ˜¯å·¥ä½œç›®å½•å’Œæ ¹ç›®å½•ã€‚ ä¾‹å¦‚ï¼Œå›¾æ¡ˆ "),a("code",[e._v("/foo/bar")]),e._v(" å’Œ "),a("code",[e._v("foo/bar")]),e._v(" ä¸¤ä¸ªæ’é™¤å‘½åçš„æ–‡ä»¶æˆ–ç›®å½• "),a("code",[e._v("bar")]),e._v(" çš„ "),a("code",[e._v("foo")]),e._v(" å­ç›®å½• "),a("code",[e._v("PATH")]),e._v(" æˆ–ä½äºGitä»“åº“çš„æ ¹ "),a("code",[e._v("URL")]),e._v(" ã€‚ éƒ½ä¸æ’é™¤å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœ "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶ä¸­ çš„ä¸€è¡Œä»¥ç¬¬ "),a("code",[e._v("#")]),e._v(" 1åˆ— å¼€å¤´ ï¼Œåˆ™è¯¥è¡Œå°†è¢«è§†ä¸ºæ³¨é‡Šï¼Œå¹¶ä¸”åœ¨CLIè§£é‡Šä¹‹å‰å°†è¢«å¿½ç•¥ã€‚")]),e._v(" "),a("p",[e._v("è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶ï¼š")]),e._v(" "),a("div",{staticClass:"language-gitignore line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# comment\n*/temp*\n*/*/temp*\ntemp?\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("æ­¤æ–‡ä»¶å¯¼è‡´ä»¥ä¸‹ç”Ÿæˆè¡Œä¸ºï¼š")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("è§„åˆ™")]),e._v(" "),a("th",[e._v("è¡Œä¸º")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("code",[e._v("# comment")])]),e._v(" "),a("td",[e._v("å¿½ç•¥äº†ã€‚")])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("*/temp*")])]),e._v(" "),a("td",[e._v("æ’é™¤åç§°ä»¥ "),a("code",[e._v("temp")]),e._v(" æ ¹çš„ä»»ä½•ç›´æ¥å­ç›®å½• å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½• ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("/somedir/temporary.txt")]),e._v(" æ’é™¤ çº¯æ–‡ä»¶ ï¼Œæ’é™¤ç›®å½• "),a("code",[e._v("/somedir/temp")]),e._v(" ã€‚")])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("*/*/temp*")])]),e._v(" "),a("td",[e._v("æ’é™¤ "),a("code",[e._v("temp")]),e._v(" ä»æ ¹ä»¥ä¸‹ä¸¤ä¸ªçº§åˆ«çš„ä»»ä½•å­ç›®å½• å¼€å§‹çš„æ–‡ä»¶å’Œç›®å½• ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("/somedir/subdir/temporary.txt")]),e._v(" è¢«æ’é™¤ã€‚")])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("temp?")])]),e._v(" "),a("td",[e._v("æ’é™¤åç§°ä¸ºçš„ä¸€ä¸ªå­—ç¬¦æ‰©å±•åçš„æ ¹ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½• "),a("code",[e._v("temp")]),e._v(" ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("/tempa")]),e._v(" å’Œ "),a("code",[e._v("/tempb")]),e._v(" è¢«æ’é™¤ã€‚")])])])]),e._v(" "),a("p",[e._v("ä½¿ç”¨Goçš„ "),a("a",{attrs:{href:"http://golang.org/pkg/path/filepath#Match",target:"_blank",rel:"noopener noreferrer"}},[e._v("filepath.Match"),a("OutboundLink")],1),e._v(" è§„åˆ™ è¿›è¡ŒåŒ¹é… ã€‚ é¢„å¤„ç†æ­¥éª¤ ä½¿ç”¨Goçš„ "),a("a",{attrs:{href:"http://golang.org/pkg/path/filepath/#Clean",target:"_blank",rel:"noopener noreferrer"}},[e._v("filepath.Clean"),a("OutboundLink")],1),e._v(" é™¤å»å¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼ï¼Œå¹¶æ¶ˆé™¤ "),a("code",[e._v(".")]),e._v(" å’Œ "),a("code",[e._v("..")]),e._v(" å…ƒç´  ã€‚ é¢„å¤„ç†åç©ºç™½çš„è¡Œå°†è¢«å¿½ç•¥ã€‚"),a("a",{attrs:{href:"http://golang.org/pkg/path/filepath/#Clean",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("é™¤äº†Goçš„filepath.Matchè§„åˆ™å¤–ï¼ŒDockerè¿˜æ”¯æŒä¸€ä¸ªç‰¹æ®Šçš„é€šé…ç¬¦å­—ç¬¦ä¸² "),a("code",[e._v("**")]),e._v(" ï¼Œè¯¥ å­—ç¬¦ä¸² å¯åŒ¹é…ä»»æ„æ•°é‡çš„ç›®å½•ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("**/*.go")]),e._v(" å°†æ’é™¤ "),a("code",[e._v(".go")]),e._v(" åœ¨æ‰€æœ‰ç›®å½•ï¼ˆåŒ…æ‹¬æ„å»ºä¸Šä¸‹æ–‡çš„æ ¹ç›®å½•ï¼‰ä¸­æ‰¾åˆ°çš„æ‰€æœ‰ ç»“å°¾çš„æ–‡ä»¶ ã€‚")]),e._v(" "),a("p",[e._v("ä»¥ "),a("code",[e._v("!")]),e._v(" ï¼ˆæ„Ÿå¹å·ï¼‰ å¼€å¤´çš„è¡Œ å¯ç”¨äºæ’é™¤ä¾‹å¤–ã€‚ ä»¥ä¸‹æ˜¯ "),a("code",[e._v(".dockerignore")]),e._v(" ä½¿ç”¨æ­¤æœºåˆ¶ çš„ç¤ºä¾‹ æ–‡ä»¶ï¼š")]),e._v(" "),a("div",{staticClass:"language-gitignore line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("*.md\n!README.md\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[a("em",[e._v("é™¤")]),e._v(" "),a("code",[e._v("README.md")]),e._v(" ä¸Šä¸‹æ–‡"),a("em",[e._v("å¤–")]),e._v(" ï¼Œ æ‰€æœ‰é™ä»·æ–‡ä»¶ éƒ½æ’é™¤åœ¨å¤–ã€‚")]),e._v(" "),a("p",[a("code",[e._v("!")]),e._v(" å¼‚å¸¸è§„åˆ™ çš„ä½ç½®ä¼š å½±å“è¡Œä¸ºï¼š "),a("code",[e._v(".dockerignore")]),e._v(" åŒ¹é…ç‰¹å®šæ–‡ä»¶çš„ çš„æœ€åä¸€è¡Œ ç¡®å®šæ˜¯åŒ…å«è¿˜æ˜¯æ’é™¤è¯¥æ–‡ä»¶ã€‚ è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š")]),e._v(" "),a("div",{staticClass:"language-gitignore line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("*.md\n!README*.md\nREADME-secret.md\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("é™¤äº†ä»¥å¤–çš„è‡ªè¿°æ–‡ä»¶ï¼Œä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰markdownæ–‡ä»¶ "),a("code",[e._v("README-secret.md")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ç°åœ¨è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š")]),e._v(" "),a("div",{staticClass:"language-gitignore line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("*.md\nREADME-secret.md\n!README*.md\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("åŒ…æ‹¬æ‰€æœ‰è‡ªè¿°æ–‡ä»¶ã€‚ ä¸­çº¿æ— æ•ˆï¼Œå› ä¸º "),a("code",[e._v("!README*.md")]),e._v(" åŒ¹é… "),a("code",[e._v("README-secret.md")]),e._v(" å¹¶æ’åœ¨æœ€åã€‚")]),e._v(" "),a("p",[e._v("æ‚¨ç”šè‡³å¯ä»¥ä½¿ç”¨è¯¥ "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶æ’é™¤ "),a("code",[e._v("Dockerfile")]),e._v(" å’Œ "),a("code",[e._v(".dockerignore")]),e._v(" æ–‡ä»¶ã€‚ è¿™äº›æ–‡ä»¶ä»è¢«å‘é€åˆ°å®ˆæŠ¤ç¨‹åºï¼Œå› ä¸ºå®ƒéœ€è¦å®ƒä»¬æ¥å®Œæˆå…¶å·¥ä½œã€‚ ä½†æ˜¯ "),a("code",[e._v("ADD")]),e._v(" å’Œ "),a("code",[e._v("COPY")]),e._v(" æŒ‡ä»¤ä¸ä¼šå°†å®ƒä»¬å¤åˆ¶åˆ°æ˜ åƒä¸­ã€‚")]),e._v(" "),a("p",[e._v("æœ€åï¼Œæ‚¨å¯èƒ½æƒ³è¦æŒ‡å®šè¦åŒ…å«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯è¦æ’é™¤çš„æ–‡ä»¶ã€‚ ä¸ºæ­¤ï¼Œè¯·æŒ‡å®š "),a("code",[e._v("*")]),e._v(" ä¸ºç¬¬ä¸€ä¸ªæ¨¡å¼ï¼Œç„¶å æŒ‡å®š ä¸€ä¸ªæˆ–å¤šä¸ª "),a("code",[e._v("!")]),e._v(" å¼‚å¸¸æ¨¡å¼ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("ç”±äºå†å²åŸå› ï¼Œè¯¥æ¨¡å¼ "),a("code",[e._v(".")]),e._v(" è¢«å¿½ç•¥ã€‚")])]),e._v(" "),a("h2",{attrs:{id:"æ¥è‡ª-ğŸ”—"}},[e._v("æ¥è‡ª "),a("a",{attrs:{href:"#from"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM [--platform=<platform>] <image> [AS <name>]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦ä¹ˆ")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM [--platform=<platform>] <image>[:<tag>] [AS <name>]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦ä¹ˆ")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM [--platform=<platform>] <image>[@<digest>] [AS <name>]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µï¼Œå¹¶ ä¸ºåç»­æŒ‡ä»¤ è®¾ç½® "),a("a",{attrs:{href:"https://docs.docker.com/glossary/#base_image",target:"_blank",rel:"noopener noreferrer"}},[a("em",[e._v("åŸºæœ¬æ˜ åƒ")]),a("OutboundLink")],1),e._v(" ã€‚ å› æ­¤ï¼Œæœ‰æ•ˆçš„ "),a("code",[e._v("Dockerfile")]),e._v(" å¿…é¡»ä» "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤ å¼€å§‹ ã€‚ è¯¥å›¾åƒå¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆå›¾åƒ- ä»"),a("a",{attrs:{href:"https://docs.docker.com/engine/tutorials/dockerrepos/",target:"_blank",rel:"noopener noreferrer"}},[a("em",[e._v("å…¬å…±å­˜å‚¨åº“ä¸­")]),a("OutboundLink")],1),a("strong",[e._v("æ‹‰å‡ºå›¾åƒ")]),e._v(" ç‰¹åˆ«å®¹æ˜“å¯åŠ¨ ã€‚"),a("a",{attrs:{href:"https://docs.docker.com/engine/tutorials/dockerrepos/",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ARG")]),e._v(" æ˜¯å…ˆäºä»…æŒ‡ç¤º "),a("code",[e._v("FROM")]),e._v(" åœ¨ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ è¯·å‚é˜… "),a("a",{attrs:{href:"#understand-how-arg-and-from-interact"}},[e._v("äº†è§£ARGå’ŒFROMä¹‹é—´çš„ç›¸äº’ä½œç”¨")]),e._v(" ã€‚")]),e._v(" "),a("li",[a("code",[e._v("FROM")]),e._v(" å¯ä»¥ä¸€æ¬¡å‡ºç°å¤šæ¬¡ "),a("code",[e._v("Dockerfile")]),e._v(" ä»¥åˆ›å»ºå¤šä¸ªæ˜ åƒï¼Œä¹Ÿå¯ä»¥å°†ä¸€ä¸ªæ„å»ºé˜¶æ®µä½œä¸ºå¯¹å¦ä¸€ä¸ªæ„å»ºé˜¶æ®µçš„ä¾èµ–ã€‚ åªéœ€åœ¨æ¯ä¸ªæ–° "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤ ä¹‹å‰è®°å½•ä¸€æ¬¡æäº¤è¾“å‡ºçš„æœ€åä¸€ä¸ªå›¾åƒID ã€‚ æ¯ä¸ª "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤æ¸…é™¤ç”±å…ˆå‰æŒ‡ä»¤åˆ›å»ºçš„ä»»ä½•çŠ¶æ€ã€‚")]),e._v(" "),a("li",[e._v("å¯é€‰çš„åç§°å¯ä»¥é€šè¿‡æ·»åŠ ç»™äºˆä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µ "),a("code",[e._v("AS name")]),e._v(" çš„ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤ã€‚ è¯¥åç§°å¯ä»¥åœ¨åç»­ç‰ˆæœ¬ "),a("code",[e._v("FROM")]),e._v(" å’Œ "),a("code",[e._v("COPY --from=<name|index>")]),e._v(" è¯´æ˜ä¸­ ä½¿ç”¨ï¼Œ ä»¥å¼•ç”¨æ­¤é˜¶æ®µä¸­æ„å»ºçš„æ˜ åƒã€‚")]),e._v(" "),a("li",[e._v("è¯¥ "),a("code",[e._v("tag")]),e._v(" æˆ– "),a("code",[e._v("digest")]),e._v(" å€¼æ˜¯å¯é€‰çš„ã€‚ å¦‚æœæ‚¨å¿½ç•¥å…¶ä¸­ä»»ä½•ä¸€ä¸ª "),a("code",[e._v("latest")]),e._v(" ï¼Œé‚£ä¹ˆç¼ºçœæƒ…å†µä¸‹ ï¼Œæ„å»ºå™¨å°†é‡‡ç”¨ æ ‡ç­¾ã€‚ å¦‚æœæ„å»ºå™¨æ‰¾ä¸åˆ°è¯¥ "),a("code",[e._v("tag")]),e._v(" å€¼ï¼Œ åˆ™è¿”å›é”™è¯¯ ã€‚")])]),e._v(" "),a("p",[a("code",[e._v("--platform")]),e._v(" åœ¨ "),a("code",[e._v("FROM")]),e._v(" å¼•ç”¨å¤šå¹³å°å›¾åƒçš„ æƒ…å†µä¸‹ ï¼Œå¯é€‰ æ ‡å¿—å¯ç”¨äºæŒ‡å®šå›¾åƒ çš„å¹³å°ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("linux/amd64")]),e._v(" ï¼Œ "),a("code",[e._v("linux/arm64")]),e._v(" ï¼Œæˆ– "),a("code",[e._v("windows/amd64")]),e._v(" ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ„å»ºè¯·æ±‚çš„ç›®æ ‡å¹³å°ã€‚ å¯ä»¥åœ¨æ­¤æ ‡å¿—çš„å€¼ä¸­ä½¿ç”¨å…¨å±€æ„å»ºå‚æ•°ï¼Œä¾‹å¦‚ï¼Œ "),a("a",{attrs:{href:"#automatic-platform-args-in-the-global-scope"}},[e._v("è‡ªåŠ¨å¹³å°ARG")]),e._v(" å…è®¸æ‚¨å°†é˜¶æ®µå¼ºåˆ¶åˆ°æœ¬æœºæ„å»ºå¹³å°ï¼ˆ "),a("code",[e._v("--platform=$BUILDPLATFORM")]),e._v(" ï¼‰ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥äº¤å‰ç¼–è¯‘åˆ°é˜¶æ®µå†…éƒ¨çš„ç›®æ ‡å¹³å°ã€‚")]),e._v(" "),a("h3",{attrs:{id:"äº†è§£argå’Œfromä¹‹é—´çš„äº¤äº’æ–¹å¼-ğŸ”—"}},[e._v("äº†è§£ARGå’ŒFROMä¹‹é—´çš„äº¤äº’æ–¹å¼ "),a("a",{attrs:{href:"#understand-how-arg-and-from-interact"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤æ”¯æŒç”± "),a("code",[e._v("ARG")]),e._v(" ç¬¬ä¸€æŒ‡ä»¤ä¹‹å‰çš„ ä»»ä½• æŒ‡ä»¤ å£°æ˜çš„å˜é‡ "),a("code",[e._v("FROM")]),e._v(" ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ARG  CODE_VERSION=latest\nFROM base:${CODE_VERSION}\nCMD  /code/run-app\n\nFROM extras:${CODE_VERSION}\nCMD  /code/run-extras\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[a("code",[e._v("ARG")]),e._v(" åœ¨aä¹‹å‰ çš„ å£°æ˜ "),a("code",[e._v("FROM")]),e._v(" ä½äºæ„å»ºé˜¶æ®µä¹‹å¤–ï¼Œå› æ­¤åœ¨aä¹‹åçš„ä»»ä½•æŒ‡ä»¤ä¸­éƒ½ä¸èƒ½ä½¿ç”¨å®ƒ "),a("code",[e._v("FROM")]),e._v(" ã€‚ è¦ "),a("code",[e._v("ARG")]),e._v(" åœ¨ç¬¬ä¸€æ¬¡ "),a("code",[e._v("FROM")]),e._v(" ä½¿ç”¨ å£°æ˜ä¹‹å‰ ä½¿ç”¨é»˜è®¤å€¼ï¼Œè¯· åœ¨ "),a("code",[e._v("ARG")]),e._v(" æ„å»ºé˜¶æ®µ ä½¿ç”¨ æ²¡æœ‰å€¼ çš„ æŒ‡ä»¤ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ARG VERSION=latest\nFROM busybox:$VERSION\nARG VERSION\nRUN echo $VERSION > image_version\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h2",{attrs:{id:"è¿è¡Œ-ğŸ”—"}},[e._v("è¿è¡Œ "),a("a",{attrs:{href:"#run"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("RUNæœ‰2ç§å½¢å¼ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("RUN <command>")]),e._v(" ï¼ˆ "),a("em",[e._v("shell")]),e._v(" å½¢å¼ï¼Œå‘½ä»¤åœ¨shellä¸­è¿è¡Œï¼Œé»˜è®¤æƒ…å†µä¸‹ "),a("code",[e._v("/bin/sh -c")]),e._v(" åœ¨Linuxæˆ– "),a("code",[e._v("cmd /S /C")]),e._v(" Windows ä¸Šè¿è¡Œ ï¼‰")]),e._v(" "),a("li",[a("code",[e._v('RUN ["executable", "param1", "param2"]')]),e._v(" ï¼ˆ "),a("em",[e._v("æ‰§è¡Œ")]),e._v(" è¡¨æ ¼ï¼‰")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤å°†åœ¨å½“å‰å›¾åƒé¡¶éƒ¨çš„æ–°å±‚ä¸­æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼Œå¹¶æäº¤ç»“æœã€‚ ç”Ÿæˆçš„æäº¤å›¾åƒå°†ç”¨äºä¸­çš„ä¸‹ä¸€æ­¥ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("åˆ†å±‚ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤å’Œç”Ÿæˆæäº¤ç¬¦åˆDockerçš„æ ¸å¿ƒæ¦‚å¿µï¼Œåœ¨Dockerä¸Šï¼Œæäº¤å¾ˆä¾¿å®œï¼Œå¹¶ä¸”å¯ä»¥ä»æ˜ åƒå†å²è®°å½•çš„ä»»ä½•ä½ç½®åˆ›å»ºå®¹å™¨ï¼Œå°±åƒæºä»£ç æ§åˆ¶ä¸€æ ·ã€‚")]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("EXEC")]),e._v(" å½¢å¼ä½¿å¾—èƒ½å¤Ÿé¿å…å£³ä¸²æ”¹å†™ï¼ˆmungingï¼‰ï¼Œå¹¶ "),a("code",[e._v("RUN")]),e._v(" ä½¿ç”¨ä¸åŒ…å«æŒ‡å®šå£³å¯æ‰§è¡ŒåŸºæœ¬å›¾åƒçš„å‘½ä»¤ã€‚")]),e._v(" "),a("p",[e._v("å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ å‘½ä»¤ æ›´æ”¹ "),a("em",[e._v("shell")]),e._v(" å½¢å¼ çš„é»˜è®¤shell "),a("code",[e._v("SHELL")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("shell")]),e._v(" å½¢å¼ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("\\")]),e._v(" ï¼ˆåæ–œæ ï¼‰å°†ä¸€æ¡RUNæŒ‡ä»¤ç»§ç»­åˆ°ä¸‹ä¸€è¡Œã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ä¸¤è¡Œï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("RUN /bin/bash -c 'source $HOME/.bashrc; \\\necho $HOME'\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("å®ƒä»¬åˆèµ·æ¥ç›¸å½“äºä»¥ä¸‹ä¸€è¡Œï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("RUN /bin/bash -c 'source $HOME/.bashrc; echo $HOME'\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦ä½¿ç”¨'/ bin / sh'ä»¥å¤–çš„å…¶ä»–shellï¼Œè¯·ä½¿ç”¨ "),a("em",[e._v("exec")]),e._v(" å½¢å¼ä¼ å…¥æ‰€éœ€çš„shellã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('RUN ["/bin/bash", "-c", "echo hello"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("EXEC")]),e._v(" å½¢å¼è¢«è§£æä¸ºä¸€ä¸ªJSONé˜µåˆ—ï¼Œè¿™æ„å‘³ç€å¿…é¡»ä½¿ç”¨åŒå¼•å·ï¼ˆâ€œï¼‰å‘¨å›´çš„è¯ä¸å•å¼•å·ï¼ˆ'ï¼‰ã€‚")])]),e._v(" "),a("p",[e._v("ä¸ "),a("em",[e._v("shell")]),e._v(" è¡¨å• ä¸åŒ ï¼Œ "),a("em",[e._v("exec")]),e._v(" è¡¨å•ä¸ä¼šè°ƒç”¨å‘½ä»¤shellã€‚ è¿™æ„å‘³ç€ä¸ä¼šå‘ç”Ÿå¸¸è§„çš„å¤–å£³å¤„ç†ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v('RUN [ "echo", "$HOME" ]')]),e._v(" å°†ä¸ä¼šå¯¹è¿›è¡Œå˜é‡æ›¿æ¢ "),a("code",[e._v("$HOME")]),e._v(" ã€‚ å¦‚æœè¦è¿›è¡Œshellå¤„ç†ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),a("em",[e._v("shell")]),e._v(" å½¢å¼æˆ–ç›´æ¥æ‰§è¡Œshellï¼Œä¾‹å¦‚ï¼š "),a("code",[e._v('RUN [ "sh", "-c", "echo $HOME" ]')]),e._v(" ã€‚ å½“ä½¿ç”¨execè¡¨å•å¹¶ç›´æ¥æ‰§è¡Œshellæ—¶ï¼ˆä¾‹å¦‚åœ¨shellè¡¨å•ä¸­ï¼‰ï¼Œæ˜¯ç”±shellè¿›è¡Œç¯å¢ƒå˜é‡æ‰©å±•ï¼Œè€Œä¸æ˜¯dockerã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("JSON")]),e._v(" æ ¼å¼ä¸­ï¼Œå¿…é¡»è½¬ä¹‰åæ–œæ ã€‚ è¿™åœ¨Windowsä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œåœ¨Windowsä¸­åæ–œæ æ˜¯è·¯å¾„åˆ†éš”ç¬¦ã€‚ ç”±äºæ— æ•ˆçš„JSONï¼Œ ä»¥ä¸‹è¡Œå¦åˆ™å°†è¢«è§†ä¸º "),a("em",[e._v("shell")]),e._v(" å½¢å¼ï¼Œå¹¶ä»¥æ„å¤–çš„æ–¹å¼å¤±è´¥ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('RUN ["c:\\windows\\system32\\tasklist.exe"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("æ­¤ç¤ºä¾‹çš„æ­£ç¡®è¯­æ³•ä¸ºï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('RUN ["c:\\\\windows\\\\system32\\\\tasklist.exe"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])])]),e._v(" "),a("p",[a("code",[e._v("RUN")]),e._v(" ä¸‹ä¸€æ¬¡æ„å»ºæœŸé—´ ï¼Œ æŒ‡ä»¤ ç¼“å­˜ ä¸ä¼šè‡ªåŠ¨å¤±æ•ˆã€‚ ç±»ä¼¼æŒ‡ä»¤çš„ç¼“å­˜ "),a("code",[e._v("RUN apt-get dist-upgrade -y")]),e._v(" å°†åœ¨ä¸‹ä¸€ä¸ªæ„å»ºä¸­é‡ç”¨ã€‚ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤ çš„ç¼“å­˜ å¯ä»¥é€šè¿‡ä½¿ç”¨ "),a("code",[e._v("--no-cache")]),e._v(" æ ‡å¿— æ¥ä½¿æ— æ•ˆ ï¼Œä¾‹å¦‚ "),a("code",[e._v("docker build --no-cache")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("æœ‰å…³ æ›´å¤šä¿¡æ¯ï¼Œ è¯·å‚è§ "),a("a",{attrs:{href:"https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("Dockerfile")]),e._v("æœ€ä½³å®è·µæŒ‡å—"),a("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),a("p",[a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤ çš„ç¼“å­˜ å¯ä»¥è¢« "),a("a",{attrs:{href:"#add"}},[a("code",[e._v("ADD")])]),e._v(" å’Œ "),a("a",{attrs:{href:"#copy"}},[a("code",[e._v("COPY")])]),e._v(" æŒ‡ä»¤ æ— æ•ˆ ã€‚")]),e._v(" "),a("h3",{attrs:{id:"å·²çŸ¥é—®é¢˜ï¼ˆè¿è¡Œï¼‰-ğŸ”—"}},[e._v("å·²çŸ¥é—®é¢˜ï¼ˆè¿è¡Œï¼‰ "),a("a",{attrs:{href:"#known-issues-run"}},[e._v("ğŸ”—")])]),e._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://github.com/docker/docker/issues/783",target:"_blank",rel:"noopener noreferrer"}},[e._v("é—®é¢˜783"),a("OutboundLink")],1),e._v(" æ˜¯æœ‰å…³ä½¿ç”¨AUFSæ–‡ä»¶ç³»ç»Ÿæ—¶å¯èƒ½å‘ç”Ÿçš„æ–‡ä»¶æƒé™é—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œæ‚¨åœ¨å°è¯• "),a("code",[e._v("rm")]),e._v(" æ–‡ä»¶ è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæ³¨æ„åˆ°å®ƒ ã€‚")]),e._v(" "),a("p",[e._v("å¯¹äºå…·æœ‰æœ€æ–°aufsç‰ˆæœ¬çš„ç³»ç»Ÿï¼ˆå³ï¼Œ "),a("code",[e._v("dirperm1")]),e._v(" å¯ä»¥è®¾ç½®å®‰è£…é€‰é¡¹ï¼‰ï¼Œdockerå°†å°è¯•é€šè¿‡ä½¿ç”¨optionsæŒ‚è½½å±‚æ¥å°è¯•è‡ªåŠ¨ä¿®å¤é—®é¢˜ "),a("code",[e._v("dirperm1")]),e._v(" ã€‚ æœ‰å…³ "),a("code",[e._v("dirperm1")]),e._v(" é€‰é¡¹çš„ æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯· å‚è§ "),a("a",{attrs:{href:"https://github.com/sfjro/aufs3-linux/tree/aufs3.18/Documentation/filesystems/aufs",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("aufs")]),e._v("æ‰‹å†Œé¡µ"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("å¦‚æœæ‚¨çš„ç³»ç»Ÿä¸æ”¯æŒ "),a("code",[e._v("dirperm1")]),e._v(" ï¼Œåˆ™è¯¥é—®é¢˜æè¿°äº†ä¸€ç§è§£å†³æ–¹æ³•ã€‚")])])]),e._v(" "),a("h2",{attrs:{id:"cmd-ğŸ”—"}},[e._v("CMD "),a("a",{attrs:{href:"#cmd"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("CMD")]),e._v(" æŒ‡ä»¤å…·æœ‰ä¸‰ç§å½¢å¼ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v('CMD ["executable","param1","param2"]')]),e._v(" ï¼ˆ "),a("em",[e._v("exec")]),e._v(" å½¢å¼ï¼Œè¿™æ˜¯é¦–é€‰å½¢å¼ï¼‰")]),e._v(" "),a("li",[a("code",[e._v('CMD ["param1","param2"]')]),e._v(" ï¼ˆä½œä¸º "),a("em",[e._v("ENTRYPOINTçš„é»˜è®¤å‚æ•°")]),e._v(" ï¼‰")]),e._v(" "),a("li",[a("code",[e._v("CMD command param1 param2")]),e._v(" ï¼ˆ "),a("em",[e._v("å¤–å£³")]),e._v(" å½¢å¼ï¼‰")])]),e._v(" "),a("p",[a("code",[e._v("CMD")]),e._v(" æŒ‡ä»¤ä¸­ åªèƒ½æœ‰ä¸€æ¡ æŒ‡ä»¤ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ å¦‚æœæ‚¨åˆ—å‡ºå¤šä¸ªï¼Œ "),a("code",[e._v("CMD")]),e._v(" åˆ™åªæœ‰æœ€åä¸€ä¸ª "),a("code",[e._v("CMD")]),e._v(" æ‰ä¼šç”Ÿæ•ˆã€‚")]),e._v(" "),a("p",[a("strong",[e._v("açš„ä¸»è¦ç›®çš„"),a("code",[e._v("CMD")]),e._v("æ˜¯ä¸ºæ‰§è¡Œä¸­çš„å®¹å™¨æä¾›é»˜è®¤å€¼ã€‚")]),e._v(" è¿™äº›é»˜è®¤å€¼å¯ä»¥åŒ…å«ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å¿½ç•¥è¯¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨è¿˜å¿…é¡»æŒ‡å®šä¸€æ¡ "),a("code",[e._v("ENTRYPOINT")]),e._v(" æŒ‡ä»¤ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœ "),a("code",[e._v("CMD")]),e._v(" ç”¨äºä¸º "),a("code",[e._v("ENTRYPOINT")]),e._v(" æŒ‡ä»¤ æä¾›é»˜è®¤å‚æ•° ï¼Œåˆ™ "),a("code",[e._v("CMD")]),e._v(" å’Œ "),a("code",[e._v("ENTRYPOINT")]),e._v(" æŒ‡ä»¤å‡åº”ä½¿ç”¨JSONæ•°ç»„æ ¼å¼æŒ‡å®šã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("EXEC")]),e._v(" å½¢å¼è¢«è§£æä¸ºä¸€ä¸ªJSONé˜µåˆ—ï¼Œè¿™æ„å‘³ç€å¿…é¡»ä½¿ç”¨åŒå¼•å·ï¼ˆâ€œï¼‰å‘¨å›´çš„è¯ä¸å•å¼•å·ï¼ˆ'ï¼‰ã€‚")])]),e._v(" "),a("p",[e._v("ä¸ "),a("em",[e._v("shell")]),e._v(" è¡¨å• ä¸åŒ ï¼Œ "),a("em",[e._v("exec")]),e._v(" è¡¨å•ä¸ä¼šè°ƒç”¨å‘½ä»¤shellã€‚ è¿™æ„å‘³ç€ä¸ä¼šå‘ç”Ÿå¸¸è§„çš„å¤–å£³å¤„ç†ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v('CMD [ "echo", "$HOME" ]')]),e._v(" å°†ä¸ä¼šå¯¹è¿›è¡Œå˜é‡æ›¿æ¢ "),a("code",[e._v("$HOME")]),e._v(" ã€‚ å¦‚æœè¦è¿›è¡Œshellå¤„ç†ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),a("em",[e._v("shell")]),e._v(" å½¢å¼æˆ–ç›´æ¥æ‰§è¡Œshellï¼Œä¾‹å¦‚ï¼š "),a("code",[e._v('CMD [ "sh", "-c", "echo $HOME" ]')]),e._v(" ã€‚ å½“ä½¿ç”¨execè¡¨å•å¹¶ç›´æ¥æ‰§è¡Œshellæ—¶ï¼ˆä¾‹å¦‚åœ¨shellè¡¨å•ä¸­ï¼‰ï¼Œæ˜¯ç”±shellè¿›è¡Œç¯å¢ƒå˜é‡æ‰©å±•ï¼Œè€Œä¸æ˜¯dockerã€‚")]),e._v(" "),a("p",[e._v("å½“ä»¥shellæˆ–execæ ¼å¼ä½¿ç”¨æ—¶ï¼Œè¯¥ "),a("code",[e._v("CMD")]),e._v(" æŒ‡ä»¤è®¾ç½®è¿è¡Œæ˜ åƒæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœæ‚¨ä½¿ç”¨çš„ "),a("em",[e._v("å¤–å£³")]),e._v(" å½¢å¼ "),a("code",[e._v("CMD")]),e._v(" ï¼Œåˆ™å°†åœ¨ä¸­ "),a("code",[e._v("<command>")]),e._v(" æ‰§è¡Œ "),a("code",[e._v("/bin/sh -c")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM ubuntu\nCMD echo "This is a test." | wc -\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("å¦‚æœè¦ "),a("strong",[e._v("åœ¨")]),e._v(" "),a("code",[e._v("<command>")]),e._v(" "),a("strong",[e._v("æ²¡æœ‰å¤–å£³")]),e._v(" "),a("strong",[e._v("çš„"),a("strong",[a("strong",[e._v("æƒ…å†µä¸‹")])]),e._v("è¿è¡Œï¼Œ")]),e._v(" åˆ™å¿…é¡»å°†å‘½ä»¤è¡¨ç¤ºä¸ºJSONæ•°ç»„ï¼Œå¹¶æä¾›å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚ "),a("strong",[e._v("æ­¤æ•°ç»„å½¢å¼æ˜¯çš„é¦–é€‰æ ¼å¼"),a("code",[e._v("CMD")]),e._v("ã€‚")]),e._v(" ä»»ä½•å…¶ä»–å‚æ•°å¿…é¡»åœ¨æ•°ç»„ä¸­åˆ†åˆ«è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM ubuntu\nCMD ["/usr/bin/wc","--help"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("å¦‚æœæ‚¨å¸Œæœ›å®¹å™¨æ¯æ¬¡éƒ½è¿è¡Œç›¸åŒçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåˆ™åº”è€ƒè™‘ "),a("code",[e._v("ENTRYPOINT")]),e._v(" ä¸ç»“åˆä½¿ç”¨ "),a("code",[e._v("CMD")]),e._v(" ã€‚ è¯·å‚é˜… "),a("a",{attrs:{href:"#entrypoint"}},[a("em",[e._v("ENTRYPOINT")])]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœç”¨æˆ·æŒ‡å®šçš„å‚æ•°ï¼Œ "),a("code",[e._v("docker run")]),e._v(" åˆ™å®ƒä»¬å°†è¦†ç›–ä¸­æŒ‡å®šçš„é»˜è®¤å‚æ•° "),a("code",[e._v("CMD")]),e._v(" ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("ä¸è¦ "),a("code",[e._v("RUN")]),e._v(" ä¸ æ··æ·† "),a("code",[e._v("CMD")]),e._v(" ã€‚ "),a("code",[e._v("RUN")]),e._v(" å®é™…ä¸Šè¿è¡Œå‘½ä»¤å¹¶æäº¤ç»“æœï¼› "),a("code",[e._v("CMD")]),e._v(" åœ¨ç”Ÿæˆæ—¶ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œä½†æ˜¯æŒ‡å®šæ˜ åƒçš„é¢„æœŸå‘½ä»¤ã€‚")])]),e._v(" "),a("h2",{attrs:{id:"æ ‡ç­¾-ğŸ”—"}},[e._v("æ ‡ç­¾ "),a("a",{attrs:{href:"#label"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("LABEL <key>=<value> <key>=<value> <key>=<value> ...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("LABEL")]),e._v(" æŒ‡ä»¤å°†å…ƒæ•°æ®æ·»åŠ åˆ°å›¾åƒã€‚ A "),a("code",[e._v("LABEL")]),e._v(" æ˜¯é”®å€¼å¯¹ã€‚ è¦åœ¨ "),a("code",[e._v("LABEL")]),e._v(" å€¼ä¸­ åŒ…å«ç©ºæ ¼ ï¼Œè¯·åƒåœ¨å‘½ä»¤è¡Œåˆ†æä¸­ä¸€æ ·ä½¿ç”¨å¼•å·å’Œåæ–œæ ã€‚ ä¸€äº›ç”¨æ³•ç¤ºä¾‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('LABEL "com.example.vendor"="ACME Incorporated"\nLABEL com.example.label-with-value="foo"\nLABEL version="1.0"\nLABEL description="This text illustrates \\\nthat label-values can span multiple lines."\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("ä¸€å¹…å›¾åƒå¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ã€‚ æ‚¨å¯ä»¥åœ¨ä¸€è¡Œä¸ŠæŒ‡å®šå¤šä¸ªæ ‡ç­¾ã€‚ åœ¨Docker 1.10ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™å‡å°äº†æœ€ç»ˆæ˜ åƒçš„å¤§å°ï¼Œä½†æ˜¯æƒ…å†µä¸å†å¦‚æ­¤ã€‚ æ‚¨ä»ç„¶å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€é€‰æ‹©åœ¨ä¸€æ¡æŒ‡ä»¤ä¸­æŒ‡å®šå¤šä¸ªæ ‡ç­¾ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('LABEL multi.label1="value1" multi.label2="value2" other="value3"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('LABEL multi.label1="value1" \\\n      multi.label2="value2" \\\n      other="value3"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("åŸºæœ¬æˆ–çˆ¶å›¾åƒï¼ˆè¯¥ "),a("code",[e._v("FROM")]),e._v(" è¡Œä¸­çš„å›¾åƒï¼‰ä¸­ åŒ…å«çš„æ ‡ç­¾ ç”±æ‚¨çš„å›¾åƒç»§æ‰¿ã€‚ å¦‚æœæ ‡ç­¾å·²ç»å­˜åœ¨ä½†å…·æœ‰ä¸åŒçš„å€¼ï¼Œåˆ™æœ€è¿‘åº”ç”¨çš„å€¼å°†è¦†ç›–ä»»ä½•å…ˆå‰è®¾ç½®çš„å€¼ã€‚")]),e._v(" "),a("p",[e._v("è¦æŸ¥çœ‹å›¾åƒçš„æ ‡ç­¾ï¼Œè¯·ä½¿ç”¨ "),a("code",[e._v("docker image inspect")]),e._v(" å‘½ä»¤ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è¯¥ "),a("code",[e._v("--format")]),e._v(" é€‰é¡¹ä»…æ˜¾ç¤ºæ ‡ç­¾ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker image inspect --format='' myimage\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n  "com.example.vendor": "ACME Incorporated",\n  "com.example.label-with-value": "foo",\n  "version": "1.0",\n  "description": "This text illustrates that label-values can span multiple lines.",\n  "multi.label1": "value1",\n  "multi.label2": "value2",\n  "other": "value3"\n}\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h2",{attrs:{id:"ç»´æŠ¤è€…-ï¼ˆå·²å¼ƒç”¨ï¼‰-ğŸ”—"}},[a("a",{attrs:{href:"#maintainer-deprecated"}},[e._v("ç»´æŠ¤è€…")]),e._v(" ï¼ˆå·²å¼ƒç”¨ï¼‰ "),a("a",{attrs:{href:"#maintainer-deprecated"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("MAINTAINER <name>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("MAINTAINER")]),e._v(" æŒ‡ä»¤è®¾ç½® ç”Ÿæˆå›¾åƒ çš„ "),a("em",[e._v("ä½œè€…")]),e._v(" å­—æ®µã€‚ è¯¥ "),a("code",[e._v("LABEL")]),e._v(" æŒ‡ä»¤æ˜¯æ­¤ç‰ˆæœ¬çš„çµæ´»å¾—å¤šï¼Œæ‚¨åº”è¯¥æ”¹ç”¨å®ƒï¼Œå› ä¸ºå®ƒå¯ä»¥è®¾ç½®æ‰€éœ€çš„ä»»ä½•å…ƒæ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾æŸ¥çœ‹ï¼Œä¾‹å¦‚ä½¿ç”¨ "),a("code",[e._v("docker inspect")]),e._v(" ã€‚ è¦è®¾ç½®ä¸è¯¥ "),a("code",[e._v("MAINTAINER")]),e._v(" å­—æ®µ å¯¹åº”çš„æ ‡ç­¾ï¼Œ å¯ä»¥ä½¿ç”¨ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('LABEL maintainer="SvenDowideit@home.org.au"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¿™æ · "),a("code",[e._v("docker inspect")]),e._v(" ï¼Œå…¶ä»–æ ‡ç­¾ å°±å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ äº†ã€‚")]),e._v(" "),a("h2",{attrs:{id:"æš´éœ²-ğŸ”—"}},[e._v("æš´éœ² "),a("a",{attrs:{href:"#expose"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("EXPOSE <port> [<port>/<protocol>...]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("EXPOSE")]),e._v(" æŒ‡ä»¤é€šçŸ¥Dockerå®¹å™¨åœ¨è¿è¡Œæ—¶ç›‘å¬æŒ‡å®šçš„ç½‘ç»œç«¯å£ã€‚ æ‚¨å¯ä»¥æŒ‡å®šç«¯å£æ˜¯ä¾¦å¬TCPè¿˜æ˜¯UDPï¼Œå¦‚æœæœªæŒ‡å®šåè®®ï¼Œåˆ™é»˜è®¤å€¼ä¸ºTCPã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("EXPOSE")]),e._v(" æŒ‡ä»¤å®é™…ä¸Šå¹¶æœªå‘å¸ƒç«¯å£ã€‚ å®ƒå……å½“æ„å»ºæ˜ åƒçš„äººå‘˜å’Œè¿è¡Œå®¹å™¨çš„äººå‘˜ä¹‹é—´çš„ä¸€ç§æ–‡æ¡£ç±»å‹ï¼Œæœ‰å…³æ‰“ç®—å‘å¸ƒå“ªäº›ç«¯å£çš„ä¿¡æ¯ã€‚ è¦åœ¨è¿è¡Œå®¹å™¨æ—¶å®é™…å‘å¸ƒç«¯å£ï¼Œè¯·ä½¿ç”¨ "),a("code",[e._v("-p")]),e._v(" æ ‡è®°on "),a("code",[e._v("docker run")]),e._v(" å‘å¸ƒå’Œæ˜ å°„ä¸€ä¸ªæˆ–å¤šä¸ªç«¯å£ï¼Œæˆ–è€…ä½¿ç”¨ "),a("code",[e._v("-P")]),e._v(" æ ‡è®°å‘å¸ƒæ‰€æœ‰å…¬å¼€çš„ç«¯å£å¹¶å°†å®ƒä»¬æ˜ å°„åˆ°é«˜é˜¶ç«¯å£ã€‚")]),e._v(" "),a("p",[e._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œ "),a("code",[e._v("EXPOSE")]),e._v(" å‡å®šä¸ºTCPã€‚ æ‚¨è¿˜å¯ä»¥æŒ‡å®šUDPï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("EXPOSE 80/udp\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦åŒæ—¶åœ¨TCPå’ŒUDPä¸Šå…¬å¼€ï¼Œè¯·åŒ…æ‹¬ä»¥ä¸‹ä¸¤è¡Œï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("EXPOSE 80/tcp\nEXPOSE 80/udp\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ "),a("code",[e._v("-P")]),e._v(" ä¸é…åˆ ä½¿ç”¨ "),a("code",[e._v("docker run")]),e._v(" ï¼Œåˆ™è¯¥ç«¯å£ä»…å¯¹TCPå…¬å¼€ä¸€æ¬¡ï¼Œå¯¹äºUDPå…¬å¼€ä¸€æ¬¡ã€‚ è¯·è®°ä½ï¼Œ "),a("code",[e._v("-P")]),e._v(" è¯¥ç«¯å£åœ¨ä¸»æœºä¸Šä½¿ç”¨ä¸´æ—¶çš„é«˜é˜¶ä¸»æœºç«¯å£ï¼Œå› æ­¤è¯¥ç«¯å£å¯¹äºTCPå’ŒUDPå°†æ˜¯ä¸åŒçš„ã€‚")]),e._v(" "),a("p",[e._v("æ— è®º "),a("code",[e._v("EXPOSE")]),e._v(" è®¾ç½® å¦‚ä½• ï¼Œéƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨è¯¥ "),a("code",[e._v("-p")]),e._v(" æ ‡å¿— è¦†ç›–å®ƒä»¬ ã€‚ ä¾‹å¦‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker run -p 80:80/tcp -p 80:80/udp ...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦åœ¨ä¸»æœºç³»ç»Ÿä¸Šè®¾ç½®ç«¯å£é‡å®šå‘ï¼Œè¯·å‚é˜… "),a("a",{attrs:{href:"https://docs.docker.com/engine/reference/run/#expose-incoming-ports",target:"_blank",rel:"noopener noreferrer"}},[e._v("ä½¿ç”¨-Pæ ‡å¿—"),a("OutboundLink")],1),e._v(" ã€‚ è¯¥ "),a("code",[e._v("docker network")]),e._v(" å‘½ä»¤æ”¯æŒåˆ›å»ºç½‘ç»œä»¥åœ¨å®¹å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œè€Œæ— éœ€æš´éœ²æˆ–å‘å¸ƒç‰¹å®šç«¯å£ï¼Œå› ä¸ºè¿æ¥åˆ°ç½‘ç»œçš„å®¹å™¨å¯ä»¥é€šè¿‡ä»»ä½•ç«¯å£ç›¸äº’é€šä¿¡ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… "),a("a",{attrs:{href:"https://docs.docker.com/engine/userguide/networking/",target:"_blank",rel:"noopener noreferrer"}},[e._v("æ­¤åŠŸèƒ½"),a("OutboundLink")],1),e._v(" çš„ "),a("a",{attrs:{href:"https://docs.docker.com/engine/userguide/networking/",target:"_blank",rel:"noopener noreferrer"}},[e._v("æ¦‚è¿°"),a("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),a("h2",{attrs:{id:"ç¯ä¿-v"}},[e._v("ç¯ä¿ "),a("a",{attrs:{href:"#env"}},[e._v("V")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ENV <key> <value>\nENV <key>=<value> ...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤å°†ç¯å¢ƒå˜é‡ "),a("code",[e._v("<key>")]),e._v(" è®¾ç½®ä¸ºvalue "),a("code",[e._v("<value>")]),e._v(" ã€‚ æ­¤å€¼å°†åœ¨æ„å»ºé˜¶æ®µä¸­æ‰€æœ‰åç»­æŒ‡ä»¤çš„ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ åœ¨å¾ˆå¤šæƒ…å†µä¸‹ "),a("a",{attrs:{href:"#environment-replacement"}},[e._v("å†…è”æ›¿æ¢")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤æœ‰ä¸¤ç§å½¢å¼ã€‚ ç¬¬ä¸€ç§å½¢å¼ï¼Œ "),a("code",[e._v("ENV <key> <value>")]),e._v(" ä¼šå°†ä¸€ä¸ªå˜é‡è®¾ç½®ä¸ºä¸€ä¸ªå€¼ã€‚ ç¬¬ä¸€ä¸ªç©ºæ ¼ä¹‹åçš„æ•´ä¸ªå­—ç¬¦ä¸²å°†è¢«è§†ä¸º "),a("code",[e._v("<value>")]),e._v(" -åŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ã€‚ è¯¥å€¼å°†ä¸ºå…¶ä»–ç¯å¢ƒå˜é‡è§£é‡Šï¼Œå› æ­¤å¦‚æœä¸å¯¹å¼•å·å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œåˆ™å°†å…¶åˆ é™¤ã€‚")]),e._v(" "),a("p",[e._v("ç¬¬äºŒç§å½¢å¼ "),a("code",[e._v("ENV <key>=<value> ...")]),e._v(" å…è®¸ä¸€æ¬¡è®¾ç½®å¤šä¸ªå˜é‡ã€‚ è¯·æ³¨æ„ï¼Œç¬¬äºŒç§å½¢å¼åœ¨è¯­æ³•ä¸­ä½¿ç”¨ç­‰å·ï¼ˆ=ï¼‰ï¼Œè€Œç¬¬ä¸€ç§å½¢å¼åˆ™ä¸ä½¿ç”¨ç­‰å·ï¼ˆ=ï¼‰ã€‚ ä¸å‘½ä»¤è¡Œåˆ†æä¸€æ ·ï¼Œå¼•å·å’Œåæ–œæ å¯ç”¨äºåœ¨å€¼ä¸­åŒ…å«ç©ºæ ¼ã€‚")]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('ENV myName="John Doe" myDog=Rex\\ The\\ Dog \\\n    myCat=fluffy\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("å’Œ")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ENV myName John Doe\nENV myDog Rex The Dog\nENV myCat fluffy\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("å°†åœ¨æœ€ç»ˆå›¾åƒä¸­äº§ç”Ÿç›¸åŒçš„å‡€ç»“æœã€‚")]),e._v(" "),a("p",[a("code",[e._v("ENV")]),e._v(" ä»ç»“æœæ˜ åƒè¿è¡Œå®¹å™¨æ—¶ï¼Œ ä½¿ç”¨è®¾ç½®çš„ç¯å¢ƒå˜é‡ å°†ä¿ç•™ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æŸ¥çœ‹å€¼ "),a("code",[e._v("docker inspect")]),e._v(" ï¼Œå¹¶ä½¿ç”¨æ›´æ”¹å®ƒä»¬ "),a("code",[e._v("docker run --env <key>=<value>")]),e._v(" ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("ç¯å¢ƒæŒä¹…æ€§å¯èƒ½å¯¼è‡´æ„å¤–çš„å‰¯ä½œç”¨ã€‚ ä¾‹å¦‚ï¼Œè®¾ç½® "),a("code",[e._v("ENV DEBIAN_FRONTEND noninteractive")]),e._v(" å¯èƒ½ä¼šä½¿åŸºäºDebiançš„æ˜ åƒä¸Šçš„apt-getç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ã€‚ è¦ä¸ºå•ä¸ªå‘½ä»¤è®¾ç½®å€¼ï¼Œè¯·ä½¿ç”¨ "),a("code",[e._v("RUN <key>=<value> <command>")]),e._v(" ã€‚")])]),e._v(" "),a("h2",{attrs:{id:"æ·»åŠ -ğŸ”—"}},[e._v("æ·»åŠ  "),a("a",{attrs:{href:"#add"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("ADDæœ‰ä¸¤ç§å½¢å¼ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('ADD [--chown=<user>:<group>] <src>... <dest>\nADD [--chown=<user>:<group>] ["<src>",... "<dest>"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("åŒ…å«ç©ºæ ¼çš„è·¯å¾„éœ€è¦åä¸€ç§å½¢å¼ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("--chown")]),e._v(" åŠŸèƒ½ä»…åœ¨ç”¨äºæ„å»ºLinuxå®¹å™¨çš„Dockerfilesä¸Šå—æ”¯æŒï¼Œè€Œåœ¨Windowså®¹å™¨ä¸Šä¸èµ·ä½œç”¨ã€‚ ç”±äºç”¨æˆ·å’Œç»„æ‰€æœ‰æƒæ¦‚å¿µä¸ä¼šåœ¨Linuxå’ŒWindowsä¹‹é—´è½¬æ¢ï¼Œå› æ­¤ä½¿ç”¨ "),a("code",[e._v("/etc/passwd")]),e._v(" å’Œ "),a("code",[e._v("/etc/group")]),e._v(" å°†ç”¨æˆ·åå’Œç»„åè½¬æ¢ä¸ºIDçš„ä½¿ç”¨é™åˆ¶äº†æ­¤åŠŸèƒ½ä»…é€‚ç”¨äºåŸºäºLinux OSçš„å®¹å™¨ã€‚")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("ADD")]),e._v(" æŒ‡ä»¤ä»ä¸­å¤åˆ¶æ–°æ–‡ä»¶ï¼Œç›®å½•æˆ–è¿œç¨‹æ–‡ä»¶URL "),a("code",[e._v("<src>")]),e._v(" ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°è·¯å¾„ä¸­æ˜ åƒçš„æ–‡ä»¶ç³»ç»Ÿä¸­ "),a("code",[e._v("<dest>")]),e._v(" ã€‚")]),e._v(" "),a("p",[a("code",[e._v("<src>")]),e._v(" å¯ä»¥æŒ‡å®š å¤šä¸ª èµ„æºï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬æ˜¯æ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ™å°†å…¶è·¯å¾„è§£é‡Šä¸ºç›¸å¯¹äºæ„å»ºä¸Šä¸‹æ–‡æºçš„è·¯å¾„ã€‚")]),e._v(" "),a("p",[e._v("æ¯ä¸ªéƒ½ "),a("code",[e._v("<src>")]),e._v(" å¯èƒ½åŒ…å«é€šé…ç¬¦ï¼Œå¹¶ä¸”åŒ¹é…å°†ä½¿ç”¨Goçš„ "),a("a",{attrs:{href:"http://golang.org/pkg/path/filepath#Match",target:"_blank",rel:"noopener noreferrer"}},[e._v("filepath.Match"),a("OutboundLink")],1),e._v(" è§„åˆ™å®Œæˆã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("p",[e._v("è¦æ·»åŠ æ‰€æœ‰ä»¥â€œ homâ€å¼€å¤´çš„æ–‡ä»¶ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD hom* /mydir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ "),a("code",[e._v("?")]),e._v(" è¢«æ›¿æ¢ä¸ºä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚â€œ home.txtâ€ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD hom?.txt /mydir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("çš„ "),a("code",[e._v("<dest>")]),e._v(" æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œæˆ–ç›¸å¯¹äºä¸€ä¸ªè·¯å¾„ "),a("code",[e._v("WORKDIR")]),e._v(" ï¼Œåˆ°å…¶ä¸­çš„æºå°†åœ¨ç›®æ ‡å®¹å™¨å†…è¿›è¡Œå¤åˆ¶ã€‚")]),e._v(" "),a("p",[e._v("ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå¹¶å°†â€œ test.txtâ€æ·»åŠ åˆ° "),a("code",[e._v("<WORKDIR>/relativeDir/")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD test.txt relativeDir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è€Œæ­¤ç¤ºä¾‹ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ â€œ test.txtâ€ "),a("code",[e._v("/absoluteDir/")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD test.txt /absoluteDir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("æ·»åŠ åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆä¾‹å¦‚ "),a("code",[e._v("[")]),e._v(" å’Œ "),a("code",[e._v("]")]),e._v(" ï¼‰çš„ æ–‡ä»¶æˆ–ç›®å½•æ—¶ ï¼Œæ‚¨éœ€è¦æŒ‰ç…§Golangè§„åˆ™è½¬ä¹‰é‚£äº›è·¯å¾„ï¼Œä»¥é˜²æ­¢å°†å®ƒä»¬è§†ä¸ºåŒ¹é…æ¨¡å¼ã€‚ ä¾‹å¦‚ï¼Œè¦æ·»åŠ åä¸ºçš„æ–‡ä»¶ "),a("code",[e._v("arr[0].txt")]),e._v(" ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼›")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD arr[[]0].txt /mydir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("é™¤éå¯é€‰ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿—æŒ‡å®šç»™å®šçš„ç”¨æˆ·åï¼Œç»„åæˆ–UID / GIDç»„åˆä»¥è¯·æ±‚å¯¹æ‰€æ·»åŠ å†…å®¹çš„ç‰¹å®šæ‰€æœ‰æƒ ï¼Œå¦åˆ™æ‰€æœ‰æ–°æ–‡ä»¶å’Œç›®å½•çš„UIDå’ŒGIDå‡ä¸º0 ã€‚ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿— çš„æ ¼å¼ å…è®¸ç”¨æˆ·åå’Œç»„åå­—ç¬¦ä¸²æˆ–ç›´æ¥æ•´æ•°UIDå’ŒGIDä»»æ„ç»„åˆã€‚ æä¾›ä¸å¸¦ç»„åçš„ç”¨æˆ·åæˆ–ä¸å¸¦GIDçš„UIDå°†ä½¿ç”¨ä¸GIDç›¸åŒçš„æ•°å­—UIDã€‚ å¦‚æœæä¾›äº†ç”¨æˆ·åæˆ–ç»„åï¼Œåˆ™å°†ä½¿ç”¨å®¹å™¨çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ "),a("code",[e._v("/etc/passwd")]),e._v(" å’Œ "),a("code",[e._v("/etc/group")]),e._v(" æ–‡ä»¶å°†åç§°åˆ†åˆ«è½¬æ¢ä¸ºæ•´æ•°UIDæˆ–GIDã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†è¯¥ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿—çš„ æœ‰æ•ˆå®šä¹‰ ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD --chown=55:mygroup files* /somedir/\nADD --chown=bin files* /somedir/\nADD --chown=1 files* /somedir/\nADD --chown=10:11 files* /somedir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("å¦‚æœå®¹å™¨æ ¹æ–‡ä»¶ç³»ç»Ÿä¸åŒ…å« "),a("code",[e._v("/etc/passwd")]),e._v(" æˆ– "),a("code",[e._v("/etc/group")]),e._v(" æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿— ä¸­ä½¿ç”¨äº†ç”¨æˆ·åæˆ–ç»„å ï¼Œåˆ™è¯¥æ„å»ºå°†åœ¨è¯¥ "),a("code",[e._v("ADD")]),e._v(" æ“ä½œ ä¸Šå¤±è´¥ ã€‚ ä½¿ç”¨æ•°å­—IDä¸éœ€è¦æŸ¥æ‰¾ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºå®¹å™¨æ ¹æ–‡ä»¶ç³»ç»Ÿå†…å®¹ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯è¿œç¨‹æ–‡ä»¶URLï¼Œåˆ™ç›®æ ‡å°†å…·æœ‰600çš„æƒé™ã€‚å¦‚æœè¦æ£€ç´¢çš„è¿œç¨‹æ–‡ä»¶å…·æœ‰HTTP "),a("code",[e._v("Last-Modified")]),e._v(" æ ‡å¤´ï¼Œåˆ™è¯¥æ ‡å¤´ä¸­çš„æ—¶é—´æˆ³å°†ç”¨äºè®¾ç½® "),a("code",[e._v("mtime")]),e._v(" ç›®æ ‡æ–‡ä»¶ä¸Šçš„ æ—¶é—´æˆ³ ã€‚ ä½†æ˜¯ï¼Œå°±åƒåœ¨æœŸé—´å¤„ç†çš„ä»»ä½•å…¶ä»–æ–‡ä»¶ä¸€æ · "),a("code",[e._v("ADD")]),e._v(" ï¼Œ "),a("code",[e._v("mtime")]),e._v(" è¯¥æ–‡ä»¶æ˜¯å¦å·²æ›´æ”¹ä»¥åŠæ˜¯å¦åº”æ›´æ–°ç¼“å­˜çš„ç¡®å®šå°†ä¸åŒ…æ‹¬åœ¨å†…ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("å¦‚æœé€šè¿‡ä¼ é€’ "),a("code",[e._v("Dockerfile")]),e._v(" STDINï¼ˆ "),a("code",[e._v("docker build - < somefile")]),e._v(" ï¼‰è¿›è¡Œæ„å»ºï¼Œåˆ™æ²¡æœ‰æ„å»ºä¸Šä¸‹æ–‡ï¼Œå› æ­¤ "),a("code",[e._v("Dockerfile")]),e._v(" åªèƒ½åŒ…å«åŸºäºURLçš„ "),a("code",[e._v("ADD")]),e._v(" æŒ‡ä»¤ã€‚ æ‚¨è¿˜å¯ä»¥é€šè¿‡STDINï¼šï¼ˆ "),a("code",[e._v("docker build - < archive.tar.gz")]),e._v(" ï¼‰ ä¼ é€’å‹ç¼©çš„å½’æ¡£æ–‡ä»¶ï¼Œå½’æ¡£æ–‡ä»¶ "),a("code",[e._v("Dockerfile")]),e._v(" æ ¹ç›®å½•ä¸­çš„ï¼Œå½’æ¡£æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†å°†ç”¨ä½œæ„å»ºçš„ä¸Šä¸‹æ–‡ã€‚")])]),e._v(" "),a("p",[e._v("å¦‚æœæ‚¨çš„ç½‘å€æ–‡ä»¶éƒ½ä½¿ç”¨è®¤è¯ä¿æŠ¤ï¼Œåˆ™éœ€è¦ä½¿ç”¨ "),a("code",[e._v("RUN wget")]),e._v(" ï¼Œ "),a("code",[e._v("RUN curl")]),e._v(" æˆ–ä½œä¸ºä»å®¹å™¨å†…ä½¿ç”¨å¦ä¸€ç§å·¥å…· "),a("code",[e._v("ADD")]),e._v(" æŒ‡ä»¤ä¸æ”¯æŒè®¤è¯ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[a("code",[e._v("ADD")]),e._v(" å¦‚æœDockerfileçš„å†…å®¹ "),a("code",[e._v("<src>")]),e._v(" å·²æ›´æ”¹ ï¼Œåˆ™ç¬¬ä¸€ä¸ªé‡åˆ°çš„ æŒ‡ä»¤å°†ä½¿Dockerfileä¸­æ‰€æœ‰åç»­æŒ‡ä»¤çš„ç¼“å­˜æ— æ•ˆ ã€‚ è¿™åŒ…æ‹¬ä½¿é«˜é€Ÿç¼“å­˜ä¸­çš„ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤ æ— æ•ˆ ã€‚ æœ‰å…³ æ›´å¤šä¿¡æ¯ï¼Œ è¯·å‚è§ "),a("a",{attrs:{href:"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#leverage-build-cache",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("Dockerfile")]),e._v("æœ€ä½³å®è·µæŒ‡å—â€“åˆ©ç”¨æ„å»ºç¼“å­˜"),a("OutboundLink")],1),e._v(" ã€‚")])]),e._v(" "),a("p",[a("code",[e._v("ADD")]),e._v(" éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("è¯¥ "),a("code",[e._v("<src>")]),e._v(" è·¯å¾„å¿…é¡»æ˜¯å†…éƒ¨ "),a("em",[e._v("è¯­å¢ƒ")]),e._v(" çš„æ„å»º; æ‚¨ä¸èƒ½è¿™æ ·åš "),a("code",[e._v("ADD ../something /something")]),e._v(" ï¼Œå› ä¸ºaçš„ç¬¬ä¸€æ­¥ "),a("code",[e._v("docker build")]),e._v(" æ˜¯å°†ä¸Šä¸‹æ–‡ç›®å½•ï¼ˆå’Œå­ç›®å½•ï¼‰å‘é€åˆ°dockerå®ˆæŠ¤ç¨‹åºã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯URLï¼Œ "),a("code",[e._v("<dest>")]),e._v(" å¹¶ä¸”ä¸ä»¥æ–œæ ç»“å°¾ï¼Œåˆ™ä»URLä¸‹è½½æ–‡ä»¶å¹¶å°†å…¶å¤åˆ¶åˆ° "),a("code",[e._v("<dest>")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯URLå¹¶ "),a("code",[e._v("<dest>")]),e._v(" ä»¥æ–œæ ç»“å°¾ï¼Œåˆ™ä»URLæ¨æ–­æ–‡ä»¶åï¼Œç„¶åå°†æ–‡ä»¶ä¸‹è½½åˆ° "),a("code",[e._v("<dest>/<filename>")]),e._v(" ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("ADD http://example.com/foobar /")]),e._v(" å°†åˆ›å»ºæ–‡ä»¶ "),a("code",[e._v("/foobar")]),e._v(" ã€‚ è¯¥URLå¿…é¡»å…·æœ‰éå¹³å‡¡çš„è·¯å¾„ï¼Œä»¥ä¾¿åœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥å‘ç°é€‚å½“çš„æ–‡ä»¶åï¼ˆ "),a("code",[e._v("http://example.com")]),e._v(" å°†ä¸èµ·ä½œç”¨ï¼‰ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯ç›®å½•ï¼Œåˆ™å°†å¤åˆ¶ç›®å½•çš„æ•´ä¸ªå†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ã€‚")])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("è¯¥ç›®å½•æœ¬èº«ä¸è¢«å¤åˆ¶ï¼Œä»…è¢«å¤åˆ¶å…¶å†…å®¹ã€‚")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯ä»¥ å…¬è®¤çš„å‹ç¼©æ ¼å¼ï¼ˆèº«ä»½ï¼Œgzipï¼Œbzip2æˆ–xzï¼‰ä½œä¸º "),a("em",[e._v("æœ¬åœ°")]),e._v(" tarå½’æ¡£æ–‡ä»¶ï¼Œåˆ™å°†å…¶è§£å‹ç¼©ä¸ºç›®å½•ã€‚ æ¥è‡ª "),a("em",[e._v("è¿œç¨‹")]),e._v(" URLçš„ èµ„æº "),a("strong",[e._v("ä¸ä¼šè¢«")]),e._v(" è§£å‹ç¼©ã€‚ å¤åˆ¶æˆ–è§£å‹ç¼©ç›®å½•æ—¶ï¼Œå…¶è¡Œä¸ºä¸ç›¸åŒ "),a("code",[e._v("tar -x")]),e._v(" ï¼Œç»“æœæ˜¯ä»¥ä¸‹å„é¡¹çš„å¹¶é›†ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("ç›®æ ‡è·¯å¾„ä¸Šå­˜åœ¨çš„ä»»ä½•å†…å®¹")]),e._v(" "),a("li",[e._v("æºä»£ç æ ‘çš„å†…å®¹ï¼Œå·²è§£å†³å†²çªï¼Œè€Œé€‰æ‹©äº†â€œ 2â€ã€‚ åœ¨é€ä¸ªæ–‡ä»¶çš„åŸºç¡€ä¸Šã€‚")])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("æ˜¯å¦ä»…å°†æ–‡ä»¶å†…å®¹è€Œä¸æ˜¯æ–‡ä»¶åç¡®å®šä¸ºæ–‡ä»¶æ˜¯å…¬è®¤çš„å‹ç¼©æ ¼å¼ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç©ºæ–‡ä»¶æ°å¥½ä»¥ "),a("code",[e._v(".tar.gz")]),e._v(" è¯¥ æ–‡ä»¶ç»“å°¾ï¼Œ åˆ™ä¸ä¼šè¢«è¯†åˆ«ä¸ºå‹ç¼©æ–‡ä»¶ï¼Œå¹¶ä¸” "),a("strong",[e._v("ä¸ä¼š")]),e._v(" ç”Ÿæˆä»»ä½•ç±»å‹çš„è§£å‹ç¼©é”™è¯¯æ¶ˆæ¯ï¼Œè€Œæ˜¯ä¼šå°†æ–‡ä»¶ç®€å•åœ°å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®ã€‚")])])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯ä»»ä½•å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œåˆ™å°†å…¶åŠå…¶å…ƒæ•°æ®ä¸€èµ·å•ç‹¬å¤åˆ¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ "),a("code",[e._v("<dest>")]),e._v(" ä»¥æ–œæ ç»“å°¾ "),a("code",[e._v("/")]),e._v(" ï¼Œå®ƒå°†è¢«è§†ä¸ºç›®å½•ï¼Œå…¶å†…å®¹ "),a("code",[e._v("<src>")]),e._v(" å°†å†™å…¥ "),a("code",[e._v("<dest>/base(<src>)")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" ç›´æ¥æˆ–ç”±äºä½¿ç”¨é€šé…ç¬¦è€ŒæŒ‡å®šäº† å¤šä¸ª èµ„æºï¼Œåˆ™è¯¥èµ„æº "),a("code",[e._v("<dest>")]),e._v(" å¿…é¡»æ˜¯ç›®å½•ï¼Œå¹¶ä¸”å¿…é¡»ä»¥æ–œæ ç»“å°¾ "),a("code",[e._v("/")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<dest>")]),e._v(" ä¸ä»¥æ–œæ ç»“å°¾ï¼Œåˆ™å°†å…¶è§†ä¸ºå¸¸è§„æ–‡ä»¶ï¼Œå¹¶å°†å…¶å†…å®¹ "),a("code",[e._v("<src>")]),e._v(" å†™å…¥ "),a("code",[e._v("<dest>")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<dest>")]),e._v(" ä¸å­˜åœ¨ï¼Œå®ƒå°†ä¸è·¯å¾„ä¸­æ‰€æœ‰ç¼ºå°‘çš„ç›®å½•ä¸€èµ·åˆ›å»ºã€‚")])])]),e._v(" "),a("h2",{attrs:{id:"å¤åˆ¶-ğŸ”—"}},[e._v("å¤åˆ¶ "),a("a",{attrs:{href:"#copy"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("COPYæœ‰ä¸¤ç§å½¢å¼ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('COPY [--chown=<user>:<group>] <src>... <dest>\nCOPY [--chown=<user>:<group>] ["<src>",... "<dest>"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("åŒ…å«ç©ºæ ¼çš„è·¯å¾„éœ€è¦åä¸€ç§å½¢å¼")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("--chown")]),e._v(" åŠŸèƒ½ä»…åœ¨ç”¨äºæ„å»ºLinuxå®¹å™¨çš„Dockerfilesä¸Šå—æ”¯æŒï¼Œè€Œåœ¨Windowså®¹å™¨ä¸Šä¸èµ·ä½œç”¨ã€‚ ç”±äºç”¨æˆ·å’Œç»„æ‰€æœ‰æƒæ¦‚å¿µä¸ä¼šåœ¨Linuxå’ŒWindowsä¹‹é—´è½¬æ¢ï¼Œå› æ­¤ä½¿ç”¨ "),a("code",[e._v("/etc/passwd")]),e._v(" å’Œ "),a("code",[e._v("/etc/group")]),e._v(" å°†ç”¨æˆ·åå’Œç»„åè½¬æ¢ä¸ºIDçš„ä½¿ç”¨é™åˆ¶äº†æ­¤åŠŸèƒ½ä»…é€‚ç”¨äºåŸºäºLinux OSçš„å®¹å™¨ã€‚")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("COPY")]),e._v(" æŒ‡ä»¤ä»ä¸­å¤åˆ¶æ–°æ–‡ä»¶æˆ–ç›®å½• "),a("code",[e._v("<src>")]),e._v(" ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°è·¯å¾„ä¸­å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­ "),a("code",[e._v("<dest>")]),e._v(" ã€‚")]),e._v(" "),a("p",[a("code",[e._v("<src>")]),e._v(" å¯ä»¥æŒ‡å®š å¤šä¸ª èµ„æºï¼Œä½†æ˜¯æ–‡ä»¶å’Œç›®å½•çš„è·¯å¾„å°†è¢«è§£é‡Šä¸ºç›¸å¯¹äºæ„å»ºä¸Šä¸‹æ–‡çš„æºã€‚")]),e._v(" "),a("p",[e._v("æ¯ä¸ªéƒ½ "),a("code",[e._v("<src>")]),e._v(" å¯èƒ½åŒ…å«é€šé…ç¬¦ï¼Œå¹¶ä¸”åŒ¹é…å°†ä½¿ç”¨Goçš„ "),a("a",{attrs:{href:"http://golang.org/pkg/path/filepath#Match",target:"_blank",rel:"noopener noreferrer"}},[e._v("filepath.Match"),a("OutboundLink")],1),e._v(" è§„åˆ™å®Œæˆã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("p",[e._v("è¦æ·»åŠ æ‰€æœ‰ä»¥â€œ homâ€å¼€å¤´çš„æ–‡ä»¶ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("COPY hom* /mydir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ "),a("code",[e._v("?")]),e._v(" è¢«æ›¿æ¢ä¸ºä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚â€œ home.txtâ€ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("COPY hom?.txt /mydir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("çš„ "),a("code",[e._v("<dest>")]),e._v(" æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œæˆ–ç›¸å¯¹äºä¸€ä¸ªè·¯å¾„ "),a("code",[e._v("WORKDIR")]),e._v(" ï¼Œåˆ°å…¶ä¸­çš„æºå°†åœ¨ç›®æ ‡å®¹å™¨å†…è¿›è¡Œå¤åˆ¶ã€‚")]),e._v(" "),a("p",[e._v("ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå¹¶å°†â€œ test.txtâ€æ·»åŠ åˆ° "),a("code",[e._v("<WORKDIR>/relativeDir/")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("COPY test.txt relativeDir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è€Œæ­¤ç¤ºä¾‹ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ â€œ test.txtâ€ "),a("code",[e._v("/absoluteDir/")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("COPY test.txt /absoluteDir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å¤åˆ¶åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆä¾‹å¦‚ "),a("code",[e._v("[")]),e._v(" å’Œ "),a("code",[e._v("]")]),e._v(" ï¼‰çš„ æ–‡ä»¶æˆ–ç›®å½•æ—¶ ï¼Œæ‚¨éœ€è¦æŒ‰ç…§Golangè§„åˆ™è½¬ä¹‰é‚£äº›è·¯å¾„ï¼Œä»¥é˜²æ­¢å°†å®ƒä»¬è§†ä¸ºåŒ¹é…æ¨¡å¼ã€‚ ä¾‹å¦‚ï¼Œè¦æ·»åŠ åä¸ºçš„æ–‡ä»¶ "),a("code",[e._v("arr[0].txt")]),e._v(" ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼›")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ADD arr[[]0].txt /mydir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("é™¤éå¯é€‰ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿—æŒ‡å®šç»™å®šçš„ç”¨æˆ·åï¼Œç»„åæˆ–UID / GIDç»„åˆä»¥è¯·æ±‚å¯¹å¤åˆ¶å†…å®¹çš„ç‰¹å®šæ‰€æœ‰æƒ ï¼Œå¦åˆ™æ‰€æœ‰æ–°æ–‡ä»¶å’Œç›®å½•çš„UIDå’ŒGIDå‡ä¸º0 ã€‚ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿— çš„æ ¼å¼ å…è®¸ç”¨æˆ·åå’Œç»„åå­—ç¬¦ä¸²æˆ–ç›´æ¥æ•´æ•°UIDå’ŒGIDä»»æ„ç»„åˆã€‚ æä¾›ä¸å¸¦ç»„åçš„ç”¨æˆ·åæˆ–ä¸å¸¦GIDçš„UIDå°†ä½¿ç”¨ä¸GIDç›¸åŒçš„æ•°å­—UIDã€‚ å¦‚æœæä¾›äº†ç”¨æˆ·åæˆ–ç»„åï¼Œåˆ™å°†ä½¿ç”¨å®¹å™¨çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ "),a("code",[e._v("/etc/passwd")]),e._v(" å’Œ "),a("code",[e._v("/etc/group")]),e._v(" æ–‡ä»¶å°†åç§°åˆ†åˆ«è½¬æ¢ä¸ºæ•´æ•°UIDæˆ–GIDã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†è¯¥ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿—çš„ æœ‰æ•ˆå®šä¹‰ ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("COPY --chown=55:mygroup files* /somedir/\nCOPY --chown=bin files* /somedir/\nCOPY --chown=1 files* /somedir/\nCOPY --chown=10:11 files* /somedir/\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("å¦‚æœå®¹å™¨æ ¹æ–‡ä»¶ç³»ç»Ÿä¸åŒ…å« "),a("code",[e._v("/etc/passwd")]),e._v(" æˆ– "),a("code",[e._v("/etc/group")]),e._v(" æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ "),a("code",[e._v("--chown")]),e._v(" æ ‡å¿— ä¸­ä½¿ç”¨äº†ç”¨æˆ·åæˆ–ç»„å ï¼Œåˆ™è¯¥æ„å»ºå°†åœ¨è¯¥ "),a("code",[e._v("COPY")]),e._v(" æ“ä½œ ä¸Šå¤±è´¥ ã€‚ ä½¿ç”¨æ•°å­—IDä¸éœ€è¦æŸ¥æ‰¾ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºå®¹å™¨æ ¹æ–‡ä»¶ç³»ç»Ÿå†…å®¹ã€‚")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("å¦‚æœä½¿ç”¨STDINï¼ˆ "),a("code",[e._v("docker build - < somefile")]),e._v(" ï¼‰è¿›è¡Œ æ„å»º ï¼Œåˆ™æ²¡æœ‰æ„å»ºä¸Šä¸‹æ–‡ï¼Œå› æ­¤ "),a("code",[e._v("COPY")]),e._v(" æ— æ³•ä½¿ç”¨ã€‚")])]),e._v(" "),a("p",[e._v("ï¼ˆå¯é€‰ï¼‰ "),a("code",[e._v("COPY")]),e._v(" æ¥å—ä¸€ä¸ªæ ‡å¿— "),a("code",[e._v("--from=<name|index>")]),e._v(" ï¼Œ è¯¥æ ‡å¿— å¯ç”¨äºå°†æºä½ç½®è®¾ç½®ä¸º "),a("code",[e._v("FROM .. AS <name>")]),e._v(" å°†ç”¨äºä»£æ›¿ç”¨æˆ·å‘é€çš„æ„å»ºä¸Šä¸‹æ–‡ çš„ä¸Šä¸€ä¸ªæ„å»ºé˜¶æ®µï¼ˆä½¿ç”¨åˆ›å»º ï¼‰ã€‚ è¯¥æ ‡å¿—è¿˜æ¥å—ä¸ºä»¥ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤ å¼€å¤´çš„æ‰€æœ‰å…ˆå‰æ„å»ºé˜¶æ®µåˆ†é…çš„æ•°å­—ç´¢å¼• ã€‚ å¦‚æœæ‰¾ä¸åˆ°å…·æœ‰æŒ‡å®šåç§°çš„æ„å»ºé˜¶æ®µï¼Œåˆ™å°è¯•ä½¿ç”¨å…·æœ‰ç›¸åŒåç§°çš„æ˜ åƒä»£æ›¿ã€‚")]),e._v(" "),a("p",[a("code",[e._v("COPY")]),e._v(" éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("è¯¥ "),a("code",[e._v("<src>")]),e._v(" è·¯å¾„å¿…é¡»æ˜¯å†…éƒ¨ "),a("em",[e._v("è¯­å¢ƒ")]),e._v(" çš„æ„å»º; æ‚¨ä¸èƒ½è¿™æ ·åš "),a("code",[e._v("COPY ../something /something")]),e._v(" ï¼Œå› ä¸ºaçš„ç¬¬ä¸€æ­¥ "),a("code",[e._v("docker build")]),e._v(" æ˜¯å°†ä¸Šä¸‹æ–‡ç›®å½•ï¼ˆå’Œå­ç›®å½•ï¼‰å‘é€åˆ°dockerå®ˆæŠ¤ç¨‹åºã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯ç›®å½•ï¼Œåˆ™å°†å¤åˆ¶ç›®å½•çš„æ•´ä¸ªå†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ã€‚")])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("è¯¥ç›®å½•æœ¬èº«ä¸è¢«å¤åˆ¶ï¼Œä»…è¢«å¤åˆ¶å…¶å†…å®¹ã€‚")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" æ˜¯ä»»ä½•å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œåˆ™å°†å…¶åŠå…¶å…ƒæ•°æ®ä¸€èµ·å•ç‹¬å¤åˆ¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ "),a("code",[e._v("<dest>")]),e._v(" ä»¥æ–œæ ç»“å°¾ "),a("code",[e._v("/")]),e._v(" ï¼Œå®ƒå°†è¢«è§†ä¸ºç›®å½•ï¼Œå…¶å†…å®¹ "),a("code",[e._v("<src>")]),e._v(" å°†å†™å…¥ "),a("code",[e._v("<dest>/base(<src>)")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<src>")]),e._v(" ç›´æ¥æˆ–ç”±äºä½¿ç”¨é€šé…ç¬¦è€ŒæŒ‡å®šäº† å¤šä¸ª èµ„æºï¼Œåˆ™è¯¥èµ„æº "),a("code",[e._v("<dest>")]),e._v(" å¿…é¡»æ˜¯ç›®å½•ï¼Œå¹¶ä¸”å¿…é¡»ä»¥æ–œæ ç»“å°¾ "),a("code",[e._v("/")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<dest>")]),e._v(" ä¸ä»¥æ–œæ ç»“å°¾ï¼Œåˆ™å°†å…¶è§†ä¸ºå¸¸è§„æ–‡ä»¶ï¼Œå¹¶å°†å…¶å†…å®¹ "),a("code",[e._v("<src>")]),e._v(" å†™å…¥ "),a("code",[e._v("<dest>")]),e._v(" ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœ "),a("code",[e._v("<dest>")]),e._v(" ä¸å­˜åœ¨ï¼Œå®ƒå°†ä¸è·¯å¾„ä¸­æ‰€æœ‰ç¼ºå°‘çš„ç›®å½•ä¸€èµ·åˆ›å»ºã€‚")])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[a("code",[e._v("COPY")]),e._v(" å¦‚æœDockerfileçš„å†…å®¹ "),a("code",[e._v("<src>")]),e._v(" å·²æ›´æ”¹ ï¼Œåˆ™ç¬¬ä¸€ä¸ªé‡åˆ°çš„ æŒ‡ä»¤å°†ä½¿Dockerfileä¸­æ‰€æœ‰åç»­æŒ‡ä»¤çš„ç¼“å­˜æ— æ•ˆ ã€‚ è¿™åŒ…æ‹¬ä½¿é«˜é€Ÿç¼“å­˜ä¸­çš„ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤ æ— æ•ˆ ã€‚ æœ‰å…³ æ›´å¤šä¿¡æ¯ï¼Œ è¯·å‚è§ "),a("a",{attrs:{href:"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#leverage-build-cache",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("Dockerfile")]),e._v("æœ€ä½³å®è·µæŒ‡å—â€“åˆ©ç”¨æ„å»ºç¼“å­˜"),a("OutboundLink")],1),e._v(" ã€‚")])]),e._v(" "),a("h2",{attrs:{id:"å…¥å£ç‚¹-ğŸ”—"}},[e._v("å…¥å£ç‚¹ "),a("a",{attrs:{href:"#entrypoint"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("ENTRYPOINTæœ‰ä¸¤ç§å½¢å¼ï¼š")]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("EXEC")]),e._v(" çš„å½¢å¼ï¼Œè¿™æ˜¯ä¼˜é€‰çš„å½¢å¼ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('ENTRYPOINT ["executable", "param1", "param2"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("em",[e._v("å£³")]),e._v(" å½¢å¼ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ENTRYPOINT command param1 param2\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("An "),a("code",[e._v("ENTRYPOINT")]),e._v(" å…è®¸æ‚¨é…ç½®å°†ä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œçš„å®¹å™¨ã€‚")]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä»¥å…¶é»˜è®¤å†…å®¹å¯åŠ¨nginxï¼Œç›‘å¬ç«¯å£80ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker run -i -t --rm -p 80:80 nginx\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å‘½ä»¤è¡Œå‚æ•°to "),a("code",[e._v("docker run <image>")]),e._v(" å°†ä»¥ "),a("em",[e._v("exec")]),e._v(" å½¢å¼ é™„åŠ åœ¨æ‰€æœ‰å…ƒç´ ä¹‹å "),a("code",[e._v("ENTRYPOINT")]),e._v(" ï¼Œå¹¶å°†è¦†ç›–ä½¿ç”¨æŒ‡å®šçš„æ‰€æœ‰å…ƒç´  "),a("code",[e._v("CMD")]),e._v(" ã€‚ è¿™å…è®¸å°†å‚æ•°ä¼ é€’ç»™å…¥å£ç‚¹ï¼Œå³ï¼Œ "),a("code",[e._v("docker run <image> -d")]),e._v(" å°† "),a("code",[e._v("-d")]),e._v(" å‚æ•° ä¼ é€’ ç»™å…¥å£ç‚¹ã€‚ æ‚¨å¯ä»¥ "),a("code",[e._v("ENTRYPOINT")]),e._v(" ä½¿ç”¨è¯¥ "),a("code",[e._v("docker run --entrypoint")]),e._v(" æ ‡å¿— è¦†ç›– æŒ‡ä»¤ ã€‚")]),e._v(" "),a("p",[e._v("æ‰€è¿° "),a("em",[e._v("å£³")]),e._v(" å½¢å¼é˜²æ­¢ä»»ä½• "),a("code",[e._v("CMD")]),e._v(" æˆ– "),a("code",[e._v("run")]),e._v(" è¢«ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œä½†å…·æœ‰çš„ç¼ºç‚¹æ˜¯ä½  "),a("code",[e._v("ENTRYPOINT")]),e._v(" å°†å¼€å§‹ä½œä¸ºçš„å­å‘½ä»¤ "),a("code",[e._v("/bin/sh -c")]),e._v(" ï¼Œå…¶ä¸é€šè¿‡ä¿¡å·ã€‚ è¿™æ„å‘³ç€å¯æ‰§è¡Œæ–‡ä»¶å°†ä¸æ˜¯å®¹å™¨çš„ "),a("code",[e._v("PID 1")]),e._v(" -å¹¶ä¸”å°† "),a("em",[e._v("ä¸ä¼š")]),e._v(" æ¥æ”¶Unixä¿¡å·-å› æ­¤æ‚¨çš„å¯æ‰§è¡Œæ–‡ä»¶å°†ä¸ä¼š "),a("code",[e._v("SIGTERM")]),e._v(" ä» æ¥æ”¶ åˆ° "),a("code",[e._v("docker stop <container>")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("åªæœ‰ä¸­çš„æœ€åä¸€æ¡ "),a("code",[e._v("ENTRYPOINT")]),e._v(" æŒ‡ä»¤ "),a("code",[e._v("Dockerfile")]),e._v(" æ‰ä¼šç”Ÿæ•ˆã€‚")]),e._v(" "),a("h3",{attrs:{id:"æ‰§è¡Œè¡¨æ ¼entrypointç¤ºä¾‹-ğŸ”—"}},[e._v("æ‰§è¡Œè¡¨æ ¼ENTRYPOINTç¤ºä¾‹ "),a("a",{attrs:{href:"#exec-form-entrypoint-example"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("æ‚¨å¯ä»¥ä½¿ç”¨ "),a("em",[e._v("exec")]),e._v(" å½¢å¼çš„ "),a("code",[e._v("ENTRYPOINT")]),e._v(" æ¥è®¾ç½®ç›¸å½“ç¨³å®šçš„é»˜è®¤å‘½ä»¤å’Œå‚æ•°ï¼Œç„¶åä½¿ç”¨è¿™ä¸¤ç§å½¢å¼çš„ "),a("code",[e._v("CMD")]),e._v(" æ¥è®¾ç½®æ›´å¯èƒ½è¢«æ›´æ”¹çš„å…¶ä»–é»˜è®¤å€¼ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM ubuntu\nENTRYPOINT ["top", "-b"]\nCMD ["-c"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("è¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥çœ‹åˆ°è¿™ "),a("code",[e._v("top")]),e._v(" æ˜¯å”¯ä¸€çš„è¿‡ç¨‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker run -it --rm --name test  top -H\n\ntop - 08:25:00 up  7:27,  0 users,  load average: 0.00, 0.01, 0.05\nThreads:   1 total,   1 running,   0 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.1 us,  0.1 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nKiB Mem:   2056668 total,  1616832 used,   439836 free,    99352 buffers\nKiB Swap:  1441840 total,        0 used,  1441840 free.  1324440 cached Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND\n    1 root      20   0   19744   2336   2080 R  0.0  0.1   0:00.04 top\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("p",[e._v("è¦è¿›ä¸€æ­¥æ£€æŸ¥ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ "),a("code",[e._v("docker exec")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker exec -it test ps aux\n\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  2.6  0.1  19752  2352 ?        Ss+  08:24   0:00 top -b -H\nroot         7  0.0  0.1  15572  2164 ?        R+   08:25   0:00 ps aux\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼˜é›…åœ°è¯·æ±‚ "),a("code",[e._v("top")]),e._v(" å…³é—­ "),a("code",[e._v("docker stop test")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ä¸‹é¢ "),a("code",[e._v("Dockerfile")]),e._v(" æ˜¾ç¤ºäº†ä½¿ç”¨ "),a("code",[e._v("ENTRYPOINT")]),e._v(" æ¥åœ¨å‰å°è¿è¡ŒApacheï¼ˆå³as "),a("code",[e._v("PID 1")]),e._v(" ï¼‰ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM debian:stable\nRUN apt-get update && apt-get install -y --force-yes apache2\nEXPOSE 80 443\nVOLUME ["/var/www", "/var/log/apache2", "/etc/apache2"]\nENTRYPOINT ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("å¦‚æœéœ€è¦ä¸ºå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ç¼–å†™å¯åŠ¨è„šæœ¬ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("exec")]),e._v(" å’Œ "),a("code",[e._v("gosu")]),e._v(" å‘½ä»¤ ç¡®ä¿æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ¥æ”¶Unixä¿¡å· ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('#!/usr/bin/env bash\nset -e\n\nif [ "$1" = \'postgres\' ]; then\n    chown -R postgres "$PGDATA"\n\n    if [ -z "$(ls -A "$PGDATA")" ]; then\n        gosu postgres initdb\n    fi\n\n    exec gosu postgres "$@"\nfi\n\nexec "$@"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br")])]),a("p",[e._v("æœ€åï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨å…³é—­æ—¶è¿›è¡Œä¸€äº›é¢å¤–çš„æ¸…ç†ï¼ˆæˆ–ä¸å…¶ä»–å®¹å™¨é€šä¿¡ï¼‰ï¼Œæˆ–è€…åè°ƒå¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåˆ™å¯èƒ½éœ€è¦ç¡®ä¿ "),a("code",[e._v("ENTRYPOINT")]),e._v(" è„šæœ¬æ¥æ”¶Unixä¿¡å·ï¼Œå°†å…¶ä¼ é€’ï¼Œç„¶åæ‰§è¡Œä¸€äº›æ›´å¤šçš„å·¥ä½œï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('#!/bin/sh\n# Note: I\'ve written this using sh so it works in the busybox container too\n\n# USE the trap if you need to also do manual cleanup after the service is stopped,\n#     or need to start multiple services in the one container\ntrap "echo TRAPed signal" HUP INT QUIT TERM\n\n# start service in background here\n/usr/sbin/apachectl start\n\necho "[hit enter key to exit] or run \'docker stop <container>\'"\nread\n\n# stop service and clean up here\necho "stopping apache"\n/usr/sbin/apachectl stop\n\necho "exited $0"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br")])]),a("p",[e._v("å¦‚æœä½¿ç”¨è¿è¡Œè¯¥æ˜ åƒ "),a("code",[e._v("docker run -it --rm -p 80:80 --name test apache")]),e._v(" ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("docker exec")]),e._v(" æˆ– æ¥æ£€æŸ¥å®¹å™¨çš„è¿›ç¨‹ "),a("code",[e._v("docker top")]),e._v(" ï¼Œç„¶åè¦æ±‚è„šæœ¬åœæ­¢Apacheï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker exec -it test ps aux\n\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.1  0.0   4448   692 ?        Ss+  00:42   0:00 /bin/sh /run.sh 123 cmd cmd2\nroot        19  0.0  0.2  71304  4440 ?        Ss   00:42   0:00 /usr/sbin/apache2 -k start\nwww-data    20  0.2  0.2 360468  6004 ?        Sl   00:42   0:00 /usr/sbin/apache2 -k start\nwww-data    21  0.2  0.2 360468  6000 ?        Sl   00:42   0:00 /usr/sbin/apache2 -k start\nroot        81  0.0  0.1  15572  2140 ?        R+   00:44   0:00 ps aux\n\n$ docker top test\n\nPID                 USER                COMMAND\n10035               root                {run.sh} /bin/sh /run.sh 123 cmd cmd2\n10054               root                /usr/sbin/apache2 -k start\n10055               33                  /usr/sbin/apache2 -k start\n10056               33                  /usr/sbin/apache2 -k start\n\n$ /usr/bin/time docker stop test\n\ntest\nreal\t0m 0.27s\nuser\t0m 0.03s\nsys\t0m 0.03s\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br")])]),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("æ‚¨å¯ä»¥ä½¿ç”¨è¦†ç›– "),a("code",[e._v("ENTRYPOINT")]),e._v(" è®¾ç½® "),a("code",[e._v("--entrypoint")]),e._v(" ï¼Œä½†è¿™åªèƒ½å°†äºŒè¿›åˆ¶æ–‡ä»¶è®¾ç½®ä¸º "),a("em",[e._v("exec")]),e._v(" ï¼ˆ "),a("code",[e._v("sh -c")]),e._v(" å°†ä¸ä½¿ç”¨ï¼‰ã€‚")])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("åœ¨ "),a("em",[e._v("EXEC")]),e._v(" å½¢å¼è¢«è§£æä¸ºä¸€ä¸ªJSONé˜µåˆ—ï¼Œè¿™æ„å‘³ç€å¿…é¡»ä½¿ç”¨åŒå¼•å·ï¼ˆâ€œï¼‰å‘¨å›´çš„è¯ä¸å•å¼•å·ï¼ˆ'ï¼‰ã€‚")])]),e._v(" "),a("p",[e._v("ä¸ "),a("em",[e._v("shell")]),e._v(" è¡¨å• ä¸åŒ ï¼Œ "),a("em",[e._v("exec")]),e._v(" è¡¨å•ä¸ä¼šè°ƒç”¨å‘½ä»¤shellã€‚ è¿™æ„å‘³ç€ä¸ä¼šå‘ç”Ÿå¸¸è§„çš„å¤–å£³å¤„ç†ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v('ENTRYPOINT [ "echo", "$HOME" ]')]),e._v(" å°†ä¸ä¼šå¯¹è¿›è¡Œå˜é‡æ›¿æ¢ "),a("code",[e._v("$HOME")]),e._v(" ã€‚ å¦‚æœè¦è¿›è¡Œshellå¤„ç†ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),a("em",[e._v("shell")]),e._v(" å½¢å¼æˆ–ç›´æ¥æ‰§è¡Œshellï¼Œä¾‹å¦‚ï¼š "),a("code",[e._v('ENTRYPOINT [ "sh", "-c", "echo $HOME" ]')]),e._v(" ã€‚ å½“ä½¿ç”¨execè¡¨å•å¹¶ç›´æ¥æ‰§è¡Œshellæ—¶ï¼ˆä¾‹å¦‚åœ¨shellè¡¨å•ä¸­ï¼‰ï¼Œæ˜¯ç”±shellè¿›è¡Œç¯å¢ƒå˜é‡æ‰©å±•ï¼Œè€Œä¸æ˜¯dockerã€‚")]),e._v(" "),a("h3",{attrs:{id:"å¤–å£³å½¢å¼entrypointç¤ºä¾‹-example"}},[e._v("å¤–å£³å½¢å¼ENTRYPOINTç¤ºä¾‹ "),a("a",{attrs:{href:"#shell-form-entrypoint-example"}},[e._v("example")])]),e._v(" "),a("p",[e._v("æ‚¨å¯ä»¥ä¸ºæŒ‡å®šä¸€ä¸ªçº¯å­—ç¬¦ä¸² "),a("code",[e._v("ENTRYPOINT")]),e._v(" ï¼Œå®ƒå°†åœ¨ä¸­æ‰§è¡Œ "),a("code",[e._v("/bin/sh -c")]),e._v(" ã€‚ è¿™ç§å½¢å¼å°†ä½¿ç”¨å¤–å£³å¤„ç†æ¥æ›¿ä»£å¤–å£³ç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”å°†å¿½ç•¥ä»»ä½• "),a("code",[e._v("CMD")]),e._v(" æˆ– "),a("code",[e._v("docker run")]),e._v(" å‘½ä»¤è¡Œå‚æ•°ã€‚ ä¸ºäº†ç¡®ä¿èƒ½å¤Ÿ æ­£ç¡® "),a("code",[e._v("docker stop")]),e._v(" å‘å‡ºä»»ä½•é•¿æœŸè¿è¡Œçš„ "),a("code",[e._v("ENTRYPOINT")]),e._v(" å¯æ‰§è¡Œæ–‡ä»¶ ä¿¡å· ï¼Œæ‚¨éœ€è¦è®°ä½ä»¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å®ƒ "),a("code",[e._v("exec")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nENTRYPOINT exec top -b\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("è¿è¡Œæ­¤å›¾åƒæ—¶ï¼Œæ‚¨å°†çœ‹åˆ°å•ä¸ª "),a("code",[e._v("PID 1")]),e._v(" è¿‡ç¨‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker run -it --rm --name test top\n\nMem: 1704520K used, 352148K free, 0K shrd, 0K buff, 140368121167873K cached\nCPU:   5% usr   0% sys   0% nic  94% idle   0% io   0% irq   0% sirq\nLoad average: 0.08 0.03 0.05 2/98 6\n  PID  PPID USER     STAT   VSZ %VSZ %CPU COMMAND\n    1     0 root     R     3164   0%   0% top -b\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("å¹²å‡€åœ°é€€å‡º "),a("code",[e._v("docker stop")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ /usr/bin/time docker stop test\n\ntest\nreal\t0m 0.20s\nuser\t0m 0.02s\nsys\t0m 0.04s\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("å¦‚æœæ‚¨å¿˜è®°æ·»åŠ  "),a("code",[e._v("exec")]),e._v(" åˆ°æ‚¨çš„å¼€å¤´ "),a("code",[e._v("ENTRYPOINT")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nENTRYPOINT top -b\nCMD --ignored-param1\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("ç„¶åï¼Œæ‚¨å¯ä»¥è¿è¡Œå®ƒï¼ˆä¸ºä¸‹ä¸€æ­¥å‘½åï¼‰ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker run -it --name test top --ignored-param2\n\nMem: 1704184K used, 352484K free, 0K shrd, 0K buff, 140621524238337K cached\nCPU:   9% usr   2% sys   0% nic  88% idle   0% io   0% irq   0% sirq\nLoad average: 0.01 0.02 0.05 2/101 7\n  PID  PPID USER     STAT   VSZ %VSZ %CPU COMMAND\n    1     0 root     S     3168   0%   0% /bin/sh -c top -b cmd cmd2\n    7     1 root     R     3164   0%   0% top -b\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("p",[e._v("ä»è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ° "),a("code",[e._v("top")]),e._v(" ï¼ŒæŒ‡å®š "),a("code",[e._v("ENTRYPOINT")]),e._v(" çš„ä¸æ˜¯ "),a("code",[e._v("PID 1")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœéšåè¿è¡Œ "),a("code",[e._v("docker stop test")]),e._v(" ï¼Œå®¹å™¨å°†ä¸ä¼šå¹²å‡€é€€å‡º- è¶…æ—¶åå°† "),a("code",[e._v("stop")]),e._v(" å¼ºåˆ¶å‘½ä»¤å‘é€a "),a("code",[e._v("SIGKILL")]),e._v(" ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker exec -it test ps aux\n\nPID   USER     COMMAND\n    1 root     /bin/sh -c top -b cmd cmd2\n    7 root     top -b\n    8 root     ps aux\n\n$ /usr/bin/time docker stop test\n\ntest\nreal\t0m 10.19s\nuser\t0m 0.04s\nsys\t0m 0.03s\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("h3",{attrs:{id:"äº†è§£cmdå’Œentrypointå¦‚ä½•ç›¸äº’ä½œç”¨-ğŸ”—"}},[e._v("äº†è§£CMDå’ŒENTRYPOINTå¦‚ä½•ç›¸äº’ä½œç”¨ "),a("a",{attrs:{href:"#understand-how-cmd-and-entrypoint-interact"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("æ— è®º "),a("code",[e._v("CMD")]),e._v(" å’Œ "),a("code",[e._v("ENTRYPOINT")]),e._v(" æŒ‡ä»¤å®šä¹‰è¿è¡Œçš„å®¹å™¨ä¸­æ—¶ä»€ä¹ˆå‘½ä»¤å¾—åˆ°æ‰§è¡Œã€‚ å¾ˆå°‘æœ‰è§„åˆ™æè¿°ä»–ä»¬çš„åˆä½œã€‚")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Dockerfileåº”è¯¥æŒ‡å®š "),a("code",[e._v("CMD")]),e._v(" æˆ– "),a("code",[e._v("ENTRYPOINT")]),e._v(" å‘½ä»¤ ä¸­çš„è‡³å°‘ä¸€ä¸ª ã€‚")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("ENTRYPOINT")]),e._v(" ä½¿ç”¨å®¹å™¨ä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶åº”å®šä¹‰ã€‚")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("CMD")]),e._v(" åº”è¯¥ç”¨ä½œå®šä¹‰ "),a("code",[e._v("ENTRYPOINT")]),e._v(" å‘½ä»¤ é»˜è®¤å€¼ æˆ–åœ¨å®¹å™¨ä¸­æ‰§è¡Œä¸´æ—¶å‘½ä»¤çš„æ–¹å¼ã€‚")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("CMD")]),e._v(" å½“ä½¿ç”¨å…¶ä»–å‚æ•°è¿è¡Œå®¹å™¨æ—¶ï¼Œå°†è¢«è¦†ç›–ã€‚")])])]),e._v(" "),a("p",[e._v("ä¸‹è¡¨æ˜¾ç¤ºäº†é’ˆå¯¹ä¸åŒ "),a("code",[e._v("ENTRYPOINT")]),e._v(" / "),a("code",[e._v("CMD")]),e._v(" ç»„åˆ æ‰§è¡Œçš„å‘½ä»¤ ï¼š")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th"),e._v(" "),a("th",[e._v("æ²¡æœ‰å…¥å£ç‚¹")]),e._v(" "),a("th",[e._v("ENTRYPOINT exec_entry p1_entry")]),e._v(" "),a("th",[e._v("ENTRYPOINT [â€œ exec_entryâ€ï¼Œâ€œ p1_entryâ€]")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[e._v("æ²¡æœ‰CMD")])]),e._v(" "),a("td",[a("em",[e._v("é”™è¯¯ï¼Œä¸å…è®¸")])]),e._v(" "),a("td",[e._v("/ bin / sh -c exec_entry p1_entry")]),e._v(" "),a("td",[e._v("exec_entry p1_entry")])]),e._v(" "),a("tr",[a("td",[a("strong",[e._v("CMD [â€œ exec_cmdâ€ï¼Œâ€œ p1_cmdâ€]")])]),e._v(" "),a("td",[e._v("exec_cmd p1_cmd")]),e._v(" "),a("td",[e._v("/ bin / sh -c exec_entry p1_entry")]),e._v(" "),a("td",[e._v("exec_entry p1_entry exec_cmd p1_cmd")])]),e._v(" "),a("tr",[a("td",[a("strong",[e._v("CMD [â€œ p1_cmdâ€ï¼Œâ€œ p2_cmdâ€]")])]),e._v(" "),a("td",[e._v("p1_cmd p2_cmd")]),e._v(" "),a("td",[e._v("/ bin / sh -c exec_entry p1_entry")]),e._v(" "),a("td",[e._v("exec_entry p1_entry p1_cmd p2_cmd")])]),e._v(" "),a("tr",[a("td",[a("strong",[e._v("CMD exec_cmd p1_cmd")])]),e._v(" "),a("td",[e._v("/ bin / sh -c exec_cmd p1_cmd")]),e._v(" "),a("td",[e._v("/ bin / sh -c exec_entry p1_entry")]),e._v(" "),a("td",[e._v("exec_entry p1_entry / bin / sh -c exec_cmd p1_cmd")])])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("æ³¨æ„")])]),e._v(" "),a("p",[e._v("å¦‚æœ "),a("code",[e._v("CMD")]),e._v(" ä»åŸºæœ¬å›¾åƒå®šä¹‰ï¼Œåˆ™è®¾ç½® "),a("code",[e._v("ENTRYPOINT")]),e._v(" å°†é‡ç½® "),a("code",[e._v("CMD")]),e._v(" ä¸ºç©ºå€¼ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ "),a("code",[e._v("CMD")]),e._v(" å¿…é¡»åœ¨å½“å‰å›¾åƒä¸­å®šä¹‰ä¸€ä¸ªå€¼ã€‚")])]),e._v(" "),a("h2",{attrs:{id:"éŸ³é‡-ğŸ”—"}},[e._v("éŸ³é‡ "),a("a",{attrs:{href:"#volume"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('VOLUME ["/data"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("VOLUME")]),e._v(" æŒ‡ä»¤åˆ›å»ºå…·æœ‰æŒ‡å®šåç§°çš„å®‰è£…ç‚¹ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºä¿å­˜æ¥è‡ªæœ¬æœºä¸»æœºæˆ–å…¶ä»–å®¹å™¨çš„å¤–éƒ¨å®‰è£…çš„å·ã€‚ è¯¥å€¼å¯ä»¥æ˜¯JSONæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯ "),a("code",[e._v('VOLUME ["/var/log/"]')]),e._v(" å…·æœ‰å¤šä¸ªå‚æ•°çš„çº¯å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ "),a("code",[e._v("VOLUME /var/log")]),e._v(" æˆ– "),a("code",[e._v("VOLUME /var/log /var/db")]),e._v(" ã€‚ æœ‰å…³é€šè¿‡Dockerå®¢æˆ·ç«¯çš„æ›´å¤šä¿¡æ¯/ç¤ºä¾‹å’Œå®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜… "),a("a",{attrs:{href:"https://docs.docker.com/storage/volumes/",target:"_blank",rel:"noopener noreferrer"}},[a("em",[e._v("é€šè¿‡Volumeså…±äº«ç›®å½•")]),a("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("docker run")]),e._v(" å‘½ä»¤ä½¿ç”¨åŸºæœ¬æ˜ åƒå†…æŒ‡å®šä½ç½®ä¸Šå­˜åœ¨çš„ä»»ä½•æ•°æ®åˆå§‹åŒ–æ–°åˆ›å»ºçš„å·ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹Dockerfileç‰‡æ®µï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM ubuntu\nRUN mkdir /myvol\nRUN echo "hello world" > /myvol/greeting\nVOLUME /myvol\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("è¯¥Dockerfileç”Ÿæˆä¸€ä¸ªæ˜ åƒï¼Œè¯¥æ˜ åƒå¯¼è‡´ "),a("code",[e._v("docker run")]),e._v(" åœ¨å¤„åˆ›å»ºä¸€ä¸ªæ–°çš„æŒ‚è½½ç‚¹ "),a("code",[e._v("/myvol")]),e._v(" å¹¶å°†è¯¥ "),a("code",[e._v("greeting")]),e._v(" æ–‡ä»¶ å¤åˆ¶ åˆ°æ–°åˆ›å»ºçš„å·ä¸­ã€‚")]),e._v(" "),a("h3",{attrs:{id:"æœ‰å…³æŒ‡å®šå·çš„æ³¨æ„äº‹é¡¹-ğŸ”—"}},[e._v("æœ‰å…³æŒ‡å®šå·çš„æ³¨æ„äº‹é¡¹ "),a("a",{attrs:{href:"#notes-about-specifying-volumes"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("å…³äºã€‚ä¸­çš„å·ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("åŸºäºWindowsçš„å®¹å™¨ä¸Šçš„å·")]),e._v(" ï¼šä½¿ç”¨åŸºäºWindowsçš„å®¹å™¨æ—¶ï¼Œå®¹å™¨å†…çš„å·çš„ç›®çš„åœ°å¿…é¡»æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š")]),e._v(" "),a("ul",[a("li",[e._v("ä¸å­˜åœ¨æˆ–ç©ºç›®å½•")]),e._v(" "),a("li",[e._v("é™¤ä»¥ä¸‹ä»¥å¤–çš„é©±åŠ¨å™¨ "),a("code",[e._v("C:")])])])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("ä»Dockerfileä¸­æ›´æ”¹å·")]),e._v(" ï¼šå¦‚æœåœ¨å£°æ˜äº†å·ä¹‹åæœ‰ä»»ä½•æ„å»ºæ­¥éª¤æ›´æ”¹äº†å·ä¸­çš„æ•°æ®ï¼Œåˆ™è¿™äº›æ›´æ”¹å°†è¢«ä¸¢å¼ƒã€‚")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("JSONæ ¼å¼")]),e._v(" ï¼šåˆ—è¡¨è¢«è§£æä¸ºJSONæ•°ç»„ã€‚ æ‚¨å¿…é¡»ç”¨åŒå¼•å·ï¼ˆ "),a("code",[e._v('"')]),e._v(" ï¼‰è€Œä¸æ˜¯å•å¼•å·ï¼ˆ "),a("code",[e._v("'")]),e._v(" ï¼‰ æ‹¬ä½å•è¯ ã€‚")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("ä¸»æœºç›®å½•æ˜¯åœ¨å®¹å™¨è¿è¡Œæ—¶å£°æ˜çš„")]),e._v(" ï¼šä¸»æœºç›®å½•ï¼ˆæŒ‚è½½ç‚¹ï¼‰ä»æœ¬è´¨ä¸Šè¯´æ˜¯ä¾èµ–äºä¸»æœºçš„ã€‚ è¿™æ˜¯ä¸ºäº†ä¿ç•™å›¾åƒçš„å¯ç§»æ¤æ€§ï¼Œå› ä¸ºä¸èƒ½ä¿è¯ç»™å®šçš„ä¸»æœºç›®å½•åœ¨æ‰€æœ‰ä¸»æœºä¸Šéƒ½å¯ç”¨ã€‚ å› æ­¤ï¼Œæ‚¨æ— æ³•ä»Dockerfileä¸­æŒ‚è½½ä¸»æœºç›®å½•ã€‚ è¯¥ "),a("code",[e._v("VOLUME")]),e._v(" æŒ‡ä»¤ä¸æ”¯æŒæŒ‡å®š "),a("code",[e._v("host-dir")]),e._v(" å‚æ•°ã€‚ åˆ›å»ºæˆ–è¿è¡Œå®¹å™¨æ—¶ï¼Œå¿…é¡»æŒ‡å®šå®‰è£…ç‚¹ã€‚")])])]),e._v(" "),a("h2",{attrs:{id:"ç”¨æˆ·-ğŸ”—"}},[e._v("ç”¨æˆ· "),a("a",{attrs:{href:"#user"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("USER <user>[:<group>]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¦ä¹ˆ")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("USER <UID>[:<GID>]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("USER")]),e._v(" æŒ‡ä»¤è®¾ç½®è¿è¡Œæ˜ åƒæ—¶ä»¥åŠç”¨äºä»»ä½•æ˜ åƒæ—¶ä½¿ç”¨çš„ç”¨æˆ·åï¼ˆæˆ–UIDï¼‰å’Œå¯é€‰çš„ç”¨æˆ·ç»„ï¼ˆæˆ–GIDï¼‰ "),a("code",[e._v("RUN")]),e._v(" ï¼Œ "),a("code",[e._v("CMD")]),e._v(" ä»¥åŠåœ¨ "),a("code",[e._v("ENTRYPOINT")]),e._v(" åé¢è·Ÿéšçš„æŒ‡ä»¤ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("blockquote",[a("p",[e._v("è¯·æ³¨æ„ï¼Œåœ¨ä¸ºç”¨æˆ·æŒ‡å®šç»„æ—¶ï¼Œç”¨æˆ·å°† "),a("em",[e._v("ä»…")]),e._v(" å…·æœ‰æŒ‡å®šçš„ç»„æˆå‘˜èº«ä»½ã€‚ ä»»ä½•å…¶ä»–å·²é…ç½®çš„ç»„æˆå‘˜èº«ä»½å°†è¢«å¿½ç•¥ã€‚")])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("è­¦å‘Š")])]),e._v(" "),a("p",[e._v("å½“ç”¨æˆ·æ²¡æœ‰ä¸»è¦ç»„æ—¶ï¼Œè¯¥æ˜ åƒï¼ˆæˆ–åç»­è¯´æ˜ï¼‰å°†ä¸è¯¥ "),a("code",[e._v("root")]),e._v(" ç»„ ä¸€èµ·è¿è¡Œ ã€‚")]),e._v(" "),a("p",[e._v("åœ¨Windowsä¸Šï¼Œå¦‚æœä¸æ˜¯å†…ç½®å¸æˆ·ï¼Œåˆ™å¿…é¡»é¦–å…ˆåˆ›å»ºç”¨æˆ·ã€‚ è¿™å¯ä»¥é€šè¿‡ "),a("code",[e._v("net user")]),e._v(" ä½œä¸ºDockerfileçš„ä¸€éƒ¨åˆ†è°ƒç”¨ çš„ å‘½ä»¤ æ¥å®Œæˆ ã€‚")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM microsoft/windowsservercore\n# Create Windows user in the container\nRUN net user /add patrick\n# Set it for subsequent commands\nUSER patrick\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h2",{attrs:{id:"workdir-ğŸ”—"}},[e._v("WORKDIR "),a("a",{attrs:{href:"#workdir"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("WORKDIR /path/to/workdir\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("WORKDIR")]),e._v(" æŒ‡ä»¤é›†çš„å·¥ä½œç›®å½•å¯¹ä»»ä½• "),a("code",[e._v("RUN")]),e._v(" ï¼Œ "),a("code",[e._v("CMD")]),e._v(" ï¼Œ "),a("code",[e._v("ENTRYPOINT")]),e._v(" ï¼Œ "),a("code",[e._v("COPY")]),e._v(" å’Œ "),a("code",[e._v("ADD")]),e._v(" å®ƒåé¢çš„è¯´æ˜ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ å¦‚æœ "),a("code",[e._v("WORKDIR")]),e._v(" ä¸å­˜åœ¨ï¼Œå³ä½¿ä»¥åçš„ä»»ä½• "),a("code",[e._v("Dockerfile")]),e._v(" æŒ‡ä»¤ ä¸­éƒ½æ²¡æœ‰ä½¿ç”¨å®ƒï¼Œä¹Ÿå°†åˆ›å»ºå®ƒ ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("WORKDIR")]),e._v(" æŒ‡ä»¤å¯ä»¥åœ¨ä¸­å¤šæ¬¡ä½¿ç”¨ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ å¦‚æœæä¾›äº†ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å®ƒå°†ç›¸å¯¹äºä¸Šä¸€æ¡ "),a("code",[e._v("WORKDIR")]),e._v(" æŒ‡ä»¤ çš„è·¯å¾„ ã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("WORKDIR /a\nWORKDIR b\nWORKDIR c\nRUN pwd\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("æœ€ç»ˆçš„è¾“å‡º "),a("code",[e._v("pwd")]),e._v(" å‘½ä»¤è¿™ "),a("code",[e._v("Dockerfile")]),e._v(" å°†æ˜¯ "),a("code",[e._v("/a/b/c")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("WORKDIR")]),e._v(" æŒ‡ä»¤å¯ä»¥è§£æå…ˆå‰ä½¿ç”¨è®¾ç½®çš„ç¯å¢ƒå˜é‡ "),a("code",[e._v("ENV")]),e._v(" ã€‚ æ‚¨åªèƒ½ä½¿ç”¨åœ¨ä¸­æ˜¾å¼è®¾ç½®çš„ç¯å¢ƒå˜é‡ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ENV DIRPATH /path\nWORKDIR $DIRPATH/$DIRNAME\nRUN pwd\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("æœ€ç»ˆ "),a("code",[e._v("pwd")]),e._v(" å‘½ä»¤ çš„è¾“å‡º "),a("code",[e._v("Dockerfile")]),e._v(" å°†æ˜¯ "),a("code",[e._v("/path/$DIRNAME")])]),e._v(" "),a("h2",{attrs:{id:"arg-ğŸ”—"}},[e._v("ARG "),a("a",{attrs:{href:"#arg"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ARG <name>[=<default value>]\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ„å»ºæ—¶ "),a("code",[e._v("docker build")]),e._v(" ä½¿ç”¨ å¸¦æœ‰ "),a("code",[e._v("--build-arg <varname>=<value>")]),e._v(" æ ‡å¿— çš„ å‘½ä»¤å°†å…¶ ä¼ é€’ç»™æ„å»ºå™¨ ã€‚ å¦‚æœç”¨æˆ·æŒ‡å®šäº†Dockerfileä¸­æœªå®šä¹‰çš„æ„å»ºå‚æ•°ï¼Œåˆ™è¯¥æ„å»ºä¼šè¾“å‡ºè­¦å‘Šã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[Warning] One or more build-args [foo] were not consumed.\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("Dockerfileå¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯æœ‰æ•ˆçš„Dockerfileï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM busybox\nARG user1\nARG buildno\n# ...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("blockquote",[a("p",[a("strong",[e._v("è­¦å‘Šï¼š")])]),e._v(" "),a("p",[e._v("ä¸å»ºè®®ä½¿ç”¨æ„å»ºæ—¶å˜é‡æ¥ä¼ é€’è¯¸å¦‚githubå¯†é’¥ï¼Œç”¨æˆ·å‡­æ®ç­‰æœºå¯†ã€‚æ„å»ºæ—¶å˜é‡å€¼å¯¹äºä½¿ç”¨è¯¥ "),a("code",[e._v("docker history")]),e._v(" å‘½ä»¤ çš„å›¾åƒçš„ä»»ä½•ç”¨æˆ·éƒ½æ˜¯å¯è§çš„ ã€‚")]),e._v(" "),a("p",[e._v("è¯·å‚é˜… "),a("a",{attrs:{href:"https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information",target:"_blank",rel:"noopener noreferrer"}},[e._v("â€œä½¿ç”¨BuildKitç”Ÿæˆæ˜ åƒâ€"),a("OutboundLink")],1),e._v(" éƒ¨åˆ†ï¼Œä»¥äº†è§£æœ‰å…³åœ¨ç”Ÿæˆæ˜ åƒæ—¶ä½¿ç”¨æœºå¯†çš„å®‰å…¨æ–¹æ³•ã€‚")])]),e._v(" "),a("h3",{attrs:{id:"é»˜è®¤å€¼-ğŸ”—"}},[e._v("é»˜è®¤å€¼ "),a("a",{attrs:{href:"#default-values"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("çš„ "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤å¯ä»¥å¯é€‰åœ°åŒ…æ‹¬ä¸€ä¸ªé»˜è®¤å€¼ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM busybox\nARG user1=someuser\nARG buildno=1\n# ...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("å¦‚æœ "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤å…·æœ‰ç¼ºçœå€¼ï¼Œå¹¶ä¸”åœ¨æ„å»ºæ—¶æœªä¼ é€’ä»»ä½•å€¼ï¼Œé‚£ä¹ˆæ„å»ºå™¨å°†ä½¿ç”¨ç¼ºçœå€¼ã€‚")]),e._v(" "),a("h3",{attrs:{id:"èŒƒå›´-ğŸ”—"}},[e._v("èŒƒå›´ "),a("a",{attrs:{href:"#scope"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("ä¸€ä¸ª "),a("code",[e._v("ARG")]),e._v(" å˜é‡å®šä¹‰è¿›å…¥ä»åœ¨å…¶ä¸Šåœ¨é™å®šçš„çº¿æ•ˆæœ "),a("code",[e._v("Dockerfile")]),e._v(" ä¸ä»å‚æ•°å¯¹å‘½ä»¤è¡Œæˆ–å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹Dockerfileï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM busybox\nUSER ${user:-some_user}\nARG user\nUSER $user\n# ...\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("ç”¨æˆ·é€šè¿‡è°ƒç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºæ­¤æ–‡ä»¶ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build --build-arg user=what_user .\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[a("code",[e._v("USER")]),e._v(" åœ¨ç¬¬2è¡Œ ï¼Œ at "),a("code",[e._v("some_user")]),e._v(" åœ¨ "),a("code",[e._v("user")]),e._v(" å˜é‡3ä¸Šå®šä¹‰ä¸ºã€‚ "),a("code",[e._v("USER")]),e._v(" åœ¨ç¬¬4 è¡Œï¼Œ at å®šä¹‰ ä¸º "),a("code",[e._v("what_user")]),e._v(" as "),a("code",[e._v("user")]),e._v(" ï¼Œå¹¶ä¸” "),a("code",[e._v("what_user")]),e._v(" åœ¨å‘½ä»¤è¡Œä¸Šä¼ é€’ äº† å€¼ã€‚ åœ¨é€šè¿‡ "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤ å¯¹å…¶è¿›è¡Œå®šä¹‰ä¹‹å‰ ï¼Œå¯¹å˜é‡çš„ä»»ä½•ä½¿ç”¨éƒ½ä¼šå¯¼è‡´ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚")]),e._v(" "),a("p",[e._v("çš„ "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤åœ¨å®ƒè¢«å®šä¹‰çš„æ„å»ºé˜¶æ®µç»“æŸæ¨ç§»çš„èŒƒå›´è¿›è¡Œã€‚ è¦åœ¨å¤šä¸ªé˜¶æ®µä½¿ç”¨argï¼Œæ¯ä¸ªé˜¶æ®µéƒ½å¿…é¡»åŒ…å« "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM busybox\nARG SETTINGS\nRUN ./run/setup $SETTINGS\n\nFROM busybox\nARG SETTINGS\nRUN ./run/other $SETTINGS\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("h3",{attrs:{id:"ä½¿ç”¨argå˜é‡-ğŸ”—"}},[e._v("ä½¿ç”¨ARGå˜é‡ "),a("a",{attrs:{href:"#using-arg-variables"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("æ‚¨å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("ARG")]),e._v(" æˆ– "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤æŒ‡å®šè¯¥ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤ å¯ç”¨çš„å˜é‡ ã€‚ ä½¿ç”¨ "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤ å®šä¹‰çš„ç¯å¢ƒå˜é‡ å§‹ç»ˆä¼šè¦†ç›– "),a("code",[e._v("ARG")]),e._v(" åŒåæŒ‡ä»¤ã€‚ è€ƒè™‘æ­¤Dockerfileå’Œ "),a("code",[e._v("ENV")]),e._v(" and "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nARG CONT_IMG_VER\nENV CONT_IMG_VER v1.0.0\nRUN echo $CONT_IMG_VER\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("ç„¶åï¼Œå‡å®šæ­¤æ˜ åƒæ˜¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»ºçš„ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build --build-arg CONT_IMG_VER=v2.0.1 .\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤å°†ä½¿ç”¨ "),a("code",[e._v("v1.0.0")]),e._v(" è€Œä¸æ˜¯ "),a("code",[e._v("ARG")]),e._v(" ç”¨æˆ·ä¼ é€’ çš„ è®¾ç½®ï¼š "),a("code",[e._v("v2.0.1")]),e._v(" æ­¤è¡Œä¸ºç±»ä¼¼äºShellè„šæœ¬ï¼Œå…¶ä¸­å±€éƒ¨ä½œç”¨åŸŸçš„å˜é‡ä»å…¶å®šä¹‰çš„è§’åº¦è¦†ç›–ä½œä¸ºå‚æ•°ä¼ é€’æˆ–ä»ç¯å¢ƒç»§æ‰¿çš„å˜é‡ã€‚")]),e._v(" "),a("p",[e._v("ä½¿ç”¨ä¸Šé¢çš„ç¤ºä¾‹ï¼Œä½†ä½¿ç”¨ä¸åŒçš„ "),a("code",[e._v("ENV")]),e._v(" è§„èŒƒï¼Œå¯ä»¥åœ¨ "),a("code",[e._v("ARG")]),e._v(" å’Œ "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤ ä¹‹é—´åˆ›å»ºæ›´æœ‰ç”¨çš„äº¤äº’ ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nARG CONT_IMG_VER\nENV CONT_IMG_VER ${CONT_IMG_VER:-v1.0.0}\nRUN echo $CONT_IMG_VER\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("ä¸ "),a("code",[e._v("ARG")]),e._v(" æŒ‡ä»¤ ä¸åŒ ï¼Œ "),a("code",[e._v("ENV")]),e._v(" å€¼å§‹ç»ˆä¿ç•™åœ¨ç”Ÿæˆçš„æ˜ åƒä¸­ã€‚ è€ƒè™‘ä¸å¸¦ "),a("code",[e._v("--build-arg")]),e._v(" æ ‡å¿— çš„Dockeræ„å»º ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker build .\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("ä½¿ç”¨æ­¤Dockerfileç¤ºä¾‹ï¼Œ "),a("code",[e._v("CONT_IMG_VER")]),e._v(" å®ƒä»ç„¶ä¿ç•™åœ¨æ˜ åƒä¸­ï¼Œä½†å…¶å€¼å°†æ˜¯ æŒ‡ä»¤ "),a("code",[e._v("v1.0.0")]),e._v(" ç¬¬3è¡Œä¸­çš„é»˜è®¤è®¾ç½® "),a("code",[e._v("ENV")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå˜é‡æ‰©å±•æŠ€æœ¯ä½¿æ‚¨å¯ä»¥ä»å‘½ä»¤è¡Œä¼ é€’å‚æ•°ï¼Œå¹¶åˆ©ç”¨ "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤ å°†å…¶ä¿ç•™åœ¨æœ€ç»ˆæ˜ åƒä¸­ ã€‚ ä»… "),a("a",{attrs:{href:"#environment-replacement"}},[e._v("æœ‰é™çš„ä¸€ç»„DockerfileæŒ‡ä»¤")]),e._v(" æ”¯æŒå˜é‡æ‰©å±• "),a("a",{attrs:{href:"#environment-replacement"}},[e._v("ã€‚")])]),e._v(" "),a("h3",{attrs:{id:"é¢„å®šä¹‰çš„-argsğŸ”—"}},[e._v("é¢„å®šä¹‰çš„ "),a("a",{attrs:{href:"#predefined-args"}},[e._v("ARGsğŸ”—")])]),e._v(" "),a("p",[e._v("Dockerå…·æœ‰ä¸€ç»„é¢„å®šä¹‰ "),a("code",[e._v("ARG")]),e._v(" å˜é‡ï¼Œæ‚¨å¯ä»¥åœ¨ä¸ä½¿ç”¨ "),a("code",[e._v("ARG")]),e._v(" Dockerfileä¸­ ç›¸åº” æŒ‡ä»¤çš„æƒ…å†µä¸‹ä½¿ç”¨å®ƒä»¬ã€‚")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("HTTP_PROXY")])]),e._v(" "),a("li",[a("code",[e._v("http_proxy")])]),e._v(" "),a("li",[a("code",[e._v("HTTPS_PROXY")])]),e._v(" "),a("li",[a("code",[e._v("https_proxy")])]),e._v(" "),a("li",[a("code",[e._v("FTP_PROXY")])]),e._v(" "),a("li",[a("code",[e._v("ftp_proxy")])]),e._v(" "),a("li",[a("code",[e._v("NO_PROXY")])]),e._v(" "),a("li",[a("code",[e._v("no_proxy")])])]),e._v(" "),a("p",[e._v("è¦ä½¿ç”¨è¿™äº›ï¼Œåªéœ€ä½¿ç”¨ä»¥ä¸‹æ ‡å¿—åœ¨å‘½ä»¤è¡Œä¸­ä¼ é€’å®ƒä»¬ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("--build-arg <varname>=<value>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›é¢„å®šä¹‰å˜é‡ä»çš„è¾“å‡ºä¸­æ’é™¤ "),a("code",[e._v("docker history")]),e._v(" ã€‚ æ’é™¤å®ƒä»¬å¯ä»¥å‡å°‘æ„å¤–æ³„éœ² "),a("code",[e._v("HTTP_PROXY")]),e._v(" å˜é‡ ä¸­çš„æ•æ„Ÿèº«ä»½éªŒè¯ä¿¡æ¯çš„é£é™© ã€‚")]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼Œè€ƒè™‘ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»ºä»¥ä¸‹Dockerfile "),a("code",[e._v("--build-arg HTTP_PROXY=http://user:pass@proxy.lon.example.com")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM ubuntu\nRUN echo "Hello World"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ "),a("code",[e._v("HTTP_PROXY")]),e._v(" å˜é‡ çš„å€¼åœ¨ ä¸­ä¸å¯ç”¨ï¼Œ "),a("code",[e._v("docker history")]),e._v(" ä¹Ÿä¸è¢«ç¼“å­˜ã€‚ å¦‚æœè¦æ›´æ”¹ä½ç½®ï¼Œå¹¶ä¸”ä»£ç†æœåŠ¡å™¨å·²æ›´æ”¹ä¸º "),a("code",[e._v("http://user:pass@proxy.sfo.example.com")]),e._v(" ï¼Œåˆ™åç»­çš„æ„å»ºä¸ä¼šå¯¼è‡´é«˜é€Ÿç¼“å­˜æœªå‘½ä¸­ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœæ‚¨éœ€è¦è¦†ç›–æ­¤è¡Œä¸ºï¼Œåˆ™å¯ä»¥é€šè¿‡ "),a("code",[e._v("ARG")]),e._v(" åœ¨Dockerfileä¸­æ·»åŠ å¦‚ä¸‹è¯­å¥æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM ubuntu\nARG HTTP_PROXY\nRUN echo "Hello World"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("æ„å»ºæ­¤Dockerfileæ—¶ï¼Œå°† "),a("code",[e._v("HTTP_PROXY")]),e._v(" ä¿ç•™åœ¨ä¸­ "),a("code",[e._v("docker history")]),e._v(" ï¼Œå¹¶ä¸”æ›´æ”¹å…¶å€¼ä¼šä½¿æ„å»ºç¼“å­˜æ— æ•ˆã€‚")]),e._v(" "),a("h3",{attrs:{id:"å…¨çƒèŒƒå›´å†…çš„è‡ªåŠ¨å¹³å°-argsğŸ”—"}},[e._v("å…¨çƒèŒƒå›´å†…çš„è‡ªåŠ¨å¹³å° "),a("a",{attrs:{href:"#automatic-platform-args-in-the-global-scope"}},[e._v("ARGsğŸ”—")])]),e._v(" "),a("p",[e._v("ä»…å½“ä½¿ç”¨ "),a("a",{attrs:{href:"#buildkit"}},[e._v("BuildKit")]),e._v(" åç«¯ æ—¶ï¼Œæ­¤åŠŸèƒ½æ‰å¯ç”¨ ã€‚")]),e._v(" "),a("p",[e._v("Docker "),a("code",[e._v("ARG")]),e._v(" åœ¨æ‰§è¡Œæ„å»ºçš„èŠ‚ç‚¹çš„å¹³å°ï¼ˆæ„å»ºå¹³å°ï¼‰å’Œç»“æœæ˜ åƒçš„å¹³å°ï¼ˆç›®æ ‡å¹³å°ï¼‰ä¸Šç”¨ä¿¡æ¯ é¢„å®šä¹‰äº†ä¸€ç»„ å˜é‡ã€‚ å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("--platform")]),e._v(" æ ‡å¿—on æ¥æŒ‡å®šç›®æ ‡å¹³å° "),a("code",[e._v("docker build")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ä»¥ä¸‹ "),a("code",[e._v("ARG")]),e._v(" å˜é‡æ˜¯è‡ªåŠ¨è®¾ç½®çš„ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("TARGETPLATFORM")]),e._v(" -æ„å»ºç»“æœçš„å¹³å°ã€‚ ä¾‹å¦‚ "),a("code",[e._v("linux/amd64")]),e._v(" ï¼Œ "),a("code",[e._v("linux/arm/v7")]),e._v(" ï¼Œ "),a("code",[e._v("windows/amd64")]),e._v(" ã€‚")]),e._v(" "),a("li",[a("code",[e._v("TARGETOS")]),e._v(" -TARGETPLATFORMçš„OSç»„ä»¶")]),e._v(" "),a("li",[a("code",[e._v("TARGETARCH")]),e._v(" -TARGETPLATFORMçš„ä½“ç³»ç»“æ„ç»„ä»¶")]),e._v(" "),a("li",[a("code",[e._v("TARGETVARIANT")]),e._v(" -TARGETPLATFORMçš„å˜ä½“ç»„ä»¶")]),e._v(" "),a("li",[a("code",[e._v("BUILDPLATFORM")]),e._v(" -æ‰§è¡Œæ„å»ºçš„èŠ‚ç‚¹çš„å¹³å°ã€‚")]),e._v(" "),a("li",[a("code",[e._v("BUILDOS")]),e._v(" -BUILDPLATFORMçš„OSç»„ä»¶")]),e._v(" "),a("li",[a("code",[e._v("BUILDARCH")]),e._v(" -BUILDPLATFORMçš„ä½“ç³»ç»“æ„ç»„ä»¶")]),e._v(" "),a("li",[a("code",[e._v("BUILDVARIANT")]),e._v(" -BUILDPLATFORMçš„å˜ä½“ç»„ä»¶")])]),e._v(" "),a("p",[e._v("è¿™äº›å‚æ•°åœ¨å…¨å±€èŒƒå›´å†…å®šä¹‰ï¼Œå› æ­¤åœ¨æ„å»ºé˜¶æ®µæˆ–æ‚¨çš„ "),a("code",[e._v("RUN")]),e._v(" å‘½ä»¤ ä¸­ä¸ä¼šè‡ªåŠ¨æä¾› ã€‚ ä¸ºäº†åœ¨æ„å»ºé˜¶æ®µå…¬å¼€è¿™äº›å‚æ•°ä¹‹ä¸€ï¼Œè¯·é‡æ–°å®šä¹‰å®ƒè€Œæ²¡æœ‰ä»·å€¼ã€‚")]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM alpine\nARG TARGETPLATFORM\nRUN echo "I\'m building for $TARGETPLATFORM"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"å¯¹æ„å»ºç¼“å­˜çš„å½±å“-ğŸ”—"}},[e._v("å¯¹æ„å»ºç¼“å­˜çš„å½±å“ "),a("a",{attrs:{href:"#impact-on-build-caching"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[a("code",[e._v("ARG")]),e._v(" å˜é‡ä¸ä¼šåƒ "),a("code",[e._v("ENV")]),e._v(" å˜é‡ é‚£æ ·æŒä¹…åŒ–åˆ°ç”Ÿæˆçš„æ˜ åƒ ä¸­ã€‚ ä½†æ˜¯ï¼Œ "),a("code",[e._v("ARG")]),e._v(" å˜é‡ç¡®å®ä»¥ç±»ä¼¼çš„æ–¹å¼å½±å“æ„å»ºç¼“å­˜ã€‚ å¦‚æœDockerfileå®šä¹‰äº†ä¸€ä¸ª "),a("code",[e._v("ARG")]),e._v(" å…¶å€¼ä¸åŒäºå…ˆå‰æ„å»º çš„ å˜é‡ï¼Œåˆ™é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šå‘ç”Ÿâ€œç¼“å­˜æœªå‘½ä¸­â€ï¼Œè€Œä¸æ˜¯å…¶å®šä¹‰ã€‚ ç‰¹åˆ«æ˜¯ï¼Œ "),a("code",[e._v("RUN")]),e._v(" ä¸€æ¡æŒ‡ä»¤ä¹‹åçš„ æ‰€æœ‰ æŒ‡ä»¤ éƒ½ éšå¼åœ° "),a("code",[e._v("ARG")]),e._v(" ä½¿ç”¨è¯¥ "),a("code",[e._v("ARG")]),e._v(" å˜é‡ï¼ˆä½œä¸ºç¯å¢ƒå˜é‡ï¼‰ï¼Œå› æ­¤å¯èƒ½å¯¼è‡´é«˜é€Ÿç¼“å­˜æœªå‘½ä¸­ã€‚ "),a("code",[e._v("ARG")]),e._v(" é™¤éã€‚ä¸­æœ‰åŒ¹é…çš„ "),a("code",[e._v("ARG")]),e._v(" è¯­å¥ï¼Œ å¦åˆ™ æ‰€æœ‰é¢„å®šä¹‰ å˜é‡å‡å…äºç¼“å­˜ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ä¸¤ä¸ªDockerfileï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nARG CONT_IMG_VER\nRUN echo $CONT_IMG_VER\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nARG CONT_IMG_VER\nRUN echo hello\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("å¦‚æœ "),a("code",[e._v("--build-arg CONT_IMG_VER=<value>")]),e._v(" åœ¨å‘½ä»¤è¡Œä¸Š æŒ‡å®š ï¼Œåˆ™åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œç¬¬2è¡Œä¸Šçš„ æŒ‡å®š éƒ½ä¸ä¼šå¯¼è‡´é«˜é€Ÿç¼“å­˜æœªå‘½ä¸­ã€‚ ç¬¬3è¡Œç¡®å®ä¼šå¯¼è‡´ç¼“å­˜æœªå‘½ä¸­ã€‚ "),a("code",[e._v("ARG CONT_IMG_VER")]),e._v(" å¯¼è‡´RUNè¡Œè¢«æ ‡è¯†ä¸ºä¸æ­£åœ¨è¿è¡Œçš„ "),a("code",[e._v("CONT_IMG_VER=<value>")]),e._v(" echo hello ç›¸åŒ ï¼Œå› æ­¤ï¼Œå¦‚æœè¿›è¡Œäº† "),a("code",[e._v("<value>")]),e._v(" æ›´æ”¹ï¼Œ åˆ™ä¼š é‡åˆ°ç¼“å­˜æœªå‘½ä¸­çš„æƒ…å†µã€‚")]),e._v(" "),a("p",[e._v("è€ƒè™‘åœ¨åŒä¸€å‘½ä»¤è¡Œä¸‹çš„å¦ä¸€ä¸ªç¤ºä¾‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nARG CONT_IMG_VER\nENV CONT_IMG_VER $CONT_IMG_VER\nRUN echo $CONT_IMG_VER\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œé«˜é€Ÿç¼“å­˜æœªå‘½ä¸­å‘ç”Ÿåœ¨ç¬¬3è¡Œã€‚ä¹‹æ‰€ä»¥å‘ç”Ÿæœªå‘½ä¸­ï¼Œæ˜¯å› ä¸ºè¯¥å˜é‡åœ¨ "),a("code",[e._v("ENV")]),e._v(" å¼•ç”¨ä¸­ çš„å€¼ å¼•ç”¨äº†è¯¥ "),a("code",[e._v("ARG")]),e._v(" å˜é‡ï¼Œå¹¶ä¸”è¯¥å˜é‡é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œäº†æ›´æ”¹ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¯¥ "),a("code",[e._v("ENV")]),e._v(" å‘½ä»¤ä½¿å›¾åƒåŒ…å«è¯¥å€¼ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœä¸€æ¡ "),a("code",[e._v("ENV")]),e._v(" æŒ‡ä»¤è¦†ç›– "),a("code",[e._v("ARG")]),e._v(" äº†åŒåæŒ‡ä»¤ï¼Œä¾‹å¦‚Dockerfileï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("FROM ubuntu\nARG CONT_IMG_VER\nENV CONT_IMG_VER hello\nRUN echo $CONT_IMG_VER\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("ç¬¬3è¡Œä¸ä¼šå¯¼è‡´ç¼“å­˜æœªå‘½ä¸­ï¼Œå› ä¸ºçš„å€¼ "),a("code",[e._v("CONT_IMG_VER")]),e._v(" æ˜¯ä¸€ä¸ªå¸¸é‡ï¼ˆ "),a("code",[e._v("hello")]),e._v(" ï¼‰ã€‚ ç»“æœï¼Œ "),a("code",[e._v("RUN")]),e._v(" ï¼ˆç¬¬4è¡Œï¼‰ ä½¿ç”¨çš„ç¯å¢ƒå˜é‡å’Œå€¼ åœ¨ä¸¤æ¬¡æ„å»ºä¹‹é—´ä¸ä¼šæ›´æ”¹ã€‚")]),e._v(" "),a("h2",{attrs:{id:"å·²å»º-ğŸ”—"}},[e._v("å·²å»º "),a("a",{attrs:{href:"#onbuild"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ONBUILD <INSTRUCTION>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å½“è¯¥å›¾åƒç”¨ä½œå¦ä¸€ä¸ªæ„å»ºçš„åŸºç¡€æ—¶ï¼Œ è¯¥ "),a("code",[e._v("ONBUILD")]),e._v(" æŒ‡ä»¤ä¼šåœ¨å›¾åƒä¸Šæ·»åŠ è¦ åœ¨ä»¥åæ‰§è¡Œ çš„ "),a("em",[e._v("è§¦å‘")]),e._v(" æŒ‡ä»¤ã€‚ è§¦å‘å™¨å°†åœ¨ä¸‹æ¸¸æ„å»ºçš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œå°±å¥½åƒå®ƒå·² "),a("code",[e._v("FROM")]),e._v(" åœ¨ä¸‹æ¸¸æŒ‡ä»¤ ä¹‹åç«‹å³æ’å…¥ "),a("code",[e._v("Dockerfile")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ä»»ä½•æ„å»ºæŒ‡ä»¤éƒ½å¯ä»¥æ³¨å†Œä¸ºè§¦å‘å™¨ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœè¦æ„å»ºçš„å›¾åƒå°†ç”¨ä½œæ„å»ºå…¶ä»–å›¾åƒçš„åŸºç¡€ï¼Œä¾‹å¦‚åº”ç”¨ç¨‹åºæ„å»ºç¯å¢ƒæˆ–å¯ä»¥ä½¿ç”¨ç”¨æˆ·ç‰¹å®šé…ç½®è‡ªå®šä¹‰çš„å®ˆæŠ¤ç¨‹åºï¼Œåˆ™æ­¤åŠŸèƒ½å¾ˆæœ‰ç”¨ã€‚")]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„å›¾åƒæ˜¯å¯é‡ç”¨çš„Pythonåº”ç”¨ç¨‹åºæ„å»ºå™¨ï¼Œåˆ™å°†éœ€è¦åœ¨ç‰¹å®šç›®å½•ä¸­æ·»åŠ åº”ç”¨ç¨‹åºæºä»£ç ï¼Œå¹¶ä¸” "),a("em",[e._v("æ­¤å")]),e._v(" å¯èƒ½éœ€è¦è°ƒç”¨æ„å»ºè„šæœ¬ ã€‚ ä½ ä¸èƒ½åªæ˜¯æ‰“ç”µè¯ "),a("code",[e._v("ADD")]),e._v(" å’Œ "),a("code",[e._v("RUN")]),e._v(" ç°åœ¨ï¼Œå› ä¸ºä½ è¿˜æ²¡æœ‰è®¿é—®åº”ç”¨ç¨‹åºçš„æºä»£ç ï¼Œè¿™å°†æ˜¯ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºç”Ÿæˆä¸åŒçš„ã€‚ æ‚¨å¯ä»¥ç®€å•åœ°ä¸ºåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜æä¾› "),a("code",[e._v("Dockerfile")]),e._v(" å¯å¤åˆ¶ç²˜è´´åˆ°å…¶åº”ç”¨ç¨‹åºä¸­ çš„æ ·æ¿ ï¼Œä½†è¿™æ•ˆç‡ä½ä¸‹ï¼Œå®¹æ˜“å‡ºé”™ä¸”éš¾ä»¥æ›´æ–°ï¼Œå› ä¸ºå®ƒä¸ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ä»£ç æ··åˆåœ¨ä¸€èµ·ã€‚")]),e._v(" "),a("p",[e._v("è§£å†³æ–¹æ¡ˆæ˜¯ç”¨äº "),a("code",[e._v("ONBUILD")]),e._v(" æ³¨å†Œé¢„å…ˆçš„æŒ‡ä»¤ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€ä¸ªæ„å»ºé˜¶æ®µä¸­ç¨åè¿è¡Œã€‚")]),e._v(" "),a("p",[e._v("è¿ä½œæ–¹å¼å¦‚ä¸‹ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("å½“é‡åˆ° "),a("code",[e._v("ONBUILD")]),e._v(" æŒ‡ä»¤æ—¶ï¼Œæ„å»ºå™¨å°†è§¦å‘å™¨æ·»åŠ åˆ°æ­£åœ¨æ„å»ºçš„å›¾åƒçš„å…ƒæ•°æ®ä¸­ã€‚ è¯¥æŒ‡ä»¤ä¸ä¼šå½±å“å½“å‰ç‰ˆæœ¬ã€‚")]),e._v(" "),a("li",[e._v("åœ¨æ„å»ºç»“æŸæ—¶ï¼Œæ‰€æœ‰è§¦å‘å™¨çš„åˆ—è¡¨éƒ½å­˜å‚¨åœ¨æ˜ åƒæ¸…å•çš„keyä¸‹ "),a("code",[e._v("OnBuild")]),e._v(" ã€‚ å¯ä»¥ä½¿ç”¨ "),a("code",[e._v("docker inspect")]),e._v(" å‘½ä»¤ æ£€æŸ¥å®ƒä»¬ ã€‚")]),e._v(" "),a("li",[e._v("ç¨åï¼Œå¯ä»¥ä½¿ç”¨è¯¥ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤ å°†è¯¥å›¾åƒç”¨ä½œæ–°ç‰ˆæœ¬çš„åŸºç¡€ ã€‚ ä½œä¸ºå¤„ç† "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤çš„ ä¸€éƒ¨åˆ† ï¼Œä¸‹æ¸¸æ„å»ºå™¨å°†æŸ¥æ‰¾ "),a("code",[e._v("ONBUILD")]),e._v(" è§¦å‘å™¨ï¼Œå¹¶æŒ‰ç…§æ³¨å†Œæ—¶çš„é¡ºåºæ‰§è¡Œå®ƒä»¬ã€‚ å¦‚æœä»»ä½•è§¦å‘å™¨å¤±è´¥ï¼Œåˆ™è¯¥ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤å°†ä¸­æ­¢ï¼Œè¿›è€Œå¯¼è‡´æ„å»ºå¤±è´¥ã€‚ å¦‚æœæ‰€æœ‰è§¦å‘å™¨éƒ½æˆåŠŸï¼Œåˆ™ "),a("code",[e._v("FROM")]),e._v(" æŒ‡ä»¤å®Œæˆï¼Œå¹¶ä¸”æ„å»ºç…§å¸¸ç»§ç»­ã€‚")]),e._v(" "),a("li",[e._v("æ‰§è¡Œå®Œè§¦å‘å™¨åï¼Œå°†ä»æœ€ç»ˆå›¾åƒä¸­æ¸…é™¤è§¦å‘å™¨ã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒä»¬ä¸æ˜¯â€œå­™å­ä»£â€ç‰ˆæœ¬æ‰€ç»§æ‰¿çš„ã€‚")])]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ONBUILD ADD . /app/src\nONBUILD RUN /usr/local/bin/python-build --dir /app/src\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("blockquote",[a("p",[a("strong",[e._v("è­¦å‘Š")])]),e._v(" "),a("p",[e._v("ä¸å…è®¸ "),a("code",[e._v("ONBUILD")]),e._v(" ä½¿ç”¨ é“¾æ¥ è¯´æ˜ "),a("code",[e._v("ONBUILD ONBUILD")]),e._v(" ã€‚")])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("è­¦å‘Š")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("ONBUILD")]),e._v(" æŒ‡ä»¤å¯èƒ½ä¸ä¼šè§¦å‘ "),a("code",[e._v("FROM")]),e._v(" æˆ– "),a("code",[e._v("MAINTAINER")]),e._v(" æŒ‡ä»¤ã€‚")])]),e._v(" "),a("h2",{attrs:{id:"åœæ­¢-ä¿¡å·ğŸ”—"}},[e._v("åœæ­¢ "),a("a",{attrs:{href:"#stopsignal"}},[e._v("ä¿¡å·ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("STOPSIGNAL signal\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("STOPSIGNAL")]),e._v(" æŒ‡ä»¤è®¾ç½®å°†è¢«å‘é€åˆ°å®¹å™¨é€€å‡ºçš„ç³»ç»Ÿè°ƒç”¨ä¿¡å·ã€‚ è¯¥ä¿¡å·å¯ä»¥æ˜¯ä¸å†…æ ¸syscallè¡¨ä¸­çš„ä½ç½®åŒ¹é…çš„æœ‰æ•ˆæ— ç¬¦å·æ•°å­—ï¼ˆä¾‹å¦‚9ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯æ ¼å¼ä¸ºSIGNAMEçš„ä¿¡å·åç§°ï¼ˆä¾‹å¦‚SIGKILLï¼‰ã€‚")]),e._v(" "),a("h2",{attrs:{id:"å¥åº·-æ£€æŸ¥ğŸ”—"}},[e._v("å¥åº· "),a("a",{attrs:{href:"#healthcheck"}},[e._v("æ£€æŸ¥ğŸ”—")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("HEALTHCHECK")]),e._v(" æŒ‡ä»¤æœ‰ä¸¤ç§å½¢å¼ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("HEALTHCHECK [OPTIONS] CMD command")]),e._v(" ï¼ˆé€šè¿‡åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œå‘½ä»¤æ¥æ£€æŸ¥å®¹å™¨çš„è¿è¡ŒçŠ¶å†µï¼‰")]),e._v(" "),a("li",[a("code",[e._v("HEALTHCHECK NONE")]),e._v(" ï¼ˆç¦ç”¨ä»åŸºæœ¬æ˜ åƒç»§æ‰¿çš„ä»»ä½•è¿è¡ŒçŠ¶å†µæ£€æŸ¥ï¼‰")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("HEALTHCHECK")]),e._v(" æŒ‡ä»¤å‘Šè¯‰Dockerå¦‚ä½•æµ‹è¯•å®¹å™¨ä»¥æ£€æŸ¥å…¶æ˜¯å¦ä»åœ¨å·¥ä½œã€‚ è¿™æ ·å¯ä»¥æ£€æµ‹åˆ°è¯¸å¦‚WebæœåŠ¡å™¨é™·å…¥æ— é™å¾ªç¯å¹¶ä¸”æ— æ³•å¤„ç†æ–°è¿æ¥çš„æƒ…å†µï¼Œå³ä½¿æœåŠ¡å™¨è¿›ç¨‹ä»åœ¨è¿è¡Œã€‚")]),e._v(" "),a("p",[e._v("æŒ‡å®šå®¹å™¨çš„ "),a("em",[e._v("è¿è¡ŒçŠ¶å†µæ£€æŸ¥å")]),e._v(" ï¼Œé™¤äº†å…¶æ­£å¸¸çŠ¶æ€å¤– ï¼Œå®ƒè¿˜å…·æœ‰"),a("em",[e._v("è¿è¡Œ")]),e._v(" çŠ¶å†µã€‚ æ­¤çŠ¶æ€æœ€åˆä¸º "),a("code",[e._v("starting")]),e._v(" ã€‚ åªè¦è¿è¡ŒçŠ¶å†µæ£€æŸ¥é€šè¿‡ï¼Œå®ƒå°†å˜ä¸º "),a("code",[e._v("healthy")]),e._v(" ï¼ˆä»¥å‰å¤„äºä»»ä½•çŠ¶æ€ï¼‰ã€‚ åœ¨ä¸€å®šæ•°é‡çš„è¿ç»­å¤±è´¥ä¹‹åï¼Œå®ƒå˜ä¸º "),a("code",[e._v("unhealthy")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ä¹‹å‰å¯èƒ½å‡ºç°çš„é€‰é¡¹ "),a("code",[e._v("CMD")]),e._v(" æ˜¯ï¼š")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("--interval=DURATION")]),e._v(" ï¼ˆé»˜è®¤å€¼ï¼š "),a("code",[e._v("30s")]),e._v(" ï¼‰")]),e._v(" "),a("li",[a("code",[e._v("--timeout=DURATION")]),e._v(" ï¼ˆé»˜è®¤å€¼ï¼š "),a("code",[e._v("30s")]),e._v(" ï¼‰")]),e._v(" "),a("li",[a("code",[e._v("--start-period=DURATION")]),e._v(" ï¼ˆé»˜è®¤å€¼ï¼š "),a("code",[e._v("0s")]),e._v(" ï¼‰")]),e._v(" "),a("li",[a("code",[e._v("--retries=N")]),e._v(" ï¼ˆé»˜è®¤å€¼ï¼š "),a("code",[e._v("3")]),e._v(" ï¼‰")])]),e._v(" "),a("p",[e._v("è¿è¡ŒçŠ¶å†µæ£€æŸ¥å°†é¦–å…ˆ åœ¨å¯åŠ¨å®¹å™¨å "),a("strong",[e._v("é—´éš”")]),e._v(" å‡ ç§’é’Ÿ è¿è¡Œ ä¸€æ¬¡ï¼Œç„¶å åœ¨æ¯æ¬¡ä¹‹å‰çš„æ£€æŸ¥å®Œæˆå "),a("strong",[e._v("é—´éš”")]),e._v(" å‡ ç§’é’Ÿ å†æ¬¡"),a("strong",[e._v("è¿è¡Œ")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœå•æ¬¡æ£€æŸ¥èŠ±è´¹çš„æ—¶é—´è¶…è¿‡ "),a("strong",[e._v("è¶…æ—¶")]),e._v(" ç§’æ•°ï¼Œåˆ™è®¤ä¸ºæ£€æŸ¥å¤±è´¥ã€‚")]),e._v(" "),a("p",[e._v("å¯¹äºè¦è€ƒè™‘çš„å®¹å™¨ ï¼Œéœ€è¦ "),a("strong",[e._v("é‡è¯•")]),e._v(" è¿ç»­è¿›è¡Œçš„è¿è¡ŒçŠ¶å†µæ£€æŸ¥å¤±è´¥ "),a("code",[e._v("unhealthy")]),e._v(" ã€‚")]),e._v(" "),a("p",[a("strong",[e._v("å¼€å§‹æ—¶é—´æ®µ")]),e._v(" ä¸ºéœ€è¦æ—¶é—´è¿›è¡Œå¼•å¯¼çš„å®¹å™¨æä¾›äº†åˆå§‹åŒ–æ—¶é—´ã€‚ åœ¨æ­¤æœŸé—´å†…çš„æ¢é’ˆæ•…éšœå°†ä¸è®¡å…¥æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚ ä½†æ˜¯ï¼Œå¦‚æœè¿è¡ŒçŠ¶å†µæ£€æŸ¥åœ¨å¯åŠ¨æœŸé—´æˆåŠŸï¼Œåˆ™è®¤ä¸ºè¯¥å®¹å™¨å·²å¯åŠ¨ï¼Œå¹¶ä¸”æ‰€æœ‰è¿ç»­å¤±è´¥å°†è®¡å…¥æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚")]),e._v(" "),a("p",[a("code",[e._v("HEALTHCHECK")]),e._v(" Dockerfileä¸­ åªèƒ½æœ‰ä¸€æ¡ æŒ‡ä»¤ã€‚ å¦‚æœæ‚¨åˆ—å‡ºå¤šä¸ªï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ª "),a("code",[e._v("HEALTHCHECK")]),e._v(" æ‰ä¼šç”Ÿæ•ˆã€‚")]),e._v(" "),a("p",[a("code",[e._v("CMD")]),e._v(" å…³é”®å­— åé¢çš„å‘½ä»¤ å¯ä»¥æ˜¯shellå‘½ä»¤ï¼ˆä¾‹å¦‚ "),a("code",[e._v("HEALTHCHECK CMD /bin/check-running")]),e._v(" ï¼‰æˆ– "),a("em",[e._v("exec")]),e._v(" æ•°ç»„ï¼ˆä¸å…¶ä»–Dockerfileå‘½ä»¤ä¸€æ ·ï¼› "),a("code",[e._v("ENTRYPOINT")]),e._v(" æœ‰å…³è¯¦ç»†ä¿¡æ¯ ï¼Œè¯·å‚è§ä¾‹å¦‚ ï¼‰ã€‚")]),e._v(" "),a("p",[e._v("å‘½ä»¤çš„é€€å‡ºçŠ¶æ€æŒ‡ç¤ºå®¹å™¨çš„å¥åº·çŠ¶æ€ã€‚ å¯èƒ½çš„å€¼ä¸ºï¼š")]),e._v(" "),a("ul",[a("li",[e._v("0ï¼šæˆåŠŸ-å®¹å™¨å¥åº·ä¸”å¯ä»¥ä½¿ç”¨")]),e._v(" "),a("li",[e._v("1ï¼šä¸å¥åº·-å®¹å™¨æ— æ³•æ­£å¸¸å·¥ä½œ")]),e._v(" "),a("li",[e._v("2ï¼šä¿ç•™-è¯·å‹¿ä½¿ç”¨æ­¤é€€å‡ºä»£ç ")])]),e._v(" "),a("p",[e._v("ä¾‹å¦‚ï¼Œè¦æ¯äº”åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œä»¥ä¾¿ç½‘ç»œæœåŠ¡å™¨èƒ½å¤Ÿåœ¨ä¸‰ç§’é’Ÿå†…ä¸ºç«™ç‚¹çš„ä¸»é¡µæä¾›æœåŠ¡ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("HEALTHCHECK --interval=5m --timeout=3s \\\n  CMD curl -f http://localhost/ || exit 1\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("ä¸ºäº†å¸®åŠ©è°ƒè¯•å¤±è´¥çš„æ¢é’ˆï¼Œè¯¥å‘½ä»¤åœ¨stdoutæˆ–stderrä¸Šå†™å…¥çš„ä»»ä½•è¾“å‡ºæ–‡æœ¬ï¼ˆUTF-8ç¼–ç ï¼‰éƒ½å°†å­˜å‚¨åœ¨è¿è¡ŒçŠ¶å†µä¸­ï¼Œå¹¶å¯ä»¥é€šè¿‡æŸ¥è¯¢ "),a("code",[e._v("docker inspect")]),e._v(" ã€‚ æ­¤ç±»è¾“å‡ºåº”ä¿æŒç®€çŸ­ï¼ˆå½“å‰ä»…å­˜å‚¨å‰4096ä¸ªå­—èŠ‚ï¼‰ã€‚")]),e._v(" "),a("p",[e._v("å®¹å™¨çš„å¥åº·çŠ¶æ€å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œå°† "),a("code",[e._v("health_status")]),e._v(" ç”Ÿæˆå…·æœ‰æ–°çŠ¶æ€ çš„ äº‹ä»¶ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("HEALTHCHECK")]),e._v(" åŠŸèƒ½å·²åœ¨Docker 1.12ä¸­æ·»åŠ ã€‚")]),e._v(" "),a("h2",{attrs:{id:"shell-ğŸ”—"}},[e._v("SHELL "),a("a",{attrs:{href:"#shell"}},[e._v("ğŸ”—")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('SHELL ["executable", "parameters"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤å…è®¸ è¦†ç›– ç”¨äº å‘½ä»¤ çš„ "),a("em",[e._v("shell")]),e._v(" å½¢å¼ çš„é»˜è®¤shell ã€‚ åœ¨Linuxä¸Š "),a("code",[e._v('["/bin/sh", "-c"]')]),e._v(" ï¼Œ é»˜è®¤shellæ˜¯ ï¼Œåœ¨Windows ä¸Šï¼Œé»˜è®¤shell æ˜¯ "),a("code",[e._v('["cmd", "/S", "/C"]')]),e._v(" ã€‚ è¯¥ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤ "),a("em",[e._v("å¿…é¡»")]),e._v(" ä»¥Dockeræ ¼å¼çš„JSONå½¢å¼ç¼–å†™ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤åœ¨Windowsä¸Šç‰¹åˆ«æœ‰ç”¨ï¼Œåœ¨Windowsä¸Šæœ‰ä¸¤ä¸ªå¸¸ç”¨ä¸”å®Œå…¨ä¸åŒçš„æœ¬æœºshellï¼š "),a("code",[e._v("cmd")]),e._v(" å’Œ "),a("code",[e._v("powershell")]),e._v(" ï¼Œä»¥åŠå¯ç”¨çš„æ›¿ä»£shellåŒ…æ‹¬ "),a("code",[e._v("sh")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("SHELL")]),e._v(" è¯´æ˜å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚ æ¯ä¸ª "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤å°†è¦†ç›–æ‰€æœ‰å…ˆå‰çš„ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤ï¼Œå¹¶å½±å“æ‰€æœ‰åç»­çš„æŒ‡ä»¤ã€‚ ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM microsoft/windowsservercore\n\n# Executed as cmd /S /C echo default\nRUN echo default\n\n# Executed as cmd /S /C powershell -command Write-Host default\nRUN powershell -command Write-Host default\n\n# Executed as powershell -command Write-Host hello\nSHELL ["powershell", "-command"]\nRUN Write-Host hello\n\n# Executed as cmd /S /C echo hello\nSHELL ["cmd", "/S", "/C"]\nRUN echo hello\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br")])]),a("p",[e._v("ä»¥ä¸‹è¯´æ˜å¯ä»¥é€šè¿‡å½±å“ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤æ—¶ï¼Œ "),a("em",[e._v("å£³")]),e._v(" ä»–ä»¬çš„å½¢å¼åœ¨ä¸€ä¸ªDockerfileä½¿ç”¨ï¼š "),a("code",[e._v("RUN")]),e._v(" ï¼Œ "),a("code",[e._v("CMD")]),e._v(" å’Œ "),a("code",[e._v("ENTRYPOINT")]),e._v(" ã€‚")]),e._v(" "),a("p",[e._v("ä»¥ä¸‹ç¤ºä¾‹æ˜¯Windowsä¸Šå¸¸è§çš„æ¨¡å¼ï¼Œå¯é€šè¿‡ä½¿ç”¨ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤ è¿›è¡Œç²¾ç®€ ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('RUN powershell -command Execute-MyCmdlet -param1 "c:\\foo.txt"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("dockerè°ƒç”¨çš„å‘½ä»¤å°†æ˜¯ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('cmd /S /C powershell -command Execute-MyCmdlet -param1 "c:\\foo.txt"\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("è¿™æ•ˆç‡ä½ä¸‹æœ‰ä¸¤ä¸ªåŸå› ã€‚ é¦–å…ˆï¼Œæœ‰ä¸€ä¸ªä¸å¿…è¦çš„cmd.exeå‘½ä»¤å¤„ç†å™¨ï¼ˆä¹Ÿç§°ä¸ºShellï¼‰è¢«è°ƒç”¨ã€‚ å…¶æ¬¡ï¼Œ"),a("em",[e._v("shell")]),e._v(" å½¢å¼çš„ æ¯æ¡ "),a("code",[e._v("RUN")]),e._v(" æŒ‡ä»¤éƒ½ éœ€è¦ åœ¨å‘½ä»¤å‰åŠ ä¸Šå‰ç¼€ã€‚ "),a("code",[e._v("powershell -command")])]),e._v(" "),a("p",[e._v("ä¸ºäº†ä½¿å…¶æ›´æœ‰æ•ˆï¼Œå¯ä»¥é‡‡ç”¨ä¸¤ç§æœºåˆ¶ä¹‹ä¸€ã€‚ ä¸€ç§æ˜¯ä½¿ç”¨RUNå‘½ä»¤çš„JSONå½¢å¼ï¼Œä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('RUN ["powershell", "-command", "Execute-MyCmdlet", "-param1 \\"c:\\\\foo.txt\\""]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å°½ç®¡JSONå½¢å¼æ˜¯æ˜ç¡®çš„ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨ä¸å¿…è¦çš„cmd.exeï¼Œä½†å®ƒç¡®å®éœ€è¦é€šè¿‡åŒå¼•å·å’Œè½¬ä¹‰æ¥å®ç°æ›´å¤šçš„è¯¦ç»†ä¿¡æ¯ã€‚ å¦ä¸€ç§æœºåˆ¶æ˜¯ä½¿ç”¨ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤å’Œ "),a("em",[e._v("å¤–å£³ç¨‹åº")]),e._v(" å½¢å¼ï¼Œä½¿Windowsç”¨æˆ·çš„è¯­æ³•æ›´è‡ªç„¶ï¼Œå°¤å…¶æ˜¯ä¸ "),a("code",[e._v("escape")]),e._v(" parseræŒ‡ä»¤ ç»“åˆä½¿ç”¨æ—¶ ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('# escape=`\n\nFROM microsoft/nanoserver\nSHELL ["powershell","-command"]\nRUN New-Item -ItemType Directory C:\\Example\nADD Execute-MyCmdlet.ps1 c:\\example\\\nRUN c:\\example\\Execute-MyCmdlet -sample \'hello world\'\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("p",[e._v("å¯¼è‡´ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("PS E:\\docker\\build\\shell> docker build -t shell .\nSending build context to Docker daemon 4.096 kB\nStep 1/5 : FROM microsoft/nanoserver\n ---\x3e 22738ff49c6d\nStep 2/5 : SHELL powershell -command\n ---\x3e Running in 6fcdb6855ae2\n ---\x3e 6331462d4300\nRemoving intermediate container 6fcdb6855ae2\nStep 3/5 : RUN New-Item -ItemType Directory C:\\Example\n ---\x3e Running in d0eef8386e97\n\n    Directory: C:\\\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----       10/28/2016  11:26 AM                Example\n\n ---\x3e 3f2fbf1395d9\nRemoving intermediate container d0eef8386e97\nStep 4/5 : ADD Execute-MyCmdlet.ps1 c:\\example\\\n ---\x3e a955b2621c31\nRemoving intermediate container b825593d39fc\nStep 5/5 : RUN c:\\example\\Execute-MyCmdlet 'hello world'\n ---\x3e Running in be6d8e63fe75\nhello world\n ---\x3e 8e559e9bf424\nRemoving intermediate container be6d8e63fe75\nSuccessfully built 8e559e9bf424\nPS E:\\docker\\build\\shell>\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br"),a("span",{staticClass:"line-number"},[e._v("28")]),a("br"),a("span",{staticClass:"line-number"},[e._v("29")]),a("br"),a("span",{staticClass:"line-number"},[e._v("30")]),a("br")])]),a("p",[e._v("è¯¥ "),a("code",[e._v("SHELL")]),e._v(" æŒ‡ä»¤è¿˜å¯ç”¨äºä¿®æ”¹å¤–å£³çš„æ“ä½œæ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œ "),a("code",[e._v("SHELL cmd /S /C /V:ON|OFF")]),e._v(" åœ¨Windowsä¸Š ä½¿ç”¨ ï¼Œå¯ä»¥ä¿®æ”¹å»¶è¿Ÿçš„ç¯å¢ƒå˜é‡æ‰©å±•è¯­ä¹‰ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœ "),a("code",[e._v("SHELL")]),e._v(" éœ€è¦å¤‡ç”¨shellï¼Œä¾‹å¦‚ ï¼Œ å’Œå…¶ä»– "),a("code",[e._v("zsh")]),e._v(" ï¼Œ è¯¥ æŒ‡ä»¤ä¹Ÿå¯ä»¥åœ¨Linuxä¸Šä½¿ç”¨ ã€‚ "),a("code",[e._v("csh")]),e._v(" "),a("code",[e._v("tcsh")])]),e._v(" "),a("p",[e._v("è¯¥ "),a("code",[e._v("SHELL")]),e._v(" åŠŸèƒ½å·²åœ¨Docker 1.12ä¸­æ·»åŠ ã€‚")]),e._v(" "),a("h2",{attrs:{id:"å¤–éƒ¨å®æ–½åŠŸèƒ½-ğŸ”—"}},[e._v("å¤–éƒ¨å®æ–½åŠŸèƒ½ "),a("a",{attrs:{href:"#external-implementation-features"}},[e._v("ğŸ”—")])]),e._v(" "),a("p",[e._v("ä»…å½“ä½¿ç”¨ "),a("a",{attrs:{href:"#buildkit"}},[e._v("BuildKit")]),e._v(" åç«¯ æ—¶ï¼Œæ­¤åŠŸèƒ½æ‰å¯ç”¨ ã€‚")]),e._v(" "),a("p",[e._v("Dockeræ„å»ºæ”¯æŒå®éªŒæ€§åŠŸèƒ½ï¼Œä¾‹å¦‚ç¼“å­˜å®‰è£…ï¼Œæ„å»ºæœºå¯†å’Œsshè½¬å‘ï¼Œè¿™äº›åŠŸèƒ½é€šè¿‡ä½¿ç”¨å¸¦æœ‰è¯­æ³•æŒ‡ä»¤çš„æ„å»ºå™¨çš„å¤–éƒ¨å®ç°å¯ç”¨ã€‚ è¦äº†è§£è¿™äº›åŠŸèƒ½ï¼Œ "),a("a",{attrs:{href:"https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/experimental.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¯·å‚é˜…BuildKitä¿¡æ¯åº“ä¸­çš„æ–‡æ¡£"),a("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),a("h2",{attrs:{id:"dockerfileç¤ºä¾‹-examples"}},[e._v("Dockerfileç¤ºä¾‹ "),a("a",{attrs:{href:"#dockerfile-examples"}},[e._v("examples")])]),e._v(" "),a("p",[e._v("åœ¨ä¸‹é¢ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°Dockerfileè¯­æ³•çš„ä¸€äº›ç¤ºä¾‹ã€‚")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('# Nginx\n#\n# VERSION               0.0.1\n\nFROM      ubuntu\nLABEL Description="This image is used to start the foobar executable" Vendor="ACME Products" Version="1.0"\nRUN apt-get update && apt-get install -y inotify-tools nginx apache2 openssh-server\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('# Firefox over VNC\n#\n# VERSION               0.3\n\nFROM ubuntu\n\n# Install vnc, xvfb in order to create a \'fake\' display and firefox\nRUN apt-get update && apt-get install -y x11vnc xvfb firefox\nRUN mkdir ~/.vnc\n# Setup a password\nRUN x11vnc -storepasswd 1234 ~/.vnc/passwd\n# Autostart firefox (might not be the best way, but it does the trick)\nRUN bash -c \'echo "firefox" >> /.bashrc\'\n\nEXPOSE 5900\nCMD    ["x11vnc", "-forever", "-usepw", "-create"]\n\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Multiple images example\n#\n# VERSION               0.1\n\nFROM ubuntu\nRUN echo foo > bar\n# Will output something like ===> 907ad6c2736f\n\nFROM ubuntu\nRUN echo moo > oink\n# Will output something like ===> 695d7793cbe4\n\n# You'll now have two images, 907ad6c2736f with /bar, and 695d7793cbe4 with\n# /oink.\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])])])}),[],!1,null,null,null);s.default=v.exports}}]);